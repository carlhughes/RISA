{"components":[{"id":2,"steps":[{"id":3,"inputs":{},"position":"-690,-200","purpose":"start","title":"Start","transitions":[{"id":6,"inputs":{},"position":"-600,-140 -600,-70","target":{"id":291},"targetConnector":"top"}]},{"action":"gcx:wf:forms:form:DisplayForm","id":4,"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":5}},"reset":true},"name":"form","position":"-720,410","title":"Display Form","transitions":[{"id":2000,"inputs":{},"position":"-600,530 -600,700","sourceConnector":"bottom","target":{"id":1987},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":291,"inputs":{},"position":"-720,-70","title":"Container","transitions":[{"id":295,"inputs":{},"position":"-600,20 -600,110","sourceConnector":"bottom","target":{"id":5377},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1985,"inputs":{"object":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature","source":"$theFeature"},"propertyName":"feature","propertyValue":{"accessors":["$queryUpdatedFeature"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$queryUpdatedFeature.feature","source":"$queryUpdatedFeature.feature"}},"position":"-720,810","title":"Set Property","transitions":[{"id":1996,"inputs":{},"position":"-600,840 -600,920","sourceConnector":"bottom","target":{"id":3533},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","id":1987,"inputs":{"outFields":"*","returnGeometry":true,"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"},"where":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":16,"kind":"idref"}],"code":"\"OBJECTID = \" + $theFeature.feature.attributes.OBJECTID","source":"\"OBJECTID = \" + $theFeature.feature.attributes.OBJECTID"}},"name":"queryUpdatedFeature","position":"-720,700","title":"Query Layer","transitions":[{"id":1991,"inputs":{},"position":"-600,770 -600,810","sourceConnector":"bottom","target":{"id":1985},"targetConnector":"top"}]},{"action":"gcx:wf:core::Switch","id":3533,"inputs":{"value":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.result","source":"$form.result"}},"position":"-720,920","title":"Switch","transitions":[{"branch":"reject","id":1997,"inputs":{},"position":"-540,980 -540,1000 -460,1000 -460,470 -480,470","sourceConnector":"bottom-right","target":{"id":4},"targetConnector":"right"},{"id":3534,"inputs":{},"position":"-480,950 -460,950 -460,390 -600,390 -600,410","purpose":"default","sourceConnector":"right","target":{"id":4},"targetConnector":"top","title":"refresh"},{"branch":"back","id":3535,"inputs":{},"position":"-720,950 -740,950 -740,90 -600,90 -600,110","sourceConnector":"left","target":{"id":5377},"targetConnector":"top"},{"branch":"approve","id":3536,"inputs":{},"position":"-660,980 -660,1000 -740,1000 -740,90 -600,90 -600,110","sourceConnector":"bottom-left","target":{"id":5377},"targetConnector":"top"}]},{"action":"gcx:wf:forms:form:DisplayForm","id":5377,"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":5375}}},"name":"filters","position":"-720,110","title":"Display Form","transitions":[{"id":1035,"inputs":{},"position":"-600,230 -600,410","sourceConnector":"bottom","target":{"id":4},"targetConnector":"top"}]}]},{"id":292,"steps":[{"id":293,"inputs":{},"position":"0,390","purpose":"start","title":"Container","transitions":[{"id":1626,"inputs":{},"position":"90,450 90,500","sourceConnector":"bottom","target":{"id":1579},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":333,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"[\n    { field: \"Route_ID\", type: \"key\", name: \"Route ID\" },\n    { field: \"St_Name\", type: \"key\", name: \"Street Name\" },\n    { field: \"From_Measure\", type: \"key\", name: \"From Measure\" },\n    { field: \"To_Measure\", type: \"key\", name: \"To Measure\" },\n    { field: \"Length\", type: \"key\", name: \"Length\" },\n    { field: \"Attributes_Edited\", type: \"key\", name: \"Attributes To Update\" },\n    { field: \"Comments\", type: \"key\", name: \"Town Comments\" },\n    { field: \"Status\", type: \"key\", name: \"RISA Status\", domain: true },\n    { field: \"Jurisdictn\", type: \"jur\", name: \"Jurisdiction\", domain: true, formType: \"DropDownList\" },\n    { field: \"Fm_St_Name\", type: \"attribute\", name: \"From Street Name\", formType: \"TextBox\" },\n    { field: \"To_St_Name\", type: \"attribute\", name: \"To Street Name\", formType: \"TextBox\" },\n    { field: \"Num_Lanes\", type: \"attribute\", name: \"Number of Travel Lanes\", formType: \"Number\" },\n    { field: \"Curb\", type: \"attribute\", name: \"Curb\", domain: true, formType: \"DropDownList\" },\n    { field: \"Speed_Lim\", type: \"attribute\", name: \"Speed Limit\", formType: \"Number\" },\n    { field: \"ROW_Width\", type: \"attribute\", name: \"Right Of Way Width\", formType: \"Number\" },\n    { field: \"Surface_Tp\", type: \"attribute\", name: \"Surface Type\", domain: true, formType: \"DropDownList\" },\n    { field: \"Surface_Wd\", type: \"attribute\", name: \"Surface Width\", formType: \"Number\" },\n    { field: \"Shldr_Lt_T\", type: \"attribute\", name: \"Shoulder Type Left\", domain: true, formType: \"DropDownList\" },\n    { field: \"Shldr_Rt_T\", type: \"attribute\", name: \"Shoulder Type Right\", domain: true, formType: \"DropDownList\" },\n    { field: \"Shldr_Lt_W\", type: \"attribute\", name: \"Shoulder Width Left\", formType: \"Number\" },\n    { field: \"Shldr_Rt_W\", type: \"attribute\", name: \"Shoulder Width Right\", formType: \"Number\" },\n    { field: \"Pd_Sf_Type\", type: \"attribute\", name: \"Ped Surface Type\", domain: true, formType: \"DropDownList\" },\n    { field: \"Pd_Fc_Type\", type: \"attribute\", name: \"Ped Facility Type\", domain: true, formType: \"DropDownList\" },\n    { field: \"Lt_Sidewlk\", type: \"attribute\", name: \"Left Sidewalk Width\", formType: \"Number\" },\n    { field: \"Rt_Sidewlk\", type: \"attribute\", name: \"Right Sidewalk Width\", formType: \"Number\" },\n    { field: \"Left_Cond\", type: \"attribute\", name: \"Left Condition\", domain: true, formType: \"DropDownList\" },\n    { field: \"Right_Cond\", type: \"attribute\", name: \"Right Condition\", domain: true, formType: \"DropDownList\" },\n    { field: \"Operation\", type: \"attribute\", name: \"Street Operation\", domain: true, formType: \"DropDownList\" },\n    { field: \"Control\", type: \"attribute\", name: \"Access Control\", domain: true, formType: \"DropDownList\" },\n    { field: \"Struct_Cnd\", type: \"attribute\", name: \"Structural Condition\", domain: true, formType: \"DropDownList\" },\n    { field: \"Terrain\", type: \"attribute\", name: \"Terrain Type\", domain: true, formType: \"DropDownList\" },\n    { field: \"Path_Width\", type: \"attribute\", name: \"Path Width\", formType: \"Number\" },\n    { field: \"Email\", type: \"submission\", name: \"Email\" },\n    { field: \"submissionDocuments\", type: \"submission\", name: \"Route ID\" },\n    { field: \"roadDocumentation\", edit: \"other\", name: \"Route ID\" },\n    { field: \"saveRefresh\", type: \"edit\", name: \"Route ID\" },\n    { field: \"reviewerComments\", type: \"edit\", name: \"Route ID\" },\n    { field: \"saveUpdate\", type: \"edit\", name: \"Route ID\" },\n    { field: \"Priority\", type: \"other\", name: \"Route Priority\" },\n    { field: \"NHS\", type: \"other\", name: \"NHS\" },\n    { field: \"Mile_Count_MC\", type: \"other\", name: \"Mileage Counted\" },\n    { field: \"F_Class\", type: \"other\", name: \"Functional Classification\" },\n    { field: \"Facility\", type: \"other\", name: \"Facility Type\" }\n]","source":"[\n{ field: \"Route_ID\", type: \"key\", name: \"Route ID\"},\n{ field: \"St_Name\", type: \"key\", name: \"Street Name\"},\n{ field: \"From_Measure\", type: \"key\", name: \"From Measure\"},\n{ field: \"To_Measure\", type: \"key\", name: \"To Measure\"},\n{ field: \"Length\", type: \"key\", name: \"Length\"},\n{ field: \"Attributes_Edited\", type: \"key\", name: \"Attributes To Update\"},\n{ field: \"Comments\", type: \"key\", name: \"Town Comments\"}, \n{ field: \"Status\", type: \"key\", name: \"RISA Status\", domain: true}, \n{ field: \"Jurisdictn\", type: \"jur\", name: \"Jurisdiction\", domain: true, formType: \"DropDownList\"},\n{ field: \"Fm_St_Name\", type: \"attribute\", name: \"From Street Name\", formType: \"TextBox\"},\n{ field: \"To_St_Name\", type: \"attribute\", name: \"To Street Name\", formType: \"TextBox\"},\n{ field: \"Num_Lanes\", type: \"attribute\", name: \"Number of Travel Lanes\", formType: \"Number\"},\n{ field: \"Curb\", type: \"attribute\", name: \"Curb\", domain: true, formType: \"DropDownList\"},\n{ field: \"Speed_Lim\", type: \"attribute\", name: \"Speed Limit\", formType: \"Number\"},\n{ field: \"ROW_Width\", type: \"attribute\", name: \"Right Of Way Width\", formType: \"Number\"}, \n{ field: \"Surface_Tp\", type: \"attribute\", name: \"Surface Type\", domain: true, formType: \"DropDownList\"},\n{ field: \"Surface_Wd\", type: \"attribute\", name: \"Surface Width\", formType: \"Number\"},\n{ field: \"Shldr_Lt_T\", type: \"attribute\", name: \"Shoulder Type Left\", domain: true, formType: \"DropDownList\"},\n{ field: \"Shldr_Rt_T\", type: \"attribute\", name: \"Shoulder Type Right\", domain: true, formType: \"DropDownList\"},\n{ field: \"Shldr_Lt_W\", type: \"attribute\", name: \"Shoulder Width Left\", formType: \"Number\"}, \n{ field: \"Shldr_Rt_W\", type: \"attribute\", name: \"Shoulder Width Right\", formType: \"Number\"},\n{ field: \"Pd_Sf_Type\", type: \"attribute\", name: \"Ped Surface Type\", domain: true, formType: \"DropDownList\"},\n{ field: \"Pd_Fc_Type\", type: \"attribute\", name: \"Ped Facility Type\", domain: true, formType: \"DropDownList\"},\n{ field: \"Lt_Sidewlk\", type: \"attribute\", name: \"Left Sidewalk Width\", formType: \"Number\"},\n{ field: \"Rt_Sidewlk\", type: \"attribute\", name: \"Right Sidewalk Width\", formType: \"Number\"},\n{ field: \"Left_Cond\", type: \"attribute\", name: \"Left Condition\", domain: true, formType: \"DropDownList\"},\n{ field: \"Right_Cond\", type: \"attribute\", name: \"Right Condition\", domain: true, formType: \"DropDownList\"},\n{ field: \"Operation\", type: \"attribute\", name: \"Street Operation\", domain: true, formType: \"DropDownList\"},\n{ field: \"Control\", type: \"attribute\", name: \"Access Control\", domain: true, formType: \"DropDownList\"},\n{ field: \"Struct_Cnd\", type: \"attribute\", name: \"Structural Condition\", domain: true, formType: \"DropDownList\"}, \n{ field: \"Terrain\", type: \"attribute\", name: \"Terrain Type\", domain: true, formType: \"DropDownList\"},\n{ field: \"Path_Width\", type: \"attribute\", name: \"Path Width\", formType: \"Number\"},\n{ field: \"Email\", type: \"submission\", name: \"Email\"},\n{ field: \"submissionDocuments\", type: \"submission\", name: \"Route ID\"},\n{ field: \"roadDocumentation\", edit: \"other\", name: \"Route ID\"},\n{ field: \"saveRefresh\", type: \"edit\", name: \"Route ID\"},\n{ field: \"reviewerComments\", type: \"edit\", name: \"Route ID\"},\n{ field: \"saveUpdate\", type: \"edit\", name: \"Route ID\"},\n{ field: \"Priority\", type: \"other\", name: \"Route Priority\"},\n{ field: \"NHS\", type: \"other\", name: \"NHS\"},\n{ field: \"Mile_Count_MC\", type: \"other\", name: \"Mileage Counted\"},\n{ field: \"F_Class\", type: \"other\", name: \"Functional Classification\"},\n{ field: \"Facility\", type: \"other\", name: \"Facility Type\"}\n]"}},"name":"fieldsList","position":"-30,1210","title":"Create Value","transitions":[{"id":1722,"inputs":{},"position":"90,1280 90,1330","sourceConnector":"bottom","target":{"id":1271},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":1069,"inputs":{},"name":"domains","position":"-30,660","title":"Container","transitions":[{"id":1090,"inputs":{},"position":"90,780 90,820","sourceConnector":"bottom","target":{"id":1672},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1271,"inputs":{"expression":"all"},"name":"submissionQuery","position":"-30,1330","title":"Create Value","transitions":[{"id":2005,"inputs":{},"position":"90,1400 90,1470","sourceConnector":"bottom","target":{"id":1939},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1552,"inputs":{},"name":"townLabel","position":"-30,1890","title":"Create Value"},{"action":"gcx:wf:core::Container","description":"URLs","id":1579,"inputs":{},"position":"-30,500","title":"Container","transitions":[{"id":1625,"inputs":{},"position":"90,620 90,660","sourceConnector":"bottom","target":{"id":1069},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Symbols","id":1627,"inputs":{},"position":"-30,1000","title":"Container","transitions":[{"id":1706,"inputs":{},"position":"90,1120 90,1210","sourceConnector":"bottom","target":{"id":333},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Features","id":1672,"inputs":{},"position":"-30,820","title":"Container","transitions":[{"id":1708,"inputs":{},"position":"90,940 90,1000","sourceConnector":"bottom","target":{"id":1627},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1939,"inputs":{"expression":"Status = 0"},"name":"acceptedSQL","position":"-30,1470","title":"Create Value","transitions":[{"id":2446,"inputs":{},"position":"90,1540 90,1620","sourceConnector":"bottom","target":{"id":2445},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetMap","id":2445,"inputs":{},"name":"map1","position":"-30,1620","title":"Get Map","transitions":[{"id":5820,"inputs":{},"position":"90,1690 90,1770","sourceConnector":"bottom","target":{"id":5819},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":5819,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"{ \"filterSubmissions\": \"Status = 0 AND created_date > timestamp '2020-01-01 00:00:01'\", \"townId\": null, \"updates\": null, \"newRoads\": null }","source":"{\"filterSubmissions\": \"Status = 0 AND created_date > timestamp '2020-01-01 00:00:01'\", \"townId\": null, \"updates\": null, \"newRoads\": null}"}},"name":"filterValues","position":"-30,1770","title":"Create Value","transitions":[{"id":1553,"inputs":{},"position":"90,1840 90,1890","sourceConnector":"bottom","target":{"id":1552},"targetConnector":"top"}]}]},{"id":355,"steps":[{"id":357,"inputs":{},"position":"300,-1040","purpose":"start","title":"Event","transitions":[{"id":1930,"inputs":{},"position":"390,-980 390,-890","sourceConnector":"bottom","target":{"id":1922},"targetConnector":"top"}]},{"action":"gcx:wf:core::Switch","id":381,"inputs":{"value":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.event.value","source":"$form.event.value"}},"position":"-170,70","title":"Switch","transitions":[{"id":429,"inputs":{},"position":"-170,100 -270,100 -270,360","purpose":"default","sourceConnector":"left","target":{"id":402},"targetConnector":"top","title":"accept"},{"branch":"reject","id":1941,"inputs":{},"position":"70,100 100,100 100,360","sourceConnector":"right","target":{"id":421},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Accept the edit","id":402,"inputs":{},"position":"-390,360","title":"Container","transitions":[{"id":2004,"inputs":{},"position":"-270,480 -270,760 -80,760 -80,780","sourceConnector":"bottom","target":{"id":1947},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Reject the edit","id":421,"inputs":{},"position":"-20,360","title":"Container","transitions":[{"id":2006,"inputs":{},"position":"100,480 100,760 -80,760 -80,780","sourceConnector":"bottom","target":{"id":1947},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Handles values for additional attributes like NHS, Mile Count etc.","id":1463,"inputs":{},"position":"-20,-770","title":"Container","transitions":[{"id":1468,"inputs":{},"position":"100,-610 100,-560","sourceConnector":"bottom","target":{"id":2531},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","description":"Checks if user pressed \"Back\"","id":1922,"inputs":{"condition":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.event.value !== \"back\"","source":"$form.event.value !== \"back\""}},"position":"270,-890","title":"If","transitions":[{"branch":"true","id":1923,"inputs":{},"position":"270,-845 100,-845 100,-770","sourceConnector":"left","target":{"id":1463},"targetConnector":"top"},{"branch":"false","id":1926,"inputs":{},"position":"510,-845 780,-845 780,-800","sourceConnector":"right","target":{"id":1934},"targetConnector":"top"}]},{"action":"gcx:wf:forms::PropagateFormEvent","id":1925,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"490,-570","title":"Propagate Form Event"},{"action":"gcx:wf:ui::Confirm","id":1934,"inputs":{"text":{"accessors":[],"code":"\"You are about to go back. All changes you have made will be lost. Please confirm you want to proceed?\"","source":"\"You are about to go back. All changes you have made will be lost. Please confirm you want to proceed?\""},"title":"Please confirm"},"name":"confirmBack","position":"660,-800","title":"Confirm","transitions":[{"id":1938,"inputs":{},"position":"780,-730 780,-670","sourceConnector":"bottom","target":{"id":1936},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1936,"inputs":{"condition":{"accessors":["$confirmBack"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$confirmBack.result","source":"$confirmBack.result"}},"position":"720,-670","title":"If","transitions":[{"branch":"true","id":1940,"inputs":{},"position":"720,-640 610,-640 610,-570","sourceConnector":"left","target":{"id":1925},"targetConnector":"top"}]},{"action":"gcx:wf:forms::PropagateFormEvent","id":1947,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-200,780","title":"Propagate Form Event"},{"action":"gcx:wf:core:loop:ForEach","description":"Set the attribute values based on the current form selections","id":2531,"inputs":{"items":{"accessors":["$fieldsList"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$fieldsList.result","source":"$fieldsList.result"}},"name":"verifyAnyValueChanges","position":"-20,-560","title":"For Each","transitions":[{"id":2671,"inputs":{},"position":"100,-390 100,-330","sourceConnector":"bottom","target":{"id":2677},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::UpdateFeatures","description":"Updates the submission with current values","id":2591,"inputs":{"features":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"updateEdit","position":"-170,-90","title":"Update Features","transitions":[{"id":2685,"inputs":{},"position":"-50,20 -50,70","sourceConnector":"bottom","target":{"id":381},"targetConnector":"top"}]},{"action":"gcx:wf:ui::Confirm","id":2677,"inputs":{"text":{"accessors":["$form"],"annotations":[{"count":5,"index":22,"kind":"idref"}],"code":"\"You are about to \" + $form.event.value + \" this RISA submission. Please confirm you want to save the current values and proceed?\"","source":"\"You are about to \" + $form.event.value + \" this RISA submission. Please confirm you want to save the current values and proceed?\""},"title":"Confirm Approval"},"name":"confirmAction","position":"-20,-330","title":"Confirm","transitions":[{"id":2681,"inputs":{},"position":"100,-260 100,-200","sourceConnector":"bottom","target":{"id":2679},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2679,"inputs":{"condition":{"accessors":["$confirmAction"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$confirmAction.result","source":"$confirmAction.result"}},"position":"40,-200","title":"If","transitions":[{"branch":"true","id":2683,"inputs":{},"position":"40,-170 -50,-170 -50,-90","sourceConnector":"left","target":{"id":2591},"targetConnector":"top"}]}],"title":"click-saveUpdate"},{"id":393,"steps":[{"id":395,"inputs":{},"position":"-250,170","purpose":"start","title":"Container","transitions":[{"id":441,"inputs":{},"position":"-160,230 -160,320","sourceConnector":"bottom","target":{"id":729},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":598,"inputs":{"attributes":{"accessors":["$theFeature","$form"],"annotations":[{"count":11,"index":13,"kind":"idref"},{"count":5,"index":75,"kind":"idref"}],"code":"{ \"OBJECTID\": $theFeature.feature.attributes.OBJECTID,\n    \"Reviewer_Comments\": $form.state.Reviewer_Comments.value,\n    \"Status\": 1 }","source":"{\"OBJECTID\": $theFeature.feature.attributes.OBJECTID,\n\"Reviewer_Comments\": $form.state.Reviewer_Comments.value,\n\"Status\": 1}"}},"name":"acceptFeature","position":"-280,470","title":"Create Feature","transitions":[{"id":3896,"inputs":{},"position":"-160,540 -160,660","sourceConnector":"bottom","target":{"id":2854},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":729,"inputs":{"expression":"PENDING"},"name":"updateStatus","position":"-280,320","title":"Create Value","transitions":[{"id":2386,"inputs":{},"position":"-160,390 -160,470","sourceConnector":"bottom","target":{"id":598},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Loop through each LRS event layer to determine if new events need to be added/updated depending on if the attribute values are different","id":1995,"inputs":{"items":{"accessors":["$eventLayers"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$eventLayers.result","source":"$eventLayers.result"}},"name":"forEachLRSELayerNew","position":"-20,1060","title":"For Each","transitions":[{"id":1669,"inputs":{},"position":"100,1290 100,1430 -180,1430 -180,1450","sourceConnector":"bottom","target":{"id":2116},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::UpdateFeatures","id":2116,"inputs":{"features":{"accessors":["$acceptFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$acceptFeature.feature","source":"$acceptFeature.feature"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"updateSubmissionStatus","position":"-300,1450","title":"Update Features"},{"action":"gcx:wf:core::CreateValue","description":"List of all event layers and their respective attribute names. Assign the attribute values based on the submission, if a value exists.","id":2854,"inputs":{"expression":{"accessors":["$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature","$theFeature"],"annotations":[{"count":11,"index":61,"kind":"idref"},{"count":11,"index":160,"kind":"idref"},{"count":11,"index":268,"kind":"idref"},{"count":11,"index":382,"kind":"idref"},{"count":11,"index":494,"kind":"idref"},{"count":11,"index":584,"kind":"idref"},{"count":11,"index":696,"kind":"idref"},{"count":11,"index":788,"kind":"idref"},{"count":11,"index":881,"kind":"idref"},{"count":11,"index":974,"kind":"idref"},{"count":11,"index":1067,"kind":"idref"},{"count":11,"index":1160,"kind":"idref"},{"count":11,"index":1253,"kind":"idref"},{"count":11,"index":1367,"kind":"idref"},{"count":11,"index":1481,"kind":"idref"},{"count":11,"index":1574,"kind":"idref"},{"count":11,"index":1689,"kind":"idref"},{"count":11,"index":1782,"kind":"idref"},{"count":11,"index":1895,"kind":"idref"},{"count":11,"index":2002,"kind":"idref"},{"count":11,"index":2092,"kind":"idref"},{"count":11,"index":2185,"kind":"idref"},{"count":11,"index":2298,"kind":"idref"},{"count":11,"index":2411,"kind":"idref"},{"count":11,"index":2504,"kind":"idref"},{"count":11,"index":2612,"kind":"idref"},{"count":11,"index":2719,"kind":"idref"},{"count":11,"index":2810,"kind":"idref"},{"count":11,"index":2912,"kind":"idref"},{"count":11,"index":3014,"kind":"idref"},{"count":11,"index":3102,"kind":"idref"},{"count":11,"index":3201,"kind":"idref"},{"count":11,"index":3304,"kind":"idref"}],"code":"[{ id: 6, fields: [{ field: \"Control\", name: \"Control\", value: $theFeature.feature.attributes.Control }] },\n    { id: 11, fields: [{ field: \"Curb\", name: \"Curb\", value: $theFeature.feature.attributes.Curb }] },\n    { id: 24, fields: [{ field: \"Jurisdictn\", name: \"Jurisdictn\", value: $theFeature.feature.attributes.Jurisdictn }] },\n    { id: 58, fields: [{ field: \"Struct_Cnd\", name: \"Struct_Cnd\", value: $theFeature.feature.attributes.Struct_Cnd }] },\n    { id: 33, fields: [{ field: \"Num_Lanes\", name: \"Num_Lanes\", value: $theFeature.feature.attributes.Num_Lanes }, { field: \"Opp_Lanes\", name: \"Opp_Lanes\", value: $theFeature.feature.attributes.Opp_Lanes }] },\n    { id: 39, fields: [{ field: \"Left_Cond\", name: \"Left_Cond\", value: $theFeature.feature.attributes.Left_Cond },\n            { field: \"Lt_Sidewlk\", name: \"Lt_Sidewlk\", value: $theFeature.feature.attributes.Lt_Sidewlk },\n            { field: \"Rt_Sidewlk\", name: \"Rt_Sidewlk\", value: $theFeature.feature.attributes.Rt_Sidewlk },\n            { field: \"Path_Width\", name: \"Path_Width\", value: $theFeature.feature.attributes.Path_Width },\n            { field: \"Pd_Fc_Type\", name: \"Pd_Fc_Type\", value: $theFeature.feature.attributes.Pd_Fc_Type },\n            { field: \"Pd_Sf_Type\", name: \"Pd_Sf_Type\", value: $theFeature.feature.attributes.Pd_Sf_Type },\n            { field: \"Right_Cond\", name: \"Right_Cond\", value: $theFeature.feature.attributes.Right_Cond },\n        ] },\n    { id: 42, fields: [{ field: \"ROW_Width\", name: \"ROW_Width\", value: $theFeature.feature.attributes.ROW_Width }] },\n    { id: 46, fields: [{ field: \"Shldr_Lt_T\", name: \"Shldr_Lt_T\", value: $theFeature.feature.attributes.Shldr_Lt_T },\n            { field: \"Shldr_Lt_W\", name: \"Shldr_Lt_W\", value: $theFeature.feature.attributes.Shldr_Lt_W }] },\n    { id: 47, fields: [{ field: \"Shldr_Rt_W\", name: \"Shldr_Rt_W\", value: $theFeature.feature.attributes.Shldr_Rt_W },\n            { field: \"Shldr_Rt_T\", name: \"Shldr_Rt_T\", value: $theFeature.feature.attributes.Shldr_Rt_T }] },\n    { id: 50, fields: [{ field: \"Speed_Lim\", name: \"Speed_Lim\", value: $theFeature.feature.attributes.Speed_Lim }] },\n    { id: 55, fields: [{ field: \"St_Name\", name: \"St_Name\", value: $theFeature.feature.attributes.St_Name }, { field: \"Fm_St_Name\", name: \"Fm_St_Name\", value: $theFeature.feature.attributes.Fm_St_Name }, { field: \"To_St_Name\", name: \"To_St_Name\", value: $theFeature.feature.attributes.To_St_Name }] },\n    { id: 57, fields: [{ field: \"Operation\", name: \"Operation\", value: $theFeature.feature.attributes.Operation }] },\n    { id: 60, fields: [{ field: \"Surface_Wd\", name: \"Surface_Wd\", value: $theFeature.feature.attributes.Surface_Wd },\n            { field: \"Surface_Tp\", name: \"Surface_Tp\", value: $theFeature.feature.attributes.Surface_Tp }] },\n    { id: 61, fields: [{ field: \"Terrain\", name: \"Terrain\", value: $theFeature.feature.attributes.Terrain }] },\n    { id: 14, fields: [{ field: \"Facility\", name: \"Facility\", value: $theFeature.feature.attributes.Facility }, { field: \"Mile_Count\", name: \"Mile_Count\", value: $theFeature.feature.attributes.Mile_Count }] },\n    { id: 64, fields: [{ field: \"City\", name: \"City\", value: $theFeature.feature.attributes.City }] },\n    { id: 17, fields: [{ field: \"F_Class\", name: \"F_Class\", value: $theFeature.feature.attributes.F_Class }, { field: \"F_F_Class\", name: \"F_F_Class\", value: $theFeature.feature.attributes.F_F_Class }] },\n    { id: 31, fields: [{ field: \"NHS\", name: \"NHS\", value: $theFeature.feature.attributes.NHS }] },\n    { id: 44, fields: [{ field: \"Priority\", name: \"Priority\", value: $theFeature.feature.attributes.Priority }] }]","source":"[{id: 6, fields: [{field: \"Control\", name: \"Control\", value: $theFeature.feature.attributes.Control}]},\n{id: 11,  fields: [{field: \"Curb\", name: \"Curb\", value: $theFeature.feature.attributes.Curb}]},\n{id: 24,  fields: [{field: \"Jurisdictn\", name: \"Jurisdictn\", value: $theFeature.feature.attributes.Jurisdictn}]},\n{id: 58,  fields: [{field: \"Struct_Cnd\", name: \"Struct_Cnd\", value: $theFeature.feature.attributes.Struct_Cnd}]},\n{id: 33,  fields: [{field: \"Num_Lanes\", name: \"Num_Lanes\", value: $theFeature.feature.attributes.Num_Lanes}, {field: \"Opp_Lanes\", name: \"Opp_Lanes\", value: $theFeature.feature.attributes.Opp_Lanes}]}, \n{id: 39,  fields: [{field: \"Left_Cond\", name: \"Left_Cond\", value: $theFeature.feature.attributes.Left_Cond},\n{field: \"Lt_Sidewlk\", name: \"Lt_Sidewlk\", value: $theFeature.feature.attributes.Lt_Sidewlk},\n{field: \"Rt_Sidewlk\", name: \"Rt_Sidewlk\", value: $theFeature.feature.attributes.Rt_Sidewlk},\n{field: \"Path_Width\", name: \"Path_Width\", value: $theFeature.feature.attributes.Path_Width},\n{field: \"Pd_Fc_Type\", name: \"Pd_Fc_Type\", value: $theFeature.feature.attributes.Pd_Fc_Type},\n{field: \"Pd_Sf_Type\", name: \"Pd_Sf_Type\", value: $theFeature.feature.attributes.Pd_Sf_Type},\n{field: \"Right_Cond\", name: \"Right_Cond\", value: $theFeature.feature.attributes.Right_Cond},\n]},\n{id: 42,  fields: [{field: \"ROW_Width\", name: \"ROW_Width\", value: $theFeature.feature.attributes.ROW_Width}]}, \n{id: 46,  fields: [{field: \"Shldr_Lt_T\", name: \"Shldr_Lt_T\", value: $theFeature.feature.attributes.Shldr_Lt_T},\n{field: \"Shldr_Lt_W\", name: \"Shldr_Lt_W\", value: $theFeature.feature.attributes.Shldr_Lt_W}]}, \n{id: 47,  fields: [{field: \"Shldr_Rt_W\", name: \"Shldr_Rt_W\", value: $theFeature.feature.attributes.Shldr_Rt_W},\n{field: \"Shldr_Rt_T\", name: \"Shldr_Rt_T\", value: $theFeature.feature.attributes.Shldr_Rt_T}]}, \n{id: 50,  fields: [{field: \"Speed_Lim\", name: \"Speed_Lim\", value: $theFeature.feature.attributes.Speed_Lim}]},\n{id: 55,  fields: [{field: \"St_Name\", name: \"St_Name\", value: $theFeature.feature.attributes.St_Name}, {field: \"Fm_St_Name\", name: \"Fm_St_Name\", value: $theFeature.feature.attributes.Fm_St_Name}, {field: \"To_St_Name\", name: \"To_St_Name\", value: $theFeature.feature.attributes.To_St_Name}]}, \n{id: 57,  fields: [{field: \"Operation\", name: \"Operation\", value: $theFeature.feature.attributes.Operation}]},\n{id: 60,  fields: [{field: \"Surface_Wd\", name: \"Surface_Wd\", value: $theFeature.feature.attributes.Surface_Wd},\n{field: \"Surface_Tp\", name: \"Surface_Tp\", value: $theFeature.feature.attributes.Surface_Tp}]},\n{id: 61,  fields: [{field: \"Terrain\", name: \"Terrain\", value: $theFeature.feature.attributes.Terrain}]},\n{id: 14,  fields: [{field: \"Facility\", name: \"Facility\", value: $theFeature.feature.attributes.Facility}, {field: \"Mile_Count\", name: \"Mile_Count\", value: $theFeature.feature.attributes.Mile_Count}]},\n{id: 64,  fields: [{field: \"City\", name: \"City\", value: $theFeature.feature.attributes.City}]},\n{id: 17,  fields: [{field: \"F_Class\", name: \"F_Class\", value: $theFeature.feature.attributes.F_Class}, {field: \"F_F_Class\", name: \"F_F_Class\", value: $theFeature.feature.attributes.F_F_Class}]},\n{id: 31,  fields: [{field: \"NHS\", name: \"NHS\", value: $theFeature.feature.attributes.NHS}]},\n{id: 44,  fields: [{field: \"Priority\", name: \"Priority\", value: $theFeature.feature.attributes.Priority}]}]"}},"name":"eventLayers","position":"-280,660","title":"The Events","transitions":[{"id":2878,"inputs":{},"position":"-160,830 -160,890","sourceConnector":"bottom","target":{"id":2862},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","description":"If submission is an update","id":2862,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Update_Type == 'ROAD UPDATE'","source":"$theFeature.feature.attributes.Update_Type == 'ROAD UPDATE'"}},"position":"-280,890","title":"If","transitions":[{"branch":"true","id":1754,"inputs":{},"position":"-280,935 -440,935 -440,1050","sourceConnector":"left","target":{"id":2904},"targetConnector":"top"},{"branch":"false","id":2030,"inputs":{},"position":"-40,935 100,935 100,1060","sourceConnector":"right","target":{"id":1995},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Loop through each LRS event layer to determine if new events need to be added/updated depending on if the attribute values are different","id":2904,"inputs":{"items":{"accessors":["$eventLayers"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$eventLayers.result","source":"$eventLayers.result"}},"name":"forEachLRSELayer","position":"-560,1050","title":"For Each","transitions":[{"id":3541,"inputs":{},"position":"-440,1280 -440,1430 -180,1430 -180,1450","sourceConnector":"bottom","target":{"id":2116},"targetConnector":"top"}]}]},{"id":414,"steps":[{"id":417,"inputs":{},"position":"-250,400","purpose":"start","title":"Container","transitions":[{"id":1944,"inputs":{},"position":"-160,460 -160,530","sourceConnector":"bottom","target":{"id":634},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":632,"inputs":{},"name":"tryReject","position":"-280,690","title":"Try Catch"},{"action":"gcx:wf:arcgis::CreateGraphic","id":634,"inputs":{"attributes":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":13,"kind":"idref"}],"code":"{ \"OBJECTID\": $theFeature.feature.attributes.OBJECTID,\n    \"Status\": 2 }","source":"{\"OBJECTID\": $theFeature.feature.attributes.OBJECTID,\n\"Status\": 2}"}},"name":"rejectFeature","position":"-280,530","title":"Create Feature","transitions":[{"id":1943,"inputs":{},"position":"-160,600 -160,690","sourceConnector":"bottom","target":{"id":632},"targetConnector":"top"}]}]},{"id":616,"steps":[{"id":618,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":622,"inputs":{},"position":"90,60 90,130","target":{"id":620}}]},{"action":"gcx:wf:ui::Alert","id":620,"inputs":{"text":"Update failed. Please contact your system administrator."},"position":"-30,130","title":"Alert"}]},{"id":624,"steps":[{"id":626,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":630,"inputs":{},"position":"90,60 90,140","sourceConnector":"bottom","target":{"id":628},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::UpdateFeatures","id":628,"inputs":{"features":{"accessors":["$rejectFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$rejectFeature.feature","source":"$rejectFeature.feature"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"updateWithReject","position":"-30,140","title":"Update Features"}]},{"id":884,"steps":[{"id":886,"inputs":{},"position":"0,50","purpose":"start","title":"For Each","transitions":[{"id":892,"inputs":{},"position":"90,110 90,210","sourceConnector":"bottom","target":{"id":888},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":888,"inputs":{"expression":false},"name":"loopExit1","position":"-30,210","title":"Create Value","transitions":[{"id":894,"inputs":{},"position":"90,280 90,340","sourceConnector":"bottom","target":{"id":890},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":890,"inputs":{"exit":{"accessors":["$loopExit1"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$loopExit1.result","source":"$loopExit1.result"},"items":{"accessors":["$formItemsCity"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$formItemsCity.items","source":"$formItemsCity.items"}},"name":"forCityDomainLoop1","position":"-30,340","title":"For Each"}]},{"id":896,"steps":[{"id":898,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":906,"inputs":{},"position":"90,60 90,140","sourceConnector":"bottom","target":{"id":900},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":900,"inputs":{"condition":{"accessors":["$forCityDomainLoop1","$getTownLabels1"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":15,"index":34,"kind":"idref"}],"code":"$forCityDomainLoop1.item.value == $getTownLabels1.item.attributes.City","source":"$forCityDomainLoop1.item.value == $getTownLabels1.item.attributes.City"}},"position":"30,140","title":"If","transitions":[{"branch":"true","id":910,"inputs":{},"position":"30,170 -50,170 -50,330","sourceConnector":"left","target":{"id":902},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":902,"inputs":{"attributeName":"label","attributeValue":{"accessors":["$forCityDomainLoop1"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$forCityDomainLoop1.item.label","source":"$forCityDomainLoop1.item.label"},"feature":{"accessors":["$getTownLabels1"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$getTownLabels1.item","source":"$getTownLabels1.item"}},"position":"-170,330","title":"Set Feature Attribute","transitions":[{"id":908,"inputs":{},"position":"-50,360 -50,390","sourceConnector":"bottom","target":{"id":904},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":904,"inputs":{"object":{"accessors":["$loopExit1"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$loopExit1","source":"$loopExit1"},"propertyName":"result","propertyValue":true},"position":"-170,390","title":"Set Property"}]},{"id":969,"steps":[{"id":970,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":986,"inputs":{},"position":"90,60 90,150","target":{"id":983}}]},{"action":"gcx:wf:core::If","id":983,"inputs":{"condition":{"accessors":["$theFeature","$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":11,"index":53,"kind":"idref"}],"code":"$theFeature.feature.attributes.Fm_St_Name != null || $theFeature.feature.attributes.Fm_St_Name != undefined","source":"$theFeature.feature.attributes.Fm_St_Name != null || $theFeature.feature.attributes.Fm_St_Name != undefined "}},"position":"30,150","title":"If","transitions":[{"branch":"true","id":992,"inputs":{},"position":"30,180 10,180 10,280","sourceConnector":"left","target":{"id":990},"targetConnector":"top"},{"branch":"false","id":1008,"inputs":{},"position":"150,180 170,180 170,370 70,370 70,390","sourceConnector":"right","target":{"id":1001},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":990,"inputs":{"attributeName":"Fm_St_Name","attributeValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Fm_St_Name","source":"$theFeature.feature.attributes.Fm_St_Name"},"feature":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature","source":"$St_Name_Event.feature"}},"position":"-110,280","title":"Set Feature Attribute","transitions":[{"id":1007,"inputs":{},"position":"10,310 10,370 70,370 70,390","sourceConnector":"bottom","target":{"id":1001},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":999,"inputs":{"attributeName":"To_St_Name","attributeValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.To_St_Name","source":"$theFeature.feature.attributes.To_St_Name"},"feature":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature","source":"$St_Name_Event.feature"}},"position":"-130,520","title":"Set Feature Attribute"},{"action":"gcx:wf:core::If","id":1001,"inputs":{"condition":{"accessors":["$theFeature","$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":11,"index":53,"kind":"idref"}],"code":"$theFeature.feature.attributes.To_St_Name != null || $theFeature.feature.attributes.To_St_Name != undefined","source":"$theFeature.feature.attributes.To_St_Name != null || $theFeature.feature.attributes.To_St_Name != undefined "}},"position":"10,390","title":"If","transitions":[{"branch":"true","id":1006,"inputs":{},"position":"10,420 -10,420 -10,520","sourceConnector":"left","target":{"id":999},"targetConnector":"top"}]}]},{"id":1070,"steps":[{"id":1071,"inputs":{},"position":"90,40","purpose":"start","title":"Container","transitions":[{"id":1080,"inputs":{},"position":"180,100 180,140 200,140 200,160","sourceConnector":"bottom","target":{"id":1075},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":1075,"inputs":{"field":"Jurisdictn","url":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/LRSEvents/FeatureServer/24"},"name":"getDomainJur","position":"80,160","title":"Get Coded Value Domain","transitions":[{"id":1079,"inputs":{},"position":"200,230 200,270","target":{"id":1077}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":1077,"inputs":{"collection":{"accessors":["$getDomainJur"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getDomainJur.domain.codedValues","source":"$getDomainJur.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"formItemsJur","position":"80,270","title":"Get Form Element Items From Collection","transitions":[{"id":1089,"inputs":{},"position":"200,340 200,420 340,420 340,440","sourceConnector":"bottom","target":{"id":1084},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":1084,"inputs":{"field":"City","url":"https://gis.massdot.state.ma.us/rh/rest/services/RoadInventory/RoadUpdateSubmissions/FeatureServer/1"},"name":"getDomainCity","position":"220,440","title":"Get Coded Value Domain","transitions":[{"id":1088,"inputs":{},"position":"340,510 340,580","sourceConnector":"bottom","target":{"id":1086},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":1086,"inputs":{"collection":{"accessors":["$getDomainCity"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$getDomainCity.domain.codedValues","source":"$getDomainCity.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"formItemsCity","position":"220,580","title":"Get Form Element Items From Collection","transitions":[{"id":1100,"inputs":{},"position":"340,650 340,700 410,700 410,720","sourceConnector":"bottom","target":{"id":1095},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":1095,"inputs":{"field":"Facility","url":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/LRSEvents/FeatureServer/14"},"name":"getFacilityDomain","position":"290,720","title":"Get Coded Value Domain","transitions":[{"id":1099,"inputs":{},"position":"410,790 410,830","target":{"id":1097}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":1097,"inputs":{"collection":{"accessors":["$getFacilityDomain"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$getFacilityDomain.domain.codedValues","source":"$getFacilityDomain.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"formFacilityItems","position":"290,830","title":"Get Form Element Items From Collection","transitions":[{"id":1109,"inputs":{},"position":"410,900 410,980 420,980 420,1000","sourceConnector":"bottom","target":{"id":1104},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":1104,"inputs":{"field":"F_Class","url":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/LRSEvents/FeatureServer/17"},"name":"getDomainFClass","position":"300,1000","title":"Get Coded Value Domain","transitions":[{"id":1108,"inputs":{},"position":"420,1070 420,1110","target":{"id":1106}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":1106,"inputs":{"collection":{"accessors":["$getDomainFClass"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$getDomainFClass.domain.codedValues","source":"$getDomainFClass.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"formItemsFClass","position":"300,1110","title":"Get Form Element Items From Collection","transitions":[{"id":1118,"inputs":{},"position":"420,1180 420,1240 460,1240 460,1260","sourceConnector":"bottom","target":{"id":1113},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":1113,"inputs":{"field":"NHS","url":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/LRSEvents/FeatureServer/31"},"name":"getDomainNHS","position":"340,1260","title":"Get Coded Value Domain","transitions":[{"id":1117,"inputs":{},"position":"460,1330 460,1370","target":{"id":1115}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":1115,"inputs":{"collection":{"accessors":["$getDomainNHS"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getDomainNHS.domain.codedValues","source":"$getDomainNHS.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"formItemsNHS","position":"340,1370","title":"Get Form Element Items From Collection"}]},{"id":1137,"steps":[{"id":1138,"inputs":{},"position":"0,50","purpose":"start","title":"For Each","transitions":[{"id":1186,"inputs":{},"position":"90,110 90,210","sourceConnector":"bottom","target":{"id":1167},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":1160,"inputs":{"exit":{"accessors":["$loopExit"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$loopExit.result","source":"$loopExit.result"},"items":{"accessors":["$formItemsCity"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$formItemsCity.items","source":"$formItemsCity.items"}},"name":"forCityDomainLoop","position":"-30,340","title":"For Each"},{"action":"gcx:wf:core::CreateValue","id":1167,"inputs":{"expression":false},"name":"loopExit","position":"-30,210","title":"Create Value","transitions":[{"id":1168,"inputs":{},"position":"90,280 90,340","sourceConnector":"bottom","target":{"id":1160},"targetConnector":"top"}]}]},{"id":1161,"steps":[{"id":1162,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1173,"inputs":{},"position":"90,60 90,120 100,120 100,140","sourceConnector":"bottom","target":{"id":1172},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1171,"inputs":{"attributeName":"label","attributeValue":{"accessors":["$forCityDomainLoop"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$forCityDomainLoop.item.label","source":"$forCityDomainLoop.item.label"},"feature":{"accessors":["$getTownLabels"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$getTownLabels.item","source":"$getTownLabels.item"}},"position":"-170,330","title":"Set Feature Attribute","transitions":[{"id":1176,"inputs":{},"position":"-50,360 -50,390","sourceConnector":"bottom","target":{"id":1175},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1172,"inputs":{"condition":{"accessors":["$forCityDomainLoop","$getTownLabels"],"annotations":[{"count":18,"index":0,"kind":"idref"},{"count":14,"index":33,"kind":"idref"}],"code":"$forCityDomainLoop.item.value == $getTownLabels.item.attributes.City","source":"$forCityDomainLoop.item.value == $getTownLabels.item.attributes.City"}},"position":"40,140","title":"If","transitions":[{"branch":"true","id":1185,"inputs":{},"position":"40,170 -50,170 -50,330","sourceConnector":"left","target":{"id":1171},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1175,"inputs":{"object":{"accessors":["$loopExit"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$loopExit","source":"$loopExit"},"propertyName":"result","propertyValue":true},"position":"-170,390","title":"Set Property"}]},{"id":1429,"steps":[{"id":1431,"inputs":{},"position":"0,-40","purpose":"start","title":"Event","transitions":[{"id":1714,"inputs":{},"position":"90,20 90,230","sourceConnector":"bottom","target":{"id":1467},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":1467,"inputs":{"items":{"accessors":["$fieldsList"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$fieldsList.result","source":"$fieldsList.result"}},"name":"createAttributeElements","position":"-30,230","title":"For Each","transitions":[{"id":3520,"inputs":{},"position":"90,350 90,490","sourceConnector":"bottom","target":{"id":5748},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1920,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.formHeader","source":"$form.state.formHeader\n"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"title","propertyValue":{"accessors":["$theFeature","$theFeature"],"annotations":[{"count":11,"index":7,"kind":"idref"},{"count":11,"index":57,"kind":"idref"}],"code":"\"# \" + $theFeature.feature.attributes.Route_ID + \" - \" + $theFeature.feature.attributes.Update_Type","source":"\"# \" + $theFeature.feature.attributes.Route_ID + \" - \" + $theFeature.feature.attributes.Update_Type"}},"position":"-30,1170","title":"Set Form Element Property","transitions":[{"id":2008,"inputs":{},"position":"90,1200 90,1290","sourceConnector":"bottom","target":{"id":2007},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2007,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Update_Type == \"NEW ROAD\"","source":"$theFeature.feature.attributes.Update_Type == \"NEW ROAD\""}},"position":"30,1290","title":"If","transitions":[{"branch":"true","id":2015,"inputs":{},"position":"30,1320 -110,1320 -110,1440","sourceConnector":"left","target":{"id":2012},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":2012,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.saveUpdate","source":"$form.state.saveUpdate"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":false},"position":"-230,1440","title":"Set Form Element Property","transitions":[{"id":2028,"inputs":{},"position":"-110,1470 -110,1530","sourceConnector":"bottom","target":{"id":2021},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":2021,"inputs":{},"name":"tryFindRoute","position":"-230,1530","title":"Try Catch"},{"action":"gcx:wf:core::TryCatch","id":5748,"inputs":{},"name":"tryEmailandDocuments","position":"-30,490","title":"Try Catch","transitions":[{"id":5768,"inputs":{},"position":"90,610 90,720","sourceConnector":"bottom","target":{"id":5752},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":5752,"inputs":{},"name":"tryReviewerComments","position":"-30,720","title":"Try Catch","transitions":[{"id":5770,"inputs":{},"position":"90,840 90,900","sourceConnector":"bottom","target":{"id":5814},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5812,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.attributes","source":"$form.state.attributes\n"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":true},"position":"-30,1080","title":"Set Form Element Property","transitions":[{"id":1921,"inputs":{},"position":"90,1110 90,1170","sourceConnector":"bottom","target":{"id":1920},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":5814,"inputs":{"items":{"accessors":["$fieldsList"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$fieldsList.result","source":"$fieldsList.result"}},"name":"populateAttributes","position":"-30,900","title":"For Each","transitions":[{"id":5818,"inputs":{},"position":"90,1020 90,1080","sourceConnector":"bottom","target":{"id":5812},"targetConnector":"top"}]}],"title":"load-header"},{"id":1439,"steps":[{"action":"gcx:wf:forms::AddFormElement","id":1445,"inputs":{"element":{"accessors":["$createAttributeElements","$createAttributeElements"],"annotations":[{"count":24,"index":10,"kind":"idref"},{"count":24,"index":112,"kind":"idref"}],"code":"{ 'title': $createAttributeElements.item['field'], 'visible': false, 'section': { 'name': 'attributes' }, 'title': $createAttributeElements.item['field'] }","source":"{'title': $createAttributeElements.item['field'], 'visible': false, 'section': {'name': 'attributes'}, 'title': $createAttributeElements.item['field']}"},"elementName":{"accessors":["$createAttributeElements"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$createAttributeElements.item['field']","source":"$createAttributeElements.item['field']"},"elementType":"Text","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-370,1190","title":"Add Form Element"},{"id":1449,"inputs":{},"position":"0,810","purpose":"start","title":"For Each","transitions":[{"id":1736,"inputs":{},"position":"90,870 90,930","sourceConnector":"bottom","target":{"id":1731},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1731,"inputs":{"condition":{"accessors":["$createAttributeElements"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$createAttributeElements.item['type'] == \"attribute\"","source":"$createAttributeElements.item['type'] == \"attribute\""}},"position":"30,930","title":"If","transitions":[{"branch":"true","id":1732,"inputs":{},"position":"30,960 -80,960 -80,1010","sourceConnector":"left","target":{"id":2293},"targetConnector":"top"}]},{"action":"gcx:wf:forms::AddFormElement","id":2259,"inputs":{"element":{"accessors":["$createAttributeElements"],"annotations":[{"count":24,"index":10,"kind":"idref"}],"code":"{ 'title': $createAttributeElements.item['name'], 'visible': false, 'section': { 'name': 'attributes' } }","source":"{'title': $createAttributeElements.item['name'], 'visible': false, 'section': {'name': 'attributes'}}"},"elementName":{"accessors":["$createAttributeElements"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$createAttributeElements.item['field']","source":"$createAttributeElements.item['field']"},"elementType":{"accessors":["$createAttributeElements"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$createAttributeElements.item['formType']","source":"$createAttributeElements.item['formType']"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-30,1190","title":"Add Form Element","transitions":[{"id":2375,"inputs":{},"position":"90,1220 90,1280","sourceConnector":"bottom","target":{"id":2482},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2293,"inputs":{"condition":{"accessors":["$createAttributeElements"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$createAttributeElements.item['formType']","source":"$createAttributeElements.item['formType']"}},"position":"-140,1010","title":"If","transitions":[{"branch":"true","id":2297,"inputs":{},"position":"-140,1040 -250,1040 -250,1190","sourceConnector":"left","target":{"id":1445},"targetConnector":"top"},{"branch":"false","id":2303,"inputs":{},"position":"-20,1040 90,1040 90,1190","sourceConnector":"right","target":{"id":2259},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2369,"inputs":{"field":{"accessors":["$createAttributeElements"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$createAttributeElements.item['field']","source":"$createAttributeElements.item['field']"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"getFieldDomain","position":"-260,1440","title":"Get Coded Value Domain","transitions":[{"id":2343,"inputs":{},"position":"-140,1510 -140,1650","sourceConnector":"bottom","target":{"id":2387},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2387,"inputs":{"collection":{"accessors":["$getFieldDomain"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$getFieldDomain.domain.codedValues","source":"$getFieldDomain.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"domainItemCollection","position":"-260,1650","title":"Get Form Element Items From Collection","transitions":[{"id":2397,"inputs":{},"position":"-140,1720 -140,1780","sourceConnector":"bottom","target":{"id":2395},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":2395,"inputs":{"elementName":{"accessors":["$createAttributeElements"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$createAttributeElements.item['field']","source":"$createAttributeElements.item['field']"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$domainItemCollection"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$domainItemCollection.items","source":"$domainItemCollection.items"}},"position":"-260,1780","title":"Set Form Element Items"},{"action":"gcx:wf:core::If","id":2482,"inputs":{"condition":{"accessors":["$createAttributeElements"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$createAttributeElements.item['formType'] === \"DropDownList\"","source":"$createAttributeElements.item['formType'] === \"DropDownList\""}},"position":"30,1280","title":"If","transitions":[{"branch":"true","id":2483,"inputs":{},"position":"30,1310 -140,1310 -140,1440","sourceConnector":"left","target":{"id":2369},"targetConnector":"top"}]}]},{"id":1464,"steps":[{"action":"gcx:wf:core::If","id":875,"inputs":{"condition":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.F_Class.value === 0","source":"$form.state.F_Class.value === 0"}},"position":"-40,780","title":"If","transitions":[{"branch":"true","id":879,"inputs":{},"position":"-40,810 -100,810 -100,860","sourceConnector":"left","target":{"id":878},"targetConnector":"top"},{"branch":"false","id":881,"inputs":{},"position":"80,810 220,810 220,930","sourceConnector":"right","target":{"id":1949},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":878,"inputs":{"attributeName":"F_F_Class","attributeValue":7,"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-220,860","title":"Set Feature Attribute","transitions":[{"id":880,"inputs":{},"position":"-100,890 -100,910 220,910 220,930","sourceConnector":"bottom","target":{"id":1949},"targetConnector":"top"}]},{"id":1465,"inputs":{},"position":"310,-190","purpose":"start","title":"Container","transitions":[{"id":1489,"inputs":{},"position":"400,-130 400,40","sourceConnector":"bottom","target":{"id":1483},"targetConnector":"top"}]},{"action":"gcx:wf:core::ParseNumber","id":1471,"inputs":{"value":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Mile_Count.value","source":"$form.state.Mile_Count.value"}},"name":"mcNumber","position":"60,130","title":"Parse Number","transitions":[{"id":1479,"inputs":{},"position":"180,200 180,240","sourceConnector":"bottom","target":{"id":1473},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1473,"inputs":{"attributeName":"Mile_Count","attributeValue":{"accessors":["$mcNumber"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$mcNumber.result","source":"$mcNumber.result"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"60,240","title":"Set Feature Attribute","transitions":[{"id":1481,"inputs":{},"position":"180,270 180,330","sourceConnector":"bottom","target":{"id":1476},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1476,"inputs":{"attributeName":"Facility","attributeValue":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Facility.value","source":"$form.state.Facility.value"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"60,330","title":"Set Feature Attribute","transitions":[{"id":1840,"inputs":{},"position":"180,360 180,410","sourceConnector":"bottom","target":{"id":1839},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1483,"inputs":{"condition":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Mile_Count.value !== undefined","source":"$form.state.Mile_Count.value !== undefined"}},"position":"340,40","title":"If","transitions":[{"branch":"true","id":1485,"inputs":{},"position":"340,70 180,70 180,130","sourceConnector":"left","target":{"id":1471},"targetConnector":"top"},{"branch":"false","id":1486,"inputs":{},"position":"460,70 480,70 480,310 180,310 180,330","sourceConnector":"right","target":{"id":1476},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1839,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Num_Lanes > 0","source":"$theFeature.feature.attributes.Num_Lanes > 0"}},"position":"120,410","title":"If","transitions":[{"branch":"true","id":1844,"inputs":{},"position":"120,440 40,440 40,540","sourceConnector":"left","target":{"id":1843},"targetConnector":"top"},{"branch":"false","id":1924,"inputs":{},"position":"240,440 260,440 260,630 230,630 230,650","sourceConnector":"right","target":{"id":1907},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1843,"inputs":{"attributeName":"Opp_Lanes","attributeValue":0,"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-80,540","title":"Set Feature Attribute","transitions":[{"id":1918,"inputs":{},"position":"40,570 40,630 230,630 230,650","sourceConnector":"bottom","target":{"id":1907},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1907,"inputs":{"condition":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.F_Class.value !== undefined","source":"$form.state.F_Class.value !== undefined"}},"position":"170,650","title":"If","transitions":[{"branch":"true","id":1928,"inputs":{},"position":"170,680 20,680 20,720","sourceConnector":"left","target":{"id":1915},"targetConnector":"top"},{"branch":"false","id":1958,"inputs":{},"position":"290,680 310,680 310,910 220,910 220,930","sourceConnector":"right","target":{"id":1949},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1915,"inputs":{"attributeName":"F_Class","attributeValue":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.F_Class.value","source":"$form.state.F_Class.value"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-100,720","title":"Set Feature Attribute","transitions":[{"id":1956,"inputs":{},"position":"20,750 20,780","sourceConnector":"bottom","target":{"id":875},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1942,"inputs":{"attributeName":"NHS","attributeValue":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.NHS.value","source":"$form.state.NHS.value"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-110,1080","title":"Set Feature Attribute","transitions":[{"id":1988,"inputs":{},"position":"10,1110 10,1170 220,1170 220,1190","sourceConnector":"bottom","target":{"id":1973},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1949,"inputs":{"condition":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.NHS.value !== undefined","source":"$form.state.NHS.value !== undefined"}},"position":"160,930","title":"If","transitions":[{"branch":"true","id":1953,"inputs":{},"position":"160,960 10,960 10,1080","sourceConnector":"left","target":{"id":1942},"targetConnector":"top"},{"branch":"false","id":1990,"inputs":{},"position":"280,960 300,960 300,1170 220,1170 220,1190","sourceConnector":"right","target":{"id":1973},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1965,"inputs":{"attributeName":"Priority","attributeValue":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Priority.value.numeric","source":"$form.state.Priority.value.numeric"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-120,1390","title":"Set Feature Attribute"},{"action":"gcx:wf:core::If","id":1973,"inputs":{"condition":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Priority.value !== undefined","source":"$form.state.Priority.value !== undefined"}},"position":"160,1190","title":"If","transitions":[{"branch":"true","id":1981,"inputs":{},"position":"160,1220 0,1220 0,1390","sourceConnector":"left","target":{"id":1965},"targetConnector":"top"}]}]},{"id":1490,"steps":[{"id":1491,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1741,"inputs":{},"position":"90,60 90,170","sourceConnector":"bottom","target":{"id":1493},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1493,"inputs":{"condition":{"accessors":["$filterValues"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$filterValues.result.filterSubmissions !== null","source":"$filterValues.result.filterSubmissions !== null"}},"position":"30,170","title":"If","transitions":[{"branch":"true","id":1508,"inputs":{},"position":"30,200 -100,200 -100,340","sourceConnector":"left","target":{"id":1505},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":1505,"inputs":{"elementName":{"accessors":["$filters"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$filters.state.filterSubmissions","source":"$filters.state.filterSubmissions"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":{"accessors":["$filterValues"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$filterValues.result.filterSubmissions","source":"$filterValues.result.filterSubmissions"}},"name":"setStatus","position":"-220,340","title":"Set Current Form Element Item","transitions":[{"id":1538,"inputs":{},"position":"-100,410 -100,470","sourceConnector":"bottom","target":{"id":1537},"targetConnector":"top"}]},{"action":"gcx:wf:forms::PropagateFormEvent","id":1537,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-220,470","title":"Propagate Form Event"}],"title":"load-filterSubmissions"},{"id":1504,"steps":[{"id":1506,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1647,"inputs":{},"position":"90,60 90,170","sourceConnector":"bottom","target":{"id":1531},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1531,"inputs":{"condition":{"accessors":["$forEachLayerField","$forEachLayerField"],"annotations":[{"count":18,"index":0,"kind":"idref"},{"count":18,"index":42,"kind":"idref"}],"code":"$forEachLayerField.item.value !== null && $forEachLayerField.item.value !== undefined","source":"$forEachLayerField.item.value !== null && $forEachLayerField.item.value !== undefined"}},"position":"30,170","title":"If","transitions":[{"branch":"true","id":2419,"inputs":{},"position":"30,200 -50,200 -50,370","sourceConnector":"left","target":{"id":1677},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1677,"inputs":{"object":{"accessors":["$newEvent"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$newEvent","source":"$newEvent"},"propertyName":"result","propertyValue":{"accessors":["$newEvent","$forEachLayerField"],"annotations":[{"count":9,"index":0,"kind":"idref"},{"count":18,"index":26,"kind":"idref"}],"code":"$newEvent.result + \", \" + $forEachLayerField.item.field","source":"$newEvent.result + \", \" + $forEachLayerField.item.field"}},"position":"-170,370","title":"Set Property"}]},{"id":1580,"steps":[{"id":1584,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1603,"inputs":{},"position":"90,60 90,140","sourceConnector":"bottom","target":{"id":1586},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Query for features.","id":1586,"inputs":{"orderByFields":"Route_ID","outFields":"*","outSpatialReference":102100,"returnGeometry":true,"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"},"where":{"accessors":["$filterValues","$filters"],"annotations":[{"count":13,"index":14,"kind":"idref"},{"count":8,"index":106,"kind":"idref"}],"code":"\"City = '\" + $filterValues.result.townId.data.attributes.City + \"' and Update_Type = 'NEW ROAD' and (\" + $filters.state.filterSubmissions.value + \")\"","source":"\"City = '\"  + $filterValues.result.townId.data.attributes.City + \"' and Update_Type = 'NEW ROAD' and (\" + $filters.state.filterSubmissions.value + \")\""}},"name":"findNewRoads2","position":"-30,140","title":"Query Updates","transitions":[{"id":1606,"inputs":{},"position":"90,240 90,300","target":{"id":1589}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the features into form element items to be used in the element.","id":1589,"inputs":{"features":{"accessors":["$findNewRoads2"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$findNewRoads2.features","source":"$findNewRoads2.features"},"labelFieldName":"{Route_ID} - {St_Name}"},"name":"newRoads2","position":"-30,300","title":"Get Form Element Items From Features","transitions":[{"id":1609,"inputs":{},"position":"90,430 90,500","target":{"id":1591}}]},{"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","id":1591,"inputs":{"elementName":"newRoads","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$newRoads2"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$newRoads2.items","source":"$newRoads2.items"},"reset":true},"position":"-30,500","title":"Set New Road Items","transitions":[{"id":1611,"inputs":{},"position":"90,590 90,640","sourceConnector":"bottom","target":{"id":1594},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1594,"inputs":{"condition":{"accessors":["$findNewRoads2"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$findNewRoads2.features.length > 0","source":"$findNewRoads2.features.length > 0"}},"position":"30,640","title":"If","transitions":[{"branch":"false","id":1613,"inputs":{},"position":"150,670 270,670 270,750","sourceConnector":"right","target":{"id":1596},"targetConnector":"top"},{"branch":"true","id":1616,"inputs":{},"position":"30,670 -100,670 -100,750","sourceConnector":"left","target":{"id":1599},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1596,"inputs":{"elementName":"newRoads","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":false},"position":"150,750","title":"Set Form Element Property"},{"action":"gcx:wf:forms::SetFormElementProperty","id":1599,"inputs":{"elementName":"newRoads","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":true},"position":"-220,750","title":"Set Form Element Property"}]},{"id":1581,"steps":[{"action":"gcx:wf:core::CreateValue","id":1067,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/LRSEvents/MapServer/exts/LRSServer/networkLayers/72/queryAttributeSet"},"name":"queryAttributeSet","position":"-30,1390","title":"Create Value","transitions":[{"id":1127,"inputs":{},"position":"90,1460 90,1550 190,1550 190,1570","sourceConnector":"bottom","target":{"id":1126},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1126,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/LRSEvents/MapServer/exts/LRSServer/applyEdits"},"name":"lrsApplyEdits","position":"70,1570","title":"Create Value"},{"id":1583,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1624,"inputs":{},"position":"90,60 90,190","sourceConnector":"bottom","target":{"id":1608},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1593,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/LRSEvents/MapServer/72"},"name":"routes","position":"-30,760","title":"Create Value","transitions":[{"id":1971,"inputs":{},"position":"90,830 90,910","sourceConnector":"bottom","target":{"id":1966},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1598,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/61"},"name":"street_names","position":"-30,650","title":"Create Value","transitions":[{"id":1615,"inputs":{},"position":"90,720 90,760","sourceConnector":"bottom","target":{"id":1593},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1600,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Boundaries/Towns/MapServer/0"},"name":"towns","position":"-30,520","title":"Create Value","transitions":[{"id":1617,"inputs":{},"position":"90,590 90,650","sourceConnector":"bottom","target":{"id":1598},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1602,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/RoadUpdateSubmissions/FeatureServer/2"},"name":"submissions","position":"-30,400","title":"Create Value","transitions":[{"id":1619,"inputs":{},"position":"90,470 90,520","sourceConnector":"bottom","target":{"id":1600},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1604,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/RoadUpdateSubmissions/FeatureServer/1"},"name":"edits","position":"-30,300","title":"Create Value","transitions":[{"id":1621,"inputs":{},"position":"90,370 90,400","sourceConnector":"bottom","target":{"id":1602},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1608,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/RoadUpdateSubmissions/FeatureServer/0"},"name":"redline","position":"-30,190","title":"Create Value","transitions":[{"id":1623,"inputs":{},"position":"90,260 90,300","sourceConnector":"bottom","target":{"id":1604},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1966,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/rh/rest/services/GeoprocessingServices/createEventUID/GPServer/Create%20Event%20ID"},"name":"eventGP","position":"-30,910","title":"Create Value","transitions":[{"id":1081,"inputs":{},"position":"90,980 90,1390","sourceConnector":"bottom","target":{"id":1067},"targetConnector":"top"}]}]},{"id":1622,"steps":[{"id":1631,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1652,"inputs":{},"position":"90,60 90,150","sourceConnector":"bottom","target":{"id":1634},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Query for features.","id":1634,"inputs":{"orderByFields":"Route_ID","outFields":"*","outSpatialReference":102100,"returnGeometry":true,"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"},"where":{"accessors":["$filterValues","$filters"],"annotations":[{"count":13,"index":13,"kind":"idref"},{"count":8,"index":108,"kind":"idref"}],"code":"\"City= '\" + $filterValues.result.townId.data.attributes.City + \"' and Update_Type = 'ROAD UPDATE' and (\" + $filters.state.filterSubmissions.value + \")\"","source":"\"City= '\"  + $filterValues.result.townId.data.attributes.City + \"' and Update_Type = 'ROAD UPDATE' and (\" + $filters.state.filterSubmissions.value + \")\""}},"name":"findUpdates2","position":"-30,150","title":"Query Updates","transitions":[{"id":1655,"inputs":{},"position":"90,250 90,300","target":{"id":1639}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the features into form element items to be used in the element.","id":1639,"inputs":{"features":{"accessors":["$findUpdates2"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$findUpdates2.features","source":"$findUpdates2.features"},"labelFieldName":"{Route_ID} - {St_Name}"},"name":"updates2","position":"-30,300","title":"Get Form Element Items From Features","transitions":[{"id":1657,"inputs":{},"position":"90,430 90,500","target":{"id":1641}}]},{"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","id":1641,"inputs":{"elementName":"updates","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$updates2"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$updates2.items","source":"$updates2.items"},"reset":true},"position":"-30,500","title":"Set Update Items","transitions":[{"id":1660,"inputs":{},"position":"90,590 90,660","sourceConnector":"bottom","target":{"id":1643},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1643,"inputs":{"condition":{"accessors":["$findUpdates2"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$findUpdates2.features.length > 0","source":"$findUpdates2.features.length > 0"}},"position":"30,660","title":"If","transitions":[{"branch":"true","id":1663,"inputs":{},"position":"30,690 -100,690 -100,810","sourceConnector":"left","target":{"id":1646},"targetConnector":"top"},{"branch":"false","id":1666,"inputs":{},"position":"150,690 240,690 240,810","sourceConnector":"right","target":{"id":1650},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1646,"inputs":{"elementName":"updates","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":true},"position":"-220,810","title":"Set Form Element Property"},{"action":"gcx:wf:forms::SetFormElementProperty","id":1650,"inputs":{"elementName":"updates","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":false},"position":"120,810","title":"Set Form Element Property"}]},{"id":1630,"steps":[{"action":"gcx:wf:arcgis::SetFeatureSymbol","id":1516,"inputs":{"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"},"symbol":{"accessors":["$selectedUpdateSymbol"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$selectedUpdateSymbol.symbol","source":"$selectedUpdateSymbol.symbol"}},"position":"-30,570","title":"Set Feature Symbol"},{"id":1632,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1662,"inputs":{},"position":"90,60 90,190","sourceConnector":"bottom","target":{"id":1648},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SymbolFromJson","id":1644,"inputs":{"json":{"accessors":[],"annotations":[],"code":"{\n    \"type\": \"esriSLS\",\n    \"style\": \"esriSLSSolid\",\n    \"color\": [0, 255, 255, 200],\n    \"width\": 15\n}","source":"{\n   \"type\": \"esriSLS\",\n   \"style\": \"esriSLSSolid\",\n   \"color\": [0,255,255,200],\n   \"width\": 15\n}"}},"name":"selectedNewRoadSymbol","position":"-30,330","title":"Get Symbol From JSON","transitions":[{"id":1664,"inputs":{},"position":"90,400 90,450","sourceConnector":"bottom","target":{"id":1654},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SymbolFromJson","id":1648,"inputs":{"json":{"accessors":[],"annotations":[],"code":"{\n    \"type\": \"esriSLS\",\n    \"style\": \"esriSLSSolid\",\n    \"color\": [232, 48, 183, 255],\n    \"width\": 15\n}","source":"{\n   \"type\": \"esriSLS\",\n   \"style\": \"esriSLSSolid\",\n   \"color\": [232, 48, 183, 255],\n   \"width\": 15\n}"}},"name":"selectedUpdateSymbol","position":"-30,190","title":"Get Symbol From JSON","transitions":[{"id":1658,"inputs":{},"position":"90,260 90,330","sourceConnector":"bottom","target":{"id":1644},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SymbolFromJson","id":1654,"inputs":{"json":{"accessors":[],"annotations":[],"code":"{\n    \"color\": [190, 255, 232, 20],\n    \"style\": \"esriSFSSolid\",\n    \"type\": \"esriSFS\",\n    \"outline\": {\n        \"color\": \"#73FFDF\",\n        \"width\": 5,\n        \"type\": \"esriSLS\",\n        \"style\": \"esriSLSSolid\"\n    }\n}","source":"{\n  \"color\": [190, 255, 232,20],\n  \"style\": \"esriSFSSolid\",\n  \"type\": \"esriSFS\",\n  \"outline\": {\n    \"color\": \"#73FFDF\",\n    \"width\": 5,\n    \"type\": \"esriSLS\",\n    \"style\": \"esriSLSSolid\"\n  }\n}"}},"name":"selectedTown","position":"-30,450","title":"Get Symbol From JSON","transitions":[{"id":2042,"inputs":{},"position":"90,520 90,570","sourceConnector":"bottom","target":{"id":1516},"targetConnector":"top"}]}]},{"id":1668,"steps":[{"id":1670,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1682,"inputs":{},"position":"90,60 90,180","sourceConnector":"bottom","target":{"id":1674},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1674,"inputs":{"elementName":{"accessors":["$forEachSelectorHide6"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$forEachSelectorHide6.item","source":"$forEachSelectorHide6.item"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"current"},"position":"-30,180","title":"Set Form Element Property"}]},{"id":1676,"steps":[{"id":1679,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1704,"inputs":{},"position":"90,60 90,150","sourceConnector":"bottom","target":{"id":1686},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":1686,"inputs":{},"name":"theFeature","position":"-30,150","title":"Create Feature","transitions":[{"id":1702,"inputs":{},"position":"90,220 90,260","sourceConnector":"bottom","target":{"id":1694},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":1694,"inputs":{},"name":"theSubmission","position":"-30,260","title":"Create Feature","transitions":[{"id":2351,"inputs":{},"position":"90,330 90,410","sourceConnector":"bottom","target":{"id":2349},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":1715,"inputs":{},"name":"oldFeature","position":"-30,690","title":"Create Feature"},{"action":"gcx:wf:arcgis::CreateGraphic","id":2349,"inputs":{},"name":"theTown","position":"-30,410","title":"Create Feature","transitions":[{"id":2452,"inputs":{},"position":"90,480 90,550","sourceConnector":"bottom","target":{"id":2451},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetLayer","id":2451,"inputs":{"layerId":"Updates"},"name":"updatesLayer","position":"-30,550","title":"Get Layer","transitions":[{"id":1716,"inputs":{},"position":"90,620 90,690","sourceConnector":"bottom","target":{"id":1715},"targetConnector":"top"}]}]},{"id":1717,"steps":[{"id":1718,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1726,"inputs":{},"position":"90,60 90,120","sourceConnector":"bottom","target":{"id":1723},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1723,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Update_Type == \"NEW ROAD\"","source":"$theFeature.feature.attributes.Update_Type == \"NEW ROAD\""}},"position":"30,120","title":"If","transitions":[{"branch":"true","id":1728,"inputs":{},"position":"30,150 -140,150 -140,310","sourceConnector":"left","target":{"id":1725},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":1725,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.NHS","source":"$form.state.NHS"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"index","value":0},"name":"setNHS","position":"-260,310","title":"Set Current Form Element Item"}],"title":"load-NHS"},{"id":1730,"steps":[{"id":1733,"inputs":{},"position":"0,100","purpose":"start","title":"Container","transitions":[{"id":1775,"inputs":{},"position":"90,160 90,260","sourceConnector":"bottom","target":{"id":1746},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":1746,"inputs":{"items":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes","source":"$theFeature.feature.attributes"}},"name":"resetOldAttributes","position":"-30,260","title":"For Each","transitions":[{"id":1776,"inputs":{},"position":"90,380 90,430","sourceConnector":"bottom","target":{"id":1758},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","description":"Find how many segments there are for this stretch of road","id":1758,"inputs":{"channelName":"arcgis","expect":"json","method":"GET","query":{"accessors":["$theFeature","$theFeature","$theFeature"],"annotations":[{"count":11,"index":55,"kind":"idref"},{"count":11,"index":117,"kind":"idref"},{"count":11,"index":181,"kind":"idref"}],"code":"{\n    f: \"json\",\n    outSR: 102100,\n    locations: \"[{routeId: \" + $theFeature.feature.attributes.Route_ID + \", fromMeasure: \" + $theFeature.feature.attributes.From_Measure + \", toMeasure: \" + $theFeature.feature.attributes.To_Measure + \"}]\",\n    attributeSet: \"[{layerId: 24, fields: [Jurisdictn]}, {layerId: 50, fields: [Speed_Lim]}, {layerId: 46, fields: [Shldr_Lt_W, Shldr_Lt_T]}, {layerId: 60, fields: [Surface_Tp, Surface_Wd]}, {layerId: 47, fields: [Shldr_Rt_W, Shldr_Rt_T]},  {layerId: 33, fields: [Num_Lanes]},  {layerId: 11, fields: [Curb]},  {layerId: 57, fields: [Operation]}, {layerId: 61, fields: [Terrain]}, {layerId: 58, fields: [Struct_Cnd]}, {layerId: 42, fields: [ROW_Width]}, {layerId: 55, fields: [St_Name, Fm_St_Name, To_St_Name]}]\"\n}","source":"{\nf: \"json\",\noutSR: 102100,\nlocations: \"[{routeId: \" + $theFeature.feature.attributes.Route_ID + \", fromMeasure: \" + $theFeature.feature.attributes.From_Measure + \", toMeasure: \" + $theFeature.feature.attributes.To_Measure + \"}]\",\nattributeSet: \"[{layerId: 24, fields: [Jurisdictn]}, {layerId: 50, fields: [Speed_Lim]}, {layerId: 46, fields: [Shldr_Lt_W, Shldr_Lt_T]}, {layerId: 60, fields: [Surface_Tp, Surface_Wd]}, {layerId: 47, fields: [Shldr_Rt_W, Shldr_Rt_T]},  {layerId: 33, fields: [Num_Lanes]},  {layerId: 11, fields: [Curb]},  {layerId: 57, fields: [Operation]}, {layerId: 61, fields: [Terrain]}, {layerId: 58, fields: [Struct_Cnd]}, {layerId: 42, fields: [ROW_Width]}, {layerId: 55, fields: [St_Name, Fm_St_Name, To_St_Name]}]\"\n}"},"url":{"accessors":["$queryAttributeSet"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$queryAttributeSet.result","source":"$queryAttributeSet.result"}},"name":"getOldAttributeSet","position":"-30,430","title":"Send Web Request","transitions":[{"id":1836,"inputs":{},"position":"90,540 90,600","sourceConnector":"bottom","target":{"id":1777},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":1777,"inputs":{"items":{"accessors":["$getOldAttributeSet"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$getOldAttributeSet.json.features","source":"$getOldAttributeSet.json.features"}},"name":"forEachFeature","position":"-30,600","title":"For Each"}]},{"id":1747,"steps":[{"id":1748,"inputs":{},"position":"20,80","purpose":"start","title":"For Each","transitions":[{"id":1752,"inputs":{},"position":"110,140 110,260","target":{"id":1751},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1751,"inputs":{"attributeName":{"accessors":["$resetOldAttributes"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$resetOldAttributes.key","source":"$resetOldAttributes.key"},"attributeValue":":","feature":{"accessors":["$oldFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$oldFeature.feature","source":"$oldFeature.feature"}},"position":"-10,260","title":"Set Feature Attribute"}]},{"id":1757,"steps":[{"action":"gcx:wf:arcgis::Geoprocessing","id":1707,"inputs":{"arguments":{"accessors":[],"annotations":[],"code":"{}","source":"{}"},"url":{"accessors":["$eventGP"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$eventGP.result","source":"$eventGP.result"}},"name":"genEventIDNew","position":"500,-450","title":"Run Geoprocessing","transitions":[{"id":1713,"inputs":{},"position":"620,-380 620,-320","sourceConnector":"bottom","target":{"id":1877},"targetConnector":"top"}]},{"id":1774,"inputs":{},"position":"530,-570","purpose":"start","title":"For Each","transitions":[{"id":1884,"inputs":{},"position":"620,-510 620,-450","sourceConnector":"bottom","target":{"id":1707},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":1877,"inputs":{"attributes":{"accessors":["$theFeature","$theFeature","$theFeature","$genEventIDNew"],"annotations":[{"count":11,"index":12,"kind":"idref"},{"count":11,"index":68,"kind":"idref"},{"count":11,"index":126,"kind":"idref"},{"count":14,"index":181,"kind":"idref"}],"code":"{ \"Route_ID\": $theFeature.feature.attributes.Route_ID, \"From_Measure\": $theFeature.feature.attributes.From_Measure, \"To_Measure\": $theFeature.feature.attributes.To_Measure, \"Event_ID\": $genEventIDNew.results.EventID }","source":"{\"Route_ID\":$theFeature.feature.attributes.Route_ID, \"From_Measure\":$theFeature.feature.attributes.From_Measure, \"To_Measure\":$theFeature.feature.attributes.To_Measure, \"Event_ID\": $genEventIDNew.results.EventID}"}},"name":"updateFeature","position":"500,-320","title":"Create Feature","transitions":[{"id":1890,"inputs":{},"position":"620,-250 620,-190","sourceConnector":"bottom","target":{"id":2068},"targetConnector":"top"}]},{"action":"gcx:wf:core::ConvertToJson","id":2044,"inputs":{"object":{"accessors":["$forEachLRSELayerNew","$updateFeature"],"annotations":[{"count":20,"index":6,"kind":"idref"},{"count":14,"index":103,"kind":"idref"}],"code":"[{ id: $forEachLRSELayerNew.item.id, allowMerge: true, retireMeasureOverlap: true, adds: [{ attributes: $updateFeature.feature.attributes }] }]","source":"[{id: $forEachLRSELayerNew.item.id, allowMerge : true, retireMeasureOverlap: true, adds: [{attributes: $updateFeature.feature.attributes}]}]"}},"name":"newLRSEventValue","position":"500,40","title":"Convert To JSON","transitions":[{"id":2106,"inputs":{},"position":"620,110 620,290","sourceConnector":"bottom","target":{"id":2048},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":2048,"inputs":{"expect":"json","method":"POST","query":{"accessors":["$newLRSEventValue"],"annotations":[{"count":17,"index":19,"kind":"idref"}],"code":"{ f: \"json\", edits: $newLRSEventValue.json\n}","source":"{f: \"json\", edits: $newLRSEventValue.json\n}"},"url":{"accessors":["$lrsApplyEdits"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$lrsApplyEdits.result","source":"$lrsApplyEdits.result"}},"name":"addNewLRSEvent","position":"500,290","title":"Send Web Request"},{"action":"gcx:wf:core:loop:ForEach","id":2068,"inputs":{"items":{"accessors":["$forEachLRSELayerNew"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$forEachLRSELayerNew.item.fields","source":"$forEachLRSELayerNew.item.fields"}},"name":"forEachEventAttributeUpdate","position":"500,-190","title":"For Each","transitions":[{"id":2104,"inputs":{},"position":"620,-70 620,40","sourceConnector":"bottom","target":{"id":2044},"targetConnector":"top"}]}]},{"id":1778,"steps":[{"id":1779,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1785,"inputs":{},"position":"90,60 90,150","target":{"id":1781}}]},{"action":"gcx:wf:core:loop:ForEach","id":1781,"inputs":{"items":{"accessors":["$forEachFeature"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$forEachFeature.item.attributes","source":"$forEachFeature.item.attributes"}},"name":"forEachAttributeinEachFeature","position":"-30,150","title":"For Each"}]},{"id":1782,"steps":[{"id":1783,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1787,"inputs":{},"position":"90,60 90,150","target":{"id":1786}}]},{"action":"gcx:wf:core::If","id":1786,"inputs":{"condition":{"accessors":["$forEachAttributeinEachFeature","$forEachAttributeinEachFeature","$forEachAttributeinEachFeature","$forEachAttributeinEachFeature"],"annotations":[{"count":30,"index":0,"kind":"idref"},{"count":30,"index":48,"kind":"idref"},{"count":30,"index":116,"kind":"idref"},{"count":30,"index":184,"kind":"idref"}],"code":"$forEachAttributeinEachFeature.item !== null && $forEachAttributeinEachFeature.key.includes(\"OBJECTID\") !== true && $forEachAttributeinEachFeature.key.includes(\"_measure\") !== true && $forEachAttributeinEachFeature.key.includes(\"route_id\") !== true","source":"$forEachAttributeinEachFeature.item !== null && $forEachAttributeinEachFeature.key.includes(\"OBJECTID\") !== true && $forEachAttributeinEachFeature.key.includes(\"_measure\") !== true && $forEachAttributeinEachFeature.key.includes(\"route_id\") !== true"}},"position":"30,150","title":"If","transitions":[{"branch":"true","id":1827,"inputs":{},"position":"30,180 0,180 0,270","sourceConnector":"left","target":{"id":1803},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1803,"inputs":{"condition":{"accessors":["$oldFeature","$forEachAttributeinEachFeature","$forEachAttributeinEachFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":30,"index":31,"kind":"idref"},{"count":30,"index":76,"kind":"idref"}],"code":"$oldFeature.feature.attributes[$forEachAttributeinEachFeature.key].includes($forEachAttributeinEachFeature.item)","source":"$oldFeature.feature.attributes[$forEachAttributeinEachFeature.key].includes($forEachAttributeinEachFeature.item)"}},"position":"-60,270","title":"If","transitions":[{"branch":"false","id":1034,"inputs":{},"position":"60,300 280,300 280,480","sourceConnector":"right","target":{"id":1822},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1809,"inputs":{"attributeName":{"accessors":["$forEachAttributeinEachFeature"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$forEachAttributeinEachFeature.key","source":"$forEachAttributeinEachFeature.key"},"attributeValue":{"accessors":["$forEachAttributeinEachFeature"],"annotations":[{"count":30,"index":16,"kind":"idref"}],"code":"\"Currently: \" + $forEachAttributeinEachFeature.item","source":"\"Currently: \" + $forEachAttributeinEachFeature.item"},"feature":{"accessors":["$oldFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$oldFeature.feature","source":"$oldFeature.feature"}},"position":"0,650","title":"Set Feature Attribute"},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1819,"inputs":{"attributeName":{"accessors":["$forEachAttributeinEachFeature"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$forEachAttributeinEachFeature.key","source":"$forEachAttributeinEachFeature.key"},"attributeValue":{"accessors":["$oldFeature","$forEachAttributeinEachFeature","$forEachAttributeinEachFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":30,"index":31,"kind":"idref"},{"count":30,"index":79,"kind":"idref"}],"code":"$oldFeature.feature.attributes[$forEachAttributeinEachFeature.key] + \" and \" + $forEachAttributeinEachFeature.item","source":"$oldFeature.feature.attributes[$forEachAttributeinEachFeature.key] + \" and \" + $forEachAttributeinEachFeature.item"},"feature":{"accessors":["$oldFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$oldFeature.feature","source":"$oldFeature.feature"}},"position":"300,650","title":"Set Feature Attribute"},{"action":"gcx:wf:core::If","id":1822,"inputs":{"condition":{"accessors":["$oldFeature","$forEachAttributeinEachFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":30,"index":31,"kind":"idref"}],"code":"$oldFeature.feature.attributes[$forEachAttributeinEachFeature.key].includes(\"Currently\") == false","source":"$oldFeature.feature.attributes[$forEachAttributeinEachFeature.key].includes(\"Currently\") == false"}},"position":"220,480","title":"If","transitions":[{"branch":"true","id":1824,"inputs":{},"position":"220,510 120,510 120,650","sourceConnector":"left","target":{"id":1809},"targetConnector":"top"},{"branch":"false","id":1826,"inputs":{},"position":"340,510 420,510 420,650","sourceConnector":"right","target":{"id":1819},"targetConnector":"top"}]}]},{"id":1847,"steps":[{"id":1849,"inputs":{},"position":"-200,570","purpose":"start","title":"For Each","transitions":[{"id":1859,"inputs":{},"position":"-110,630 -110,690","sourceConnector":"bottom","target":{"id":1851},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1851,"inputs":{"condition":{"accessors":["$theFeature","$saveChanges","$saveChanges"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":12,"index":31,"kind":"idref"},{"count":12,"index":70,"kind":"idref"}],"code":"$theFeature.feature.attributes[$saveChanges.item['field']] != null && $saveChanges.item['type'] == \"attribute\"","source":"$theFeature.feature.attributes[$saveChanges.item['field']] != null && $saveChanges.item['type'] == \"attribute\""}},"position":"-170,690","title":"If","transitions":[{"branch":"true","id":1864,"inputs":{},"position":"-170,720 -300,720 -300,780","sourceConnector":"left","target":{"id":1853},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1853,"inputs":{"condition":{"accessors":["$form","$saveChanges"],"annotations":[{"count":5,"index":0,"kind":"idref"},{"count":12,"index":12,"kind":"idref"}],"code":"$form.state[$saveChanges.item['field']].value.refValueType === \"number\"","source":"$form.state[$saveChanges.item['field']].value.refValueType === \"number\""}},"position":"-360,780","title":"If","transitions":[{"branch":"true","id":1867,"inputs":{},"position":"-360,810 -460,810 -460,880","sourceConnector":"left","target":{"id":1855},"targetConnector":"top"},{"branch":"false","id":1871,"inputs":{},"position":"-240,810 -140,810 -140,880","sourceConnector":"right","target":{"id":1857},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","description":"Sets new attribute value if type is number","id":1855,"inputs":{"attributeName":{"accessors":["$saveChanges"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$saveChanges.item['field']","source":"$saveChanges.item['field']"},"attributeValue":{"accessors":["$form","$saveChanges"],"annotations":[{"count":5,"index":0,"kind":"idref"},{"count":12,"index":12,"kind":"idref"}],"code":"$form.state[$saveChanges.item['field']].value.numeric","source":"$form.state[$saveChanges.item['field']].value.numeric"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-580,880","title":"Set Feature Attribute"},{"action":"gcx:wf:arcgis::SetFeatureAttribute","description":"Sets new attribute value if type is drop down","id":1857,"inputs":{"attributeName":{"accessors":["$saveChanges"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$saveChanges.item['field']","source":"$saveChanges.item['field']"},"attributeValue":{"accessors":["$form","$saveChanges"],"annotations":[{"count":5,"index":0,"kind":"idref"},{"count":12,"index":12,"kind":"idref"}],"code":"$form.state[$saveChanges.item['field']].value","source":"$form.state[$saveChanges.item['field']].value"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-260,880","title":"Set Feature Attribute"}]},{"id":1861,"steps":[{"id":1862,"inputs":{},"position":"-20,60","purpose":"start","title":"Event","transitions":[{"id":2944,"inputs":{},"position":"70,120 70,230","sourceConnector":"bottom","target":{"id":2927},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Save comments","id":1902,"inputs":{},"position":"-310,370","title":"Container","transitions":[{"id":1998,"inputs":{},"position":"-190,490 -190,530 60,530 60,550","sourceConnector":"bottom","target":{"id":3531},"targetConnector":"top"}]},{"action":"gcx:wf:core::Switch","id":2927,"inputs":{"value":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.event.value","source":"$form.event.value"}},"position":"-50,230","title":"Switch","transitions":[{"branch":"refresh","id":1999,"inputs":{},"position":"190,260 210,260 210,530 60,530 60,550","sourceConnector":"right","target":{"id":3531},"targetConnector":"top"},{"branch":"back","id":2020,"inputs":{},"position":"70,290 70,530 60,530 60,550","sourceConnector":"bottom","target":{"id":3531},"targetConnector":"top"},{"id":2937,"inputs":{},"position":"-50,260 -190,260 -190,370","purpose":"default","sourceConnector":"left","target":{"id":1902},"targetConnector":"top","title":"save"}]},{"action":"gcx:wf:forms::PropagateFormEvent","id":3531,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-60,550","title":"Propagate Form Event"}],"title":"click-saveRefresh"},{"id":1866,"steps":[{"id":1868,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1878,"inputs":{},"position":"90,60 90,200","target":{"id":1870}}]},{"action":"gcx:wf:ui::Confirm","id":1870,"inputs":{"text":"Please confirm","title":"Are you sure you want to save changes?"},"name":"confirmCommentOnly","position":"-30,200","title":"Confirm","transitions":[{"id":1880,"inputs":{},"position":"90,270 90,380","sourceConnector":"bottom","target":{"id":1872},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1872,"inputs":{"condition":{"accessors":["$confirmCommentOnly"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$confirmCommentOnly.result === true","source":"$confirmCommentOnly.result === true"}},"position":"30,380","title":"If","transitions":[{"branch":"true","id":1882,"inputs":{},"position":"30,410 -110,410 -110,440","sourceConnector":"left","target":{"id":1875},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Set the attribute values based on the current form selections","id":1875,"inputs":{"items":{"accessors":["$fieldsList"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$fieldsList.result","source":"$fieldsList.result"}},"name":"saveChanges","position":"-230,440","title":"For Each","transitions":[{"id":1885,"inputs":{},"position":"-110,610 -110,650","sourceConnector":"bottom","target":{"id":1879},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::UpdateFeatures","description":"Updates the submission with current values","id":1879,"inputs":{"features":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"saveFeature","position":"-230,650","title":"Update Features"}]},{"id":2022,"steps":[{"action":"gcx:wf:forms::SetFormElementProperty","id":962,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Priority","source":"$form.state.Priority"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":1},"position":"-200,1080","title":"Set Form Element Property"},{"id":2023,"inputs":{},"position":"110,80","purpose":"start","title":"Try","transitions":[{"id":2037,"inputs":{},"position":"200,140 200,240","sourceConnector":"bottom","target":{"id":2031},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","id":2031,"inputs":{"outFields":"*","returnGeometry":false,"url":{"accessors":["$routes"],"annotations":[{"count":7,"index":0,"kind":"idref"}],"code":"$routes.result","source":"$routes.result"},"where":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":17,"kind":"idref"}],"code":"\"Route_ID = '\" + $theFeature.feature.attributes.Route_ID + \"'\"","source":"\"Route_ID = '\" + $theFeature.feature.attributes.Route_ID + \"'\""}},"name":"queryRoute","position":"80,240","title":"Query Layer","transitions":[{"id":2036,"inputs":{},"position":"200,310 200,370","sourceConnector":"bottom","target":{"id":2041},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2041,"inputs":{"condition":{"accessors":["$queryRoute"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$queryRoute.features.length > 0","source":"$queryRoute.features.length > 0"}},"position":"140,370","title":"If","transitions":[{"branch":"true","id":2043,"inputs":{},"position":"140,400 -80,400 -80,570","sourceConnector":"left","target":{"id":2051},"targetConnector":"top"},{"branch":"false","id":2047,"inputs":{},"position":"260,400 400,400 400,510","sourceConnector":"right","target":{"id":2046},"targetConnector":"top"}]},{"action":"gcx:wf:ui::Alert","id":2046,"inputs":{"text":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":29,"kind":"idref"}],"code":"\"No route with Route_ID: \" + $theFeature.feature.attributes.Route_ID + \" exists.\\\\\" +\n    \"Please confirm an existing route does not already exist at this location. If so, update this RISA submission with the corresponding Route_ID.\"","source":"\"No route with Route_ID: \" + $theFeature.feature.attributes.Route_ID + \" exists.\\\\\" +\n\"Please confirm an existing route does not already exist at this location. If so, update this RISA submission with the corresponding Route_ID.\""},"title":"Error"},"position":"280,510","title":"Alert"},{"action":"gcx:wf:forms::SetFormElementProperty","id":2051,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.saveUpdate","source":"$form.state.saveUpdate"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":true},"position":"-200,570","title":"Set Form Element Property","transitions":[{"id":2059,"inputs":{},"position":"-80,600 -80,700","sourceConnector":"bottom","target":{"id":2055},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":2055,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.F_Class","source":"$form.state.F_Class"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":true},"position":"-200,700","title":"Set Form Element Property","transitions":[{"id":2060,"inputs":{},"position":"-80,730 -80,780","sourceConnector":"bottom","target":{"id":2058},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":2058,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.NHS","source":"$form.state.NHS"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":true},"position":"-200,780","title":"Set Form Element Property","transitions":[{"id":2065,"inputs":{},"position":"-80,810 -80,860","sourceConnector":"bottom","target":{"id":2063},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":2063,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Priority","source":"$form.state.Priority"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":true},"position":"-200,860","title":"Set Form Element Property","transitions":[{"id":2067,"inputs":{},"position":"-80,890 -80,940","sourceConnector":"bottom","target":{"id":2066},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":2066,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.F_Class","source":"$form.state.F_Class"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":0},"name":"setF_Class","position":"-200,940","title":"Set Current Form Element Item","transitions":[{"id":963,"inputs":{},"position":"-80,1010 -80,1080","sourceConnector":"bottom","target":{"id":962},"targetConnector":"top"}]}]},{"id":2025,"steps":[{"id":2026,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":2039,"inputs":{},"position":"90,60 90,130","target":{"id":2038}}]},{"action":"gcx:wf:ui::Alert","id":2038,"inputs":{"text":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":29,"kind":"idref"}],"code":"\"No route with Route_ID: \" + $theFeature.feature.attributes.Route_ID + \" exists.\\\\\\\\ Please confirm an existing route does not already exist at this location. If so, update this RISA submission with the corresponding Route_ID.\"","source":"\"No route with Route_ID: \" + $theFeature.feature.attributes.Route_ID + \" exists.\\\\\\\\ Please confirm an existing route does not already exist at this location. If so, update this RISA submission with the corresponding Route_ID.\""},"title":"Error"},"position":"-30,130","title":"Alert"}]},{"id":2069,"steps":[{"id":2070,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1895,"inputs":{},"position":"90,60 90,250","sourceConnector":"bottom","target":{"id":2081},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2081,"inputs":{"attributeName":{"accessors":["$forEachEventAttributeUpdate"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$forEachEventAttributeUpdate.item.field","source":"$forEachEventAttributeUpdate.item.field"},"attributeValue":{"accessors":["$forEachEventAttributeUpdate"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$forEachEventAttributeUpdate.item.value","source":"$forEachEventAttributeUpdate.item.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,250","title":"Set Feature Attribute"}]},{"id":2287,"steps":[{"action":"gcx:wf:core::If","id":955,"inputs":{"condition":{"accessors":["$forEachLRSELayer"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$forEachLRSELayer.item.id !== 55","source":"$forEachLRSELayer.item.id !== 55"}},"position":"460,910","title":"If","transitions":[{"branch":"true","id":973,"inputs":{},"position":"460,940 300,940 300,990","sourceConnector":"left","target":{"id":2563},"targetConnector":"top"},{"branch":"false","id":984,"inputs":{},"position":"580,940 690,940 690,1010","sourceConnector":"right","target":{"id":971},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":967,"inputs":{},"position":"570,1670","title":"Container","transitions":[{"id":975,"inputs":{},"position":"690,1760 690,1840","sourceConnector":"bottom","target":{"id":982},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","description":"Find how many segments there are for this stretch of road for the current LRSE layer","id":971,"inputs":{"channelName":"arcgis","expect":"json","method":"GET","query":{"accessors":["$theFeature","$newSegmentFeature","$newSegmentFeature"],"annotations":[{"count":11,"index":55,"kind":"idref"},{"count":18,"index":117,"kind":"idref"},{"count":18,"index":176,"kind":"idref"}],"code":"{\n    f: \"json\",\n    outSR: 102100,\n    locations: \"[{routeId: \" + $theFeature.feature.attributes.Route_ID + \", fromMeasure: \" + $newSegmentFeature.result.from_measure + \", toMeasure: \" + $newSegmentFeature.result.to_measure + \"}]\",\n    attributeSet: \"[{layerId: 55, fields: ['St_Name', 'Fm_St_Name', 'To_St_Name', 'SN_Prefix', 'SN_Body', 'SN_Type', 'SN_Suffix', 'St_Nam_Src', 'Prin_St_Nm', 'Soundex', 'From_Type', 'To_Type', 'From_City', 'To_City', 'From_State', 'To_State', 'City_Maint', 'County']}]\"\n}","source":"{\nf: \"json\",\noutSR: 102100,\nlocations: \"[{routeId: \" + $theFeature.feature.attributes.Route_ID + \", fromMeasure: \" + $newSegmentFeature.result.from_measure + \", toMeasure: \" + $newSegmentFeature.result.to_measure + \"}]\",\nattributeSet: \"[{layerId: 55, fields: ['St_Name', 'Fm_St_Name', 'To_St_Name', 'SN_Prefix', 'SN_Body', 'SN_Type', 'SN_Suffix', 'St_Nam_Src', 'Prin_St_Nm', 'Soundex', 'From_Type', 'To_Type', 'From_City', 'To_City', 'From_State', 'To_State', 'City_Maint', 'County']}]\"\n}"},"url":{"accessors":["$queryAttributeSet"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$queryAttributeSet.result","source":"$queryAttributeSet.result"}},"name":"getSt_NameEvent","position":"570,1010","title":"Send Web Request","transitions":[{"id":985,"inputs":{},"position":"690,1140 690,1180","sourceConnector":"bottom","target":{"id":978},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":976,"inputs":{"attributeName":"St_Name","attributeValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.St_Name","source":"$theFeature.feature.attributes.St_Name"},"feature":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature","source":"$St_Name_Event.feature"}},"position":"570,1310","title":"Set Feature Attribute","transitions":[{"id":995,"inputs":{},"position":"690,1340 690,1390","sourceConnector":"bottom","target":{"id":988},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":978,"inputs":{"attributes":{"accessors":["$getSt_NameEvent"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$getSt_NameEvent.json.features[0].attributes","source":"$getSt_NameEvent.json.features[0].attributes"}},"name":"St_Name_Event","position":"570,1180","title":"Create Feature","transitions":[{"id":979,"inputs":{},"position":"690,1250 690,1310","sourceConnector":"bottom","target":{"id":976},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":982,"inputs":{"message":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature","source":"$St_Name_Event.feature"}},"position":"570,1840","title":"Log","transitions":[{"id":1003,"inputs":{},"position":"690,1870 690,1910","sourceConnector":"bottom","target":{"id":1002},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":988,"inputs":{"attributeName":"Route_ID","attributeValue":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature.attributes.route_id","source":"$St_Name_Event.feature.attributes.route_id"},"feature":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature","source":"$St_Name_Event.feature"}},"position":"570,1390","title":"Set Feature Attribute","transitions":[{"id":996,"inputs":{},"position":"690,1420 690,1470","sourceConnector":"bottom","target":{"id":991},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":991,"inputs":{"attributeName":"From_Measure","attributeValue":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature.attributes.from_measure","source":"$St_Name_Event.feature.attributes.from_measure"},"feature":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature","source":"$St_Name_Event.feature"}},"position":"570,1470","title":"Set Feature Attribute","transitions":[{"id":997,"inputs":{},"position":"690,1500 690,1550","sourceConnector":"bottom","target":{"id":994},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":994,"inputs":{"attributeName":"To_Measure","attributeValue":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature.attributes.to_measure","source":"$St_Name_Event.feature.attributes.to_measure"},"feature":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature","source":"$St_Name_Event.feature"}},"position":"570,1550","title":"Set Feature Attribute","transitions":[{"id":974,"inputs":{},"position":"690,1580 690,1670","sourceConnector":"bottom","target":{"id":967},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1002,"inputs":{"object":{"accessors":["$newSegmentFeature"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$newSegmentFeature","source":"$newSegmentFeature"},"propertyName":"result","propertyValue":{"accessors":["$St_Name_Event"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$St_Name_Event.feature.attributes","source":"$St_Name_Event.feature.attributes"}},"position":"570,1910","title":"Set Property","transitions":[{"id":1004,"inputs":{},"position":"690,1940 690,1980 520,1980 520,2000","sourceConnector":"bottom","target":{"id":1933},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1684,"inputs":{"object":{"accessors":["$newSegmentFeature"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$newSegmentFeature.result","source":"$newSegmentFeature.result"},"propertyName":"Event_ID","propertyValue":{"accessors":["$genEventIDUpdate"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$genEventIDUpdate.results.EventID","source":"$genEventIDUpdate.results.EventID"}},"position":"-30,410","title":"Set Property","transitions":[{"id":1685,"inputs":{},"position":"90,440 90,490","sourceConnector":"bottom","target":{"id":2340},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::Geoprocessing","id":1692,"inputs":{"arguments":{"accessors":[],"annotations":[],"code":"{}","source":"{}"},"url":{"accessors":["$eventGP"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$eventGP.result","source":"$eventGP.result"}},"name":"genEventIDUpdate","position":"-30,300","title":"Run Geoprocessing","transitions":[{"id":1695,"inputs":{},"position":"90,370 90,410","sourceConnector":"bottom","target":{"id":1684},"targetConnector":"top"}]},{"action":"gcx:wf:core::ConvertToJson","id":1933,"inputs":{"object":{"accessors":["$forEachLRSELayer","$newSegmentFeature"],"annotations":[{"count":17,"index":6,"kind":"idref"},{"count":18,"index":100,"kind":"idref"}],"code":"[{ id: $forEachLRSELayer.item.id, allowMerge: true, retireMeasureOverlap: true, adds: [{ attributes: $newSegmentFeature.result }] }]","source":"[{id: $forEachLRSELayer.item.id, allowMerge : true, retireMeasureOverlap: true, adds: [{attributes: $newSegmentFeature.result}]}]"}},"name":"json","position":"400,2000","title":"Convert To JSON","transitions":[{"id":1955,"inputs":{},"position":"520,2070 520,2180","sourceConnector":"bottom","target":{"id":2223},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1974,"inputs":{"object":{"accessors":["$newSegmentFeature"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$newSegmentFeature.result","source":"$newSegmentFeature.result"},"propertyName":"Route_ID","propertyValue":{"accessors":["$newSegmentFeature"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$newSegmentFeature.result.route_id","source":"$newSegmentFeature.result.route_id"}},"position":"180,1050","title":"Set Property","transitions":[{"id":2009,"inputs":{},"position":"300,1080 300,1140","sourceConnector":"bottom","target":{"id":2002},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1993,"inputs":{"object":{"accessors":["$newSegmentFeature"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$newSegmentFeature.result","source":"$newSegmentFeature.result"},"propertyName":"To_Measure","propertyValue":{"accessors":["$newSegmentFeature"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$newSegmentFeature.result.to_measure","source":"$newSegmentFeature.result.to_measure"}},"position":"180,1210","title":"Set Property","transitions":[{"id":2049,"inputs":{},"position":"300,1240 300,1980 520,1980 520,2000","sourceConnector":"bottom","target":{"id":1933},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2002,"inputs":{"object":{"accessors":["$newSegmentFeature"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$newSegmentFeature.result","source":"$newSegmentFeature.result"},"propertyName":"From_Measure","propertyValue":{"accessors":["$newSegmentFeature"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$newSegmentFeature.result.from_measure","source":"$newSegmentFeature.result.from_measure"}},"position":"180,1140","title":"Set Property","transitions":[{"id":2040,"inputs":{},"position":"300,1170 300,1210","sourceConnector":"bottom","target":{"id":1993},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2082,"inputs":{"condition":{"accessors":["$addNewEvent"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$addNewEvent.json.success","source":"$addNewEvent.json.success"}},"position":"460,2350","title":"If","transitions":[{"branch":"false","id":2201,"inputs":{},"position":"580,2380 660,2380 660,2470","sourceConnector":"right","target":{"id":2195},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2195,"inputs":{"attributeName":"Status","attributeValue":5,"feature":{"accessors":["$acceptFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$acceptFeature.feature","source":"$acceptFeature.feature"}},"position":"540,2470","title":"Set Feature Attribute"},{"action":"gcx:wf:core:request:WebRequest","id":2223,"inputs":{"expect":"json","method":"POST","query":{"accessors":["$json"],"annotations":[{"count":5,"index":19,"kind":"idref"}],"code":"{ f: \"json\", edits: $json.json\n}","source":"{f: \"json\", edits: $json.json\n}"},"url":{"accessors":["$lrsApplyEdits"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$lrsApplyEdits.result","source":"$lrsApplyEdits.result"}},"name":"addNewEvent","position":"400,2180","title":"Send Web Request","transitions":[{"id":1671,"inputs":{},"position":"520,2250 520,2350","sourceConnector":"bottom","target":{"id":2082},"targetConnector":"top"}]},{"id":2289,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1675,"inputs":{},"position":"90,60 90,90","sourceConnector":"bottom","target":{"id":2384},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":2340,"inputs":{"items":{"accessors":["$forEachLRSELayer"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$forEachLRSELayer.item.fields","source":"$forEachLRSELayer.item.fields"}},"name":"forEachEventField1","position":"-30,490","title":"For Each","transitions":[{"id":2519,"inputs":{},"position":"90,610 90,670","sourceConnector":"bottom","target":{"id":2539},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2384,"inputs":{"expression":true},"name":"segmentAttributesTheSame","position":"-30,90","title":"Create Value","transitions":[{"id":2389,"inputs":{},"position":"90,160 90,200","sourceConnector":"bottom","target":{"id":2492},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2492,"inputs":{"expression":{"accessors":["$forEachEventSegment"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$forEachEventSegment.item.attributes","source":"$forEachEventSegment.item.attributes"}},"name":"newSegmentFeature","position":"-30,200","title":"Create Value","transitions":[{"id":2494,"inputs":{},"position":"90,270 90,300","sourceConnector":"bottom","target":{"id":1692},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2539,"inputs":{"condition":{"accessors":["$segmentAttributesTheSame"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$segmentAttributesTheSame.result","source":"$segmentAttributesTheSame.result"}},"position":"30,670","title":"If","transitions":[{"branch":"false","id":968,"inputs":{},"position":"150,700 520,700 520,910","sourceConnector":"right","target":{"id":955},"targetConnector":"top"},{"branch":"true","id":2551,"inputs":{},"position":"30,700 -90,700 -90,830","sourceConnector":"left","target":{"id":2547},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":2547,"inputs":{"message":"SEGMENTS ARE THE SAME"},"position":"-210,830","title":"Log"},{"action":"gcx:wf:core::Log","id":2563,"inputs":{"message":{"accessors":["$eventFields"],"annotations":[{"count":12,"index":28,"kind":"idref"}],"code":"\"NEED TO UPDATE SEGMENT \" + $eventFields.result","source":"\"NEED TO UPDATE SEGMENT \" + $eventFields.result"}},"position":"180,990","title":"Log","transitions":[{"id":1977,"inputs":{},"position":"300,1020 300,1050","sourceConnector":"bottom","target":{"id":1974},"targetConnector":"top"}]}]},{"id":2312,"steps":[{"id":2316,"inputs":{},"position":"0,40","purpose":"start","title":"For Each","transitions":[{"id":2523,"inputs":{},"position":"90,100 90,170","sourceConnector":"bottom","target":{"id":2318},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2318,"inputs":{"condition":{"accessors":["$forEachEventSegment","$forEachEventField1","$theFeature","$forEachEventField1"],"annotations":[{"count":20,"index":0,"kind":"idref"},{"count":19,"index":37,"kind":"idref"},{"count":11,"index":73,"kind":"idref"},{"count":19,"index":104,"kind":"idref"}],"code":"$forEachEventSegment.item.attributes[$forEachEventField1.item.field] === $theFeature.feature.attributes[$forEachEventField1.item.field]","source":"$forEachEventSegment.item.attributes[$forEachEventField1.item.field] === $theFeature.feature.attributes[$forEachEventField1.item.field]"}},"position":"30,170","title":"If","transitions":[{"branch":"false","id":1678,"inputs":{},"position":"150,200 270,200 270,370","sourceConnector":"right","target":{"id":2484},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2484,"inputs":{"object":{"accessors":["$segmentAttributesTheSame"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$segmentAttributesTheSame","source":"$segmentAttributesTheSame"},"propertyName":"result","propertyValue":false},"position":"150,370","title":"Set Property","transitions":[{"id":2515,"inputs":{},"position":"270,400 270,460","sourceConnector":"bottom","target":{"id":2513},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2513,"inputs":{"object":{"accessors":["$newSegmentFeature"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$newSegmentFeature.result","source":"$newSegmentFeature.result"},"propertyName":{"accessors":["$forEachEventField1"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$forEachEventField1.item.field","source":"$forEachEventField1.item.field"},"propertyValue":{"accessors":["$theFeature","$forEachEventField1"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":19,"index":31,"kind":"idref"}],"code":"$theFeature.feature.attributes[$forEachEventField1.item.field]","source":"$theFeature.feature.attributes[$forEachEventField1.item.field]"}},"position":"150,460","title":"Set Property"}]},{"id":2407,"steps":[{"id":2410,"inputs":{},"position":"-200,570","purpose":"start","title":"For Each","transitions":[{"id":2511,"inputs":{},"position":"-110,630 -110,690","sourceConnector":"bottom","target":{"id":2415},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2415,"inputs":{"condition":{"accessors":["$theFeature","$verifyAnyValueChanges","$verifyAnyValueChanges"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":22,"index":31,"kind":"idref"},{"count":22,"index":80,"kind":"idref"}],"code":"$theFeature.feature.attributes[$verifyAnyValueChanges.item['field']] != null && $verifyAnyValueChanges.item['type'] == \"attribute\"","source":"$theFeature.feature.attributes[$verifyAnyValueChanges.item['field']] != null && $verifyAnyValueChanges.item['type'] == \"attribute\""}},"position":"-170,690","title":"If","transitions":[{"branch":"true","id":2566,"inputs":{},"position":"-170,720 -300,720 -300,780","sourceConnector":"left","target":{"id":2565},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2565,"inputs":{"condition":{"accessors":["$form","$verifyAnyValueChanges"],"annotations":[{"count":5,"index":0,"kind":"idref"},{"count":22,"index":12,"kind":"idref"}],"code":"$form.state[$verifyAnyValueChanges.item['field']].value.refValueType === \"number\"","source":"$form.state[$verifyAnyValueChanges.item['field']].value.refValueType === \"number\""}},"position":"-360,780","title":"If","transitions":[{"branch":"true","id":2569,"inputs":{},"position":"-360,810 -460,810 -460,880","sourceConnector":"left","target":{"id":2567},"targetConnector":"top"},{"branch":"false","id":2585,"inputs":{},"position":"-240,810 -140,810 -140,880","sourceConnector":"right","target":{"id":2583},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","description":"Sets new attribute value if type is number","id":2567,"inputs":{"attributeName":{"accessors":["$verifyAnyValueChanges"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$verifyAnyValueChanges.item['field']","source":"$verifyAnyValueChanges.item['field']"},"attributeValue":{"accessors":["$form","$verifyAnyValueChanges"],"annotations":[{"count":5,"index":0,"kind":"idref"},{"count":22,"index":12,"kind":"idref"}],"code":"$form.state[$verifyAnyValueChanges.item['field']].value.numeric","source":"$form.state[$verifyAnyValueChanges.item['field']].value.numeric"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-580,880","title":"Set Feature Attribute"},{"action":"gcx:wf:arcgis::SetFeatureAttribute","description":"Sets new attribute value if type is drop down","id":2583,"inputs":{"attributeName":{"accessors":["$verifyAnyValueChanges"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$verifyAnyValueChanges.item['field']","source":"$verifyAnyValueChanges.item['field']"},"attributeValue":{"accessors":["$form","$verifyAnyValueChanges"],"annotations":[{"count":5,"index":0,"kind":"idref"},{"count":22,"index":12,"kind":"idref"}],"code":"$form.state[$verifyAnyValueChanges.item['field']].value","source":"$form.state[$verifyAnyValueChanges.item['field']].value"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-260,880","title":"Set Feature Attribute"}]},{"id":2905,"steps":[{"action":"gcx:wf:core:loop:ForEach","description":"Determine if a value exists in the RISA feature for the attributes of the current LRS Event Layer","id":1499,"inputs":{"items":{"accessors":["$forEachLRSELayer"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$forEachLRSELayer.item.fields","source":"$forEachLRSELayer.item.fields"}},"name":"forEachLayerField","position":"-30,130","title":"For Each","transitions":[{"id":1636,"inputs":{},"position":"90,340 90,390","sourceConnector":"bottom","target":{"id":1635},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1620,"inputs":{},"name":"newEvent","position":"-30,0","title":"Create Value","transitions":[{"id":1628,"inputs":{},"position":"90,70 90,130","sourceConnector":"bottom","target":{"id":1499},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1635,"inputs":{"condition":{"accessors":["$newEvent"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$newEvent.result !== undefined","source":"$newEvent.result !== undefined"}},"position":"30,390","title":"If","transitions":[{"branch":"true","id":2461,"inputs":{},"position":"30,420 -30,420 -30,550","sourceConnector":"left","target":{"id":2014},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","description":"Find how many segments there are for this stretch of road for the current LRSE layer","id":1673,"inputs":{"channelName":"arcgis","expect":"json","method":"GET","query":{"accessors":["$theFeature","$theFeature","$theFeature","$forEachLRSELayer","$eventFields"],"annotations":[{"count":11,"index":55,"kind":"idref"},{"count":11,"index":117,"kind":"idref"},{"count":11,"index":181,"kind":"idref"},{"count":17,"index":261,"kind":"idref"},{"count":12,"index":305,"kind":"idref"}],"code":"{\n    f: \"json\",\n    outSR: 102100,\n    locations: \"[{routeId: \" + $theFeature.feature.attributes.Route_ID + \", fromMeasure: \" + $theFeature.feature.attributes.From_Measure + \", toMeasure: \" + $theFeature.feature.attributes.To_Measure + \"}]\",\n    attributeSet: \"[{layerId: \" + $forEachLRSELayer.item.id + \", fields: [\" + $eventFields.result + \"]}]\"\n}","source":"{\nf: \"json\",\noutSR: 102100,\nlocations: \"[{routeId: \" + $theFeature.feature.attributes.Route_ID + \", fromMeasure: \" + $theFeature.feature.attributes.From_Measure + \", toMeasure: \" + $theFeature.feature.attributes.To_Measure + \"}]\",\nattributeSet: \"[{layerId: \" + $forEachLRSELayer.item.id + \", fields: [\" + $eventFields.result + \"]}]\"\n}"},"url":{"accessors":["$queryAttributeSet"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$queryAttributeSet.result","source":"$queryAttributeSet.result"}},"name":"getEventAttributeValues","position":"-150,700","title":"Send Web Request","transitions":[{"id":2390,"inputs":{},"position":"-30,830 -30,890","sourceConnector":"bottom","target":{"id":2476},"targetConnector":"top"}]},{"action":"gcx:wf:core::TextReplace","id":2014,"inputs":{"newValue":" ","oldValue":"undefined,","text":{"accessors":["$newEvent"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$newEvent.result","source":"$newEvent.result"}},"name":"eventFields","position":"-150,550","title":"Text Replace","transitions":[{"id":2035,"inputs":{},"position":"-30,620 -30,700","sourceConnector":"bottom","target":{"id":1673},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Evaluate if the attributes of each segment are different from the proposed RISA values","id":2279,"inputs":{"items":{"accessors":["$getEventAttributeValues"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$getEventAttributeValues.json.features","source":"$getEventAttributeValues.json.features"}},"name":"forEachEventSegment","position":"-150,1000","title":"For Each"},{"action":"gcx:wf:core::Log","id":2476,"inputs":{"message":{"accessors":["$eventFields"],"annotations":[{"count":12,"index":15,"kind":"idref"}],"code":"\"Checking: \" + $eventFields.result","source":"\"Checking: \" + $eventFields.result"}},"position":"-150,890","title":"Log","transitions":[{"id":2480,"inputs":{},"position":"-30,920 -30,1000","sourceConnector":"bottom","target":{"id":2279},"targetConnector":"top"}]},{"id":2906,"inputs":{},"position":"0,-120","purpose":"start","title":"For Each","transitions":[{"id":2918,"inputs":{},"position":"90,-60 90,0","sourceConnector":"bottom","target":{"id":1620},"targetConnector":"top"}]}]},{"id":3211,"steps":[{"action":"gcx:wf:core:loop:ForEach","id":1136,"inputs":{"items":{"accessors":["$queryTowns"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$queryTowns.features","source":"$queryTowns.features"}},"name":"getTownLabels","position":"-20,140","title":"For Each","transitions":[{"id":1159,"inputs":{},"position":"100,260 100,330","sourceConnector":"bottom","target":{"id":3217},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":1519,"inputs":{"elementName":{"accessors":["$filters"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$filters.state.townId","source":"$filters.state.townId"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"index","value":{"accessors":["$townLabel"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$townLabel.result","source":"$townLabel.result"}},"name":"setTownId","position":"-150,770","title":"Set Current Form Element Item","transitions":[{"id":1711,"inputs":{},"position":"-30,840 -30,920","sourceConnector":"bottom","target":{"id":1687},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1523,"inputs":{"condition":{"accessors":["$filterValues"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$filterValues.result.townId !== null","source":"$filterValues.result.townId !== null"}},"position":"40,650","title":"If","transitions":[{"branch":"true","id":1525,"inputs":{},"position":"40,680 -30,680 -30,770","sourceConnector":"left","target":{"id":1519},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":1687,"inputs":{"items":{"accessors":[],"annotations":[],"code":"[\"updates\", \"newRoads\"]","source":"[\"updates\", \"newRoads\"]"}},"name":"forEachSelectorHide6","position":"-150,920","title":"For Each","transitions":[{"id":1700,"inputs":{},"position":"-30,1040 -30,1100","sourceConnector":"bottom","target":{"id":1689},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Populates the drop down list with updates for this submission","id":1689,"inputs":{},"position":"-150,1100","title":"Populate Updates","transitions":[{"id":1703,"inputs":{},"position":"-30,1260 -30,1320","sourceConnector":"bottom","target":{"id":1691},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Populates the drop down list with new roads for this submission","id":1691,"inputs":{},"position":"-150,1320","title":"Populate New Roads"},{"id":3213,"inputs":{},"position":"10,-170","purpose":"start","title":"Event","transitions":[{"id":1156,"inputs":{},"position":"100,-110 100,-80","sourceConnector":"bottom","target":{"id":3215},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Query for submission features.","id":3215,"inputs":{"groupByFieldsForStatistics":"City","orderByFields":"City","outFields":"City","outStatistics":{"accessors":[],"annotations":[],"code":"[\n    {\n        \"statisticType\": \"count\",\n        \"onStatisticField\": \"City\",\n        \"outStatisticFieldName\": \"SubmissionsByCity\"\n    }\n]","source":"[\n  {\n    \"statisticType\": \"count\",\n    \"onStatisticField\": \"City\",\n    \"outStatisticFieldName\": \"SubmissionsByCity\"\n  }\n]"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"},"where":{"accessors":["$filterValues"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$filterValues.result.filterSubmissions","source":"$filterValues.result.filterSubmissions"}},"name":"queryTowns","position":"-20,-80","title":"Query Submissions","transitions":[{"id":1187,"inputs":{},"position":"100,20 100,140","sourceConnector":"bottom","target":{"id":1136},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the features into form element items to be used in the element.","id":3217,"inputs":{"features":{"accessors":["$queryTowns"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$queryTowns.features","source":"$queryTowns.features"},"labelFieldName":"{label}","valueFieldName":"{City}"},"name":"townElementItems","position":"-20,330","title":"Get Form Element Items From Features","transitions":[{"id":3239,"inputs":{},"position":"100,460 100,510","target":{"id":3219}}]},{"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","id":3219,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$townElementItems"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$townElementItems.items","source":"$townElementItems.items"}},"position":"-20,510","title":"Set Form Element Items","transitions":[{"id":1572,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":1523},"targetConnector":"top"}]}],"title":"load-townId"},{"id":3441,"steps":[{"action":"gcx:wf:core:loop:ForEach","id":912,"inputs":{"items":{"accessors":["$queryTownsFilterChange"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$queryTownsFilterChange.features","source":"$queryTownsFilterChange.features"}},"name":"getTownLabels1","position":"-20,1060","title":"For Each","transitions":[{"id":917,"inputs":{},"position":"100,1180 100,1220","sourceConnector":"bottom","target":{"id":3451},"targetConnector":"top"}]},{"id":3443,"inputs":{},"position":"10,430","purpose":"start","title":"Event","transitions":[{"id":3518,"inputs":{},"position":"100,490 100,650","sourceConnector":"bottom","target":{"id":5821},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Query for submission features.","id":3449,"inputs":{"groupByFieldsForStatistics":"City","orderByFields":"City","outFields":"City","outStatistics":{"accessors":[],"annotations":[],"code":"[\n    {\n        \"statisticType\": \"count\",\n        \"onStatisticField\": \"City\",\n        \"outStatisticFieldName\": \"SubmissionsByCity\"\n    }\n]","source":"[\n  {\n    \"statisticType\": \"count\",\n    \"onStatisticField\": \"City\",\n    \"outStatisticFieldName\": \"SubmissionsByCity\"\n  }\n]"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"},"where":{"accessors":["$filters"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$filters.state.filterSubmissions.value","source":"$filters.state.filterSubmissions.value"}},"name":"queryTownsFilterChange","position":"-20,930","title":"Query Submissions","transitions":[{"id":3465,"inputs":{},"position":"100,1030 100,1060","sourceConnector":"bottom","target":{"id":912},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the features into form element items to be used in the element.","id":3451,"inputs":{"features":{"accessors":["$queryTownsFilterChange"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$queryTownsFilterChange.features","source":"$queryTownsFilterChange.features"},"labelFieldName":"{label}","valueFieldName":"{City}"},"name":"townElementsFilterChange","position":"-20,1220","title":"Get Form Element Items From Features","transitions":[{"id":3467,"inputs":{},"position":"100,1350 100,1420","target":{"id":3453}}]},{"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","id":3453,"inputs":{"elementName":"townId","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$townElementsFilterChange"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$townElementsFilterChange.items","source":"$townElementsFilterChange.items"},"reset":true},"position":"-20,1420","title":"Set Form Element Items","transitions":[{"id":5591,"inputs":{},"position":"100,1510 100,1560","sourceConnector":"bottom","target":{"id":3457},"targetConnector":"top"}]},{"action":"gcx:wf:forms::ShowFormElement","id":3457,"inputs":{"elementName":"townId","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"visible":true},"position":"-20,1560","title":"Show Form Element"},{"action":"gcx:wf:core:loop:ForEach","id":5606,"inputs":{"items":{"accessors":[],"annotations":[],"code":"[\"updates\", \"newRoads\", \"townId\"]","source":"[\"updates\", \"newRoads\", \"townId\"]"}},"name":"hideEachFilter","position":"-20,770","title":"For Each","transitions":[{"id":5609,"inputs":{},"position":"100,890 100,930","sourceConnector":"bottom","target":{"id":3449},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":5821,"inputs":{"object":{"accessors":["$filterValues"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$filterValues","source":"$filterValues"},"propertyName":"result","propertyValue":{"accessors":["$filters"],"annotations":[{"count":8,"index":22,"kind":"idref"}],"code":"{ \"filterSubmissions\": $filters.state.filterSubmissions.value, \"townId\": null, \"updates\": null, \"newRoads\": null }","source":"{\"filterSubmissions\": $filters.state.filterSubmissions.value, \"townId\": null, \"updates\": null, \"newRoads\": null}"}},"position":"-20,650","title":"Set Property","transitions":[{"id":5822,"inputs":{},"position":"100,680 100,770","sourceConnector":"bottom","target":{"id":5606},"targetConnector":"top"}]}],"title":"change-filterSubmissions"},{"id":3525,"steps":[{"id":3526,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3529,"inputs":{},"position":"90,60 90,140","target":{"id":3528}}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":3528,"inputs":{"attributeName":"Reviewer_Comments","attributeValue":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Reviewer_Comments.value","source":"$form.state.Reviewer_Comments.value"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-30,140","title":"Set Feature Attribute"}],"title":"change-Reviewer_Comments"},{"id":3542,"steps":[{"id":3543,"inputs":{},"position":"360,0","purpose":"start","title":"Event","transitions":[{"id":1092,"inputs":{},"position":"450,60 450,380","sourceConnector":"bottom","target":{"id":3555},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":3555,"inputs":{"elementName":"Facility","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$formFacilityItems"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$formFacilityItems.items","source":"$formFacilityItems.items"}},"position":"330,380","title":"Set Form Element Items"}],"title":"populate-Facility"},{"id":3577,"steps":[{"id":3578,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1101,"inputs":{},"position":"90,60 90,140","sourceConnector":"bottom","target":{"id":3582},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":3582,"inputs":{"elementName":"F_Class","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$formItemsFClass"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$formItemsFClass.items","source":"$formItemsFClass.items"}},"position":"-30,140","title":"Set Form Element Items"}],"title":"populate-F_Class"},{"id":3592,"steps":[{"id":3593,"inputs":{},"position":"110,-10","purpose":"start","title":"Event","transitions":[{"id":1110,"inputs":{},"position":"200,50 200,310","sourceConnector":"bottom","target":{"id":3597},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":3597,"inputs":{"elementName":"NHS","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$formItemsNHS"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$formItemsNHS.items","source":"$formItemsNHS.items"}},"position":"80,310","title":"Set Form Element Items"}],"title":"populate-NHS"},{"id":3644,"steps":[{"id":3645,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3682,"inputs":{},"position":"90,60 90,120","sourceConnector":"bottom","target":{"id":3679},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Update other attributes\n","id":3679,"inputs":{},"position":"-30,120","title":"Container"}],"title":"load-Facility"},{"id":3649,"steps":[{"id":3651,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3665,"inputs":{},"position":"90,60 90,180","target":{"id":3653}}]},{"action":"gcx:wf:core::If","id":3653,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Jurisdictn === \"2\"","source":"$theFeature.feature.attributes.Jurisdictn === \"2\""}},"position":"30,180","title":"If","transitions":[{"branch":"true","id":3667,"inputs":{},"position":"30,210 -100,210 -100,310","sourceConnector":"left","target":{"id":3655},"targetConnector":"top"},{"branch":"false","id":3675,"inputs":{},"position":"150,210 170,210 170,560 70,560 70,580","sourceConnector":"right","target":{"id":3661},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":3655,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Facility","source":"$form.state.Facility"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":1},"name":"setCurrentFormElementItem2","position":"-220,310","title":"Set Current Form Element Item","transitions":[{"id":3669,"inputs":{},"position":"-100,380 -100,460","sourceConnector":"bottom","target":{"id":3657},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":3657,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Mile_Count","source":"$form.state.Mile_Count"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"index","value":0},"name":"setCurrentFormElementItem3","position":"-220,460","title":"Set Current Form Element Item","transitions":[{"id":3673,"inputs":{},"position":"-100,530 -100,560 70,560 70,580","sourceConnector":"bottom","target":{"id":3661},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":3659,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Facility","source":"$form.state.Facility"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":1},"name":"setCurrentFormElementItem5","position":"-240,710","title":"Set Current Form Element Item","transitions":[{"id":3677,"inputs":{},"position":"-120,780 -120,850","sourceConnector":"bottom","target":{"id":3663},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3661,"inputs":{"condition":{"accessors":["$theFeature","$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":11,"index":52,"kind":"idref"}],"code":"$theFeature.feature.attributes.Jurisdictn == \"0\" || $theFeature.feature.attributes.Jurisdictn == \"H\"","source":"$theFeature.feature.attributes.Jurisdictn == \"0\" || $theFeature.feature.attributes.Jurisdictn == \"H\""}},"position":"10,580","title":"If","transitions":[{"branch":"true","id":3671,"inputs":{},"position":"10,610 -120,610 -120,710","sourceConnector":"left","target":{"id":3659},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":3663,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Mile_Count","source":"$form.state.Mile_Count"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"index","value":1},"name":"setCurrentFormElementItem6","position":"-240,850","title":"Set Current Form Element Item"}]},{"id":3683,"steps":[{"id":3684,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3689,"inputs":{},"position":"90,60 90,140","sourceConnector":"bottom","target":{"id":3688},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":3688,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":29,"kind":"idref"}],"code":"\"**\" + \"Route ID\" + \"**: \" + $theFeature.feature.attributes['Route_ID']","source":"\"**\" + \"Route ID\" + \"**: \" + $theFeature.feature.attributes['Route_ID']"}},"position":"-30,140","title":"Set Form Element Property"}],"title":"load-Route_ID"},{"id":3697,"steps":[{"id":3698,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3703,"inputs":{},"position":"90,60 90,90 160,90 160,110","sourceConnector":"bottom","target":{"id":3702},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":3702,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":33,"kind":"idref"}],"code":"\"**\" + \"From Measure\" + \"**: \" + $theFeature.feature.attributes['From_Measure']","source":"\"**\" + \"From Measure\" + \"**: \" + $theFeature.feature.attributes['From_Measure']"}},"position":"40,110","title":"Set Form Element Property"}],"title":"load-From_Measure"},{"id":3704,"steps":[{"id":3705,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3713,"inputs":{},"position":"90,60 90,120 160,120 160,140","sourceConnector":"bottom","target":{"id":3712},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":3712,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":31,"kind":"idref"}],"code":"\"**\" + \"To Measure\" + \"**: \" + $theFeature.feature.attributes['To_Measure']","source":"\"**\" + \"To Measure\" + \"**: \" + $theFeature.feature.attributes['To_Measure']"}},"position":"40,140","title":"Set Form Element Property"}],"title":"load-To_Measure"},{"id":3707,"steps":[{"id":3708,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3717,"inputs":{},"position":"90,60 90,160 50,160 50,180","sourceConnector":"bottom","target":{"id":3716},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":3716,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":27,"kind":"idref"}],"code":"\"**\" + \"Length\" + \"**: \" + $theFeature.feature.attributes['Length']","source":"\"**\" + \"Length\" + \"**: \" + $theFeature.feature.attributes['Length']"}},"position":"-70,180","title":"Set Form Element Property"}],"title":"load-Length"},{"id":3718,"steps":[{"action":"gcx:wf:core::If","id":931,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Update_Type == 'ROAD UPDATE'","source":"$theFeature.feature.attributes.Update_Type == 'ROAD UPDATE'"}},"position":"30,130","title":"If","transitions":[{"branch":"true","id":932,"inputs":{},"position":"30,160 -40,160 -40,240","sourceConnector":"left","target":{"id":3723},"targetConnector":"top"},{"branch":"false","id":936,"inputs":{},"position":"150,160 240,160 240,240","sourceConnector":"right","target":{"id":935},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":935,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":false},"position":"120,240","title":"Set Form Element Property"},{"id":3719,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3724,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":931},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":3723,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":38,"kind":"idref"}],"code":"\"**\" + \"Attributes Edited\" + \"**: \" + $theFeature.feature.attributes['Attributes_Edited']","source":"\"**\" + \"Attributes Edited\" + \"**: \" + $theFeature.feature.attributes['Attributes_Edited']"}},"position":"-160,240","title":"Set Form Element Property"}],"title":"load-Attributes_Edited"},{"id":3725,"steps":[{"id":3726,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3731,"inputs":{},"position":"90,60 90,120 100,120 100,140","sourceConnector":"bottom","target":{"id":3730},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":3730,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":34,"kind":"idref"}],"code":"\"**\" + \"Town Comments\" + \"**: \" + $theFeature.feature.attributes['Comments']","source":"\"**\" + \"Town Comments\" + \"**: \" + $theFeature.feature.attributes['Comments']"}},"position":"-20,140","title":"Set Form Element Property"}],"title":"load-Comments"},{"id":3732,"steps":[{"id":3733,"inputs":{},"position":"0,-30","purpose":"start","title":"Event","transitions":[{"id":3741,"inputs":{},"position":"90,30 90,90","sourceConnector":"bottom","target":{"id":3740},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":3737,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$status"],"annotations":[{"count":7,"index":32,"kind":"idref"}],"code":"\"**\" + \"RISA Status\" + \"**: \" + $status.result","source":"\"**\" + \"RISA Status\" + \"**: \" + $status.result"}},"position":"-40,510","title":"Set Form Element Property"},{"action":"gcx:wf:core::Switch","id":3739,"inputs":{"value":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Status","source":"$theFeature.feature.attributes.Status"}},"position":"-30,240","title":"Switch","transitions":[{"branch":"0","id":3752,"inputs":{},"position":"-30,270 -200,270 -200,370","sourceConnector":"left","target":{"id":3743},"targetConnector":"top"},{"id":3764,"inputs":{},"position":"90,300 90,380","purpose":"default","sourceConnector":"bottom","target":{"id":3758},"targetConnector":"top","title":"1"},{"branch":"2","id":3765,"inputs":{},"position":"210,270 390,270 390,380","sourceConnector":"right","target":{"id":3761},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3740,"inputs":{"expression":"Pending"},"name":"status","position":"-30,90","title":"Create Value","transitions":[{"id":3742,"inputs":{},"position":"90,160 90,240","sourceConnector":"bottom","target":{"id":3739},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3743,"inputs":{"object":{"accessors":["$status"],"annotations":[{"count":7,"index":0,"kind":"idref"}],"code":"$status","source":"$status"},"propertyName":"result","propertyValue":"Submitted"},"position":"-320,370","title":"Set Property","transitions":[{"id":3753,"inputs":{},"position":"-200,400 -200,490 80,490 80,510","sourceConnector":"bottom","target":{"id":3737},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3758,"inputs":{"object":{"accessors":["$status"],"annotations":[{"count":7,"index":0,"kind":"idref"}],"code":"$status","source":"$status"},"propertyName":"result","propertyValue":"Approved"},"position":"-30,380","title":"Set Property","transitions":[{"id":3762,"inputs":{},"position":"90,410 90,490 80,490 80,510","sourceConnector":"bottom","target":{"id":3737},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3761,"inputs":{"object":{"accessors":["$status"],"annotations":[{"count":7,"index":0,"kind":"idref"}],"code":"$status","source":"$status"},"propertyName":"result","propertyValue":"Rejected"},"position":"270,380","title":"Set Property","transitions":[{"id":3763,"inputs":{},"position":"390,410 390,490 80,490 80,510","sourceConnector":"bottom","target":{"id":3737},"targetConnector":"top"}]}],"title":"load-Status"},{"id":3802,"steps":[{"id":3803,"inputs":{},"position":"70,0","purpose":"start","title":"Event","transitions":[{"id":1091,"inputs":{},"position":"160,60 160,330","sourceConnector":"bottom","target":{"id":3811},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":3811,"inputs":{"elementName":"Jurisdictn","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$formItemsJur"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$formItemsJur.items","source":"$formItemsJur.items"}},"position":"40,330","title":"Set Form Element Items"}],"title":"populate-Jurisdictn"},{"id":3817,"steps":[{"action":"gcx:wf:core::If","id":923,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Update_Type == 'ROAD UPDATE'","source":"$theFeature.feature.attributes.Update_Type == 'ROAD UPDATE'"}},"position":"-150,350","title":"If","transitions":[{"branch":"true","id":924,"inputs":{},"position":"-150,380 -280,380 -280,470","sourceConnector":"left","target":{"id":1834},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1834,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$oldFeature"],"annotations":[{"count":11,"index":6,"kind":"idref"}],"code":"\"_\" + $oldFeature.feature.attributes.Jurisdictn + \"_\"","source":"\"_\" + $oldFeature.feature.attributes.Jurisdictn + \"_\""}},"position":"-400,470","title":"Set Form Element Property"},{"id":3818,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3823,"inputs":{},"position":"90,60 90,140","sourceConnector":"bottom","target":{"id":3824},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":3822,"inputs":{"elementName":"Jurisdictn","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Jurisdictn","source":"$theFeature.feature.attributes.Jurisdictn"}},"name":"setCurrentFormElementItem7","position":"-210,230","title":"Set Current Form Element Item","transitions":[{"id":1835,"inputs":{},"position":"-90,300 -90,350","sourceConnector":"bottom","target":{"id":923},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3824,"inputs":{"condition":{"accessors":["$theFeature","$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":11,"index":54,"kind":"idref"}],"code":"$theFeature.feature.attributes.Jurisdictn !== null && $theFeature.feature.attributes.Jurisdictn !== undefined","source":"$theFeature.feature.attributes.Jurisdictn !== null && $theFeature.feature.attributes.Jurisdictn !== undefined"}},"position":"30,140","title":"If","transitions":[{"branch":"true","id":3825,"inputs":{},"position":"30,170 -90,170 -90,230","sourceConnector":"left","target":{"id":3822},"targetConnector":"top"},{"branch":"false","id":3827,"inputs":{},"position":"150,170 240,170 240,260","sourceConnector":"right","target":{"id":3826},"targetConnector":"top"}]},{"action":"gcx:wf:forms::HideFormElement","id":3826,"inputs":{"elementName":"Jurisdictn","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"120,260","title":"Hide Form Element"}],"title":"load-Jurisdictn"},{"id":3828,"steps":[{"id":3829,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3866,"inputs":{},"position":"90,60 90,150","sourceConnector":"bottom","target":{"id":3867},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Update other attributes\n","id":3863,"inputs":{},"position":"-30,240","title":"Container"},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":3867,"inputs":{"attributeName":"Jurisdictn","attributeValue":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Jurisdictn.value","source":"$form.state.Jurisdictn.value"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-30,150","title":"Set Feature Attribute","transitions":[{"id":3868,"inputs":{},"position":"90,180 90,240","sourceConnector":"bottom","target":{"id":3863},"targetConnector":"top"}]}],"title":"change-Jurisdictn"},{"id":3833,"steps":[{"id":3835,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3849,"inputs":{},"position":"90,60 90,180","target":{"id":3837}}]},{"action":"gcx:wf:core::If","id":3837,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Jurisdictn === \"2\"","source":"$theFeature.feature.attributes.Jurisdictn === \"2\""}},"position":"30,180","title":"If","transitions":[{"branch":"true","id":3851,"inputs":{},"position":"30,210 -100,210 -100,310","sourceConnector":"left","target":{"id":3839},"targetConnector":"top"},{"branch":"false","id":3859,"inputs":{},"position":"150,210 170,210 170,560 70,560 70,580","sourceConnector":"right","target":{"id":3845},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":3839,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Facility","source":"$form.state.Facility"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":1},"name":"setCurrentFormElementItem8","position":"-220,310","title":"Set Current Form Element Item","transitions":[{"id":3853,"inputs":{},"position":"-100,380 -100,460","sourceConnector":"bottom","target":{"id":3841},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":3841,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Mile_Count","source":"$form.state.Mile_Count"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"index","value":0},"name":"setCurrentFormElementItem9","position":"-220,460","title":"Set Current Form Element Item","transitions":[{"id":3857,"inputs":{},"position":"-100,530 -100,560 70,560 70,580","sourceConnector":"bottom","target":{"id":3845},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":3843,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Facility","source":"$form.state.Facility"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":1},"name":"setCurrentFormElementItem10","position":"-240,710","title":"Set Current Form Element Item","transitions":[{"id":3861,"inputs":{},"position":"-120,780 -120,850","sourceConnector":"bottom","target":{"id":3847},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3845,"inputs":{"condition":{"accessors":["$theFeature","$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":11,"index":52,"kind":"idref"}],"code":"$theFeature.feature.attributes.Jurisdictn == \"0\" || $theFeature.feature.attributes.Jurisdictn == \"H\"","source":"$theFeature.feature.attributes.Jurisdictn == \"0\" || $theFeature.feature.attributes.Jurisdictn == \"H\""}},"position":"10,580","title":"If","transitions":[{"branch":"true","id":3855,"inputs":{},"position":"10,610 -120,610 -120,710","sourceConnector":"left","target":{"id":3843},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":3847,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Mile_Count","source":"$form.state.Mile_Count"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"index","value":1},"name":"setCurrentFormElementItem11","position":"-240,850","title":"Set Current Form Element Item"}]},{"id":3869,"steps":[{"action":"gcx:wf:core::If","id":918,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Update_Type == 'ROAD UPDATE'","source":"$theFeature.feature.attributes.Update_Type == 'ROAD UPDATE'"}},"position":"30,220","title":"If","transitions":[{"branch":"true","id":920,"inputs":{},"position":"30,250 -40,250 -40,370","sourceConnector":"left","target":{"id":1830},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1830,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$oldFeature"],"annotations":[{"count":11,"index":6,"kind":"idref"}],"code":"\"_\" + $oldFeature.feature.attributes['St_Name'] + \"_\"","source":"\"_\" + $oldFeature.feature.attributes['St_Name'] + \"_\""}},"position":"-160,370","title":"Set Form Element Property"},{"id":3870,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3875,"inputs":{},"position":"90,60 90,110","sourceConnector":"bottom","target":{"id":3874},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":3874,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes['St_Name']","source":"$theFeature.feature.attributes['St_Name']"}},"position":"-30,110","title":"Set Form Element Property","transitions":[{"id":919,"inputs":{},"position":"90,140 90,220","sourceConnector":"bottom","target":{"id":918}}]}],"title":"load-St_Name"},{"id":3876,"steps":[{"id":3877,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":3880,"inputs":{},"position":"90,60 90,150","target":{"id":3879}}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":3879,"inputs":{"attributeName":"St_Name","attributeValue":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.St_Name.value","source":"$form.state.St_Name.value"},"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"-30,150","title":"Set Feature Attribute"}],"title":"change-St_Name"},{"id":4461,"steps":[{"action":"gcx:wf:core::Log","id":1720,"inputs":{"message":{"accessors":["$filters"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$filters.state.newRoads","source":"$filters.state.newRoads"}},"position":"1670,630","title":"Log"},{"action":"gcx:wf:forms::SetFormElementProperty","id":3768,"inputs":{"elementName":"updates","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"current"},"position":"1670,-110","title":"Set Form Element Property","transitions":[{"id":3786,"inputs":{},"position":"1790,-80 1790,-30","sourceConnector":"bottom","target":{"id":3770},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3770,"inputs":{"object":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"},"propertyName":"attributes","propertyValue":{"accessors":["$filters"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$filters.state.newRoads.value.data.attributes","source":"$filters.state.newRoads.value.data.attributes"}},"position":"1670,-30","title":"Set Property","transitions":[{"id":3788,"inputs":{},"position":"1790,0 1790,60","sourceConnector":"bottom","target":{"id":3772},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureGeometry","id":3772,"inputs":{"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"},"geometry":{"accessors":["$filters"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$filters.state.newRoads.value.data.geometry","source":"$filters.state.newRoads.value.data.geometry"}},"position":"1670,60","title":"Set Feature Geometry","transitions":[{"id":3790,"inputs":{},"position":"1790,90 1790,130","sourceConnector":"bottom","target":{"id":3774},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":3774,"inputs":{"expression":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":16,"kind":"idref"}],"code":"\"OBJECTID = \" + $theFeature.feature.attributes.OBJECTID","source":"\"OBJECTID = \" + $theFeature.feature.attributes.OBJECTID"},"layerId":"New"},"name":"updateUpdates2","position":"1670,130","title":"Set Layer Definition Expression","transitions":[{"id":3792,"inputs":{},"position":"1790,200 1790,250","sourceConnector":"bottom","target":{"id":3776},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":3776,"inputs":{"expression":"1=0","layerId":"Updates"},"name":"updateNew2","position":"1670,250","title":"Set Layer Definition Expression","transitions":[{"id":3794,"inputs":{},"position":"1790,320 1790,390","sourceConnector":"bottom","target":{"id":3778},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetViewExtent","id":3778,"inputs":{"features":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"},"scale":5000},"name":"setMapExtent2","position":"1670,390","title":"Set Map Extent","transitions":[{"id":3796,"inputs":{},"position":"1790,460 1790,520","sourceConnector":"bottom","target":{"id":3780},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3780,"inputs":{"object":{"accessors":["$filterValues"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$filterValues","source":"$filterValues"},"propertyName":"result","propertyValue":{"accessors":["$filters","$filters","$filters"],"annotations":[{"count":8,"index":22,"kind":"idref"},{"count":8,"index":72,"kind":"idref"},{"count":8,"index":113,"kind":"idref"}],"code":"{ \"filterSubmissions\": $filters.state.filterSubmissions.value, \"townId\": $filters.state.townId.value, \"newRoads\": $filters.state.updates.value, \"updates\": null }","source":"{\"filterSubmissions\": $filters.state.filterSubmissions.value, \"townId\": $filters.state.townId.value, \"newRoads\": $filters.state.updates.value, \"updates\": null}"}},"position":"1670,520","title":"Set Property","transitions":[{"id":1721,"inputs":{},"position":"1790,550 1790,630","sourceConnector":"bottom","target":{"id":1720},"targetConnector":"top"}]},{"id":4463,"inputs":{},"position":"1700,-220","purpose":"start","title":"Event","transitions":[{"id":3801,"inputs":{},"position":"1790,-160 1790,-110","sourceConnector":"bottom","target":{"id":3768},"targetConnector":"top"}]}],"title":"change-newRoads"},{"id":4709,"steps":[{"action":"gcx:wf:core::Log","id":1738,"inputs":{"message":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"}},"position":"640,480","title":"Log"},{"id":4711,"inputs":{},"position":"670,-290","purpose":"start","title":"Event","transitions":[{"id":5630,"inputs":{},"position":"760,-230 760,-180","sourceConnector":"bottom","target":{"id":4747},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetViewExtent","id":4717,"inputs":{"features":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"},"scale":5000},"name":"setMapExtent1","position":"640,300","title":"Set Map Extent","transitions":[{"id":5830,"inputs":{},"position":"760,370 760,410","sourceConnector":"bottom","target":{"id":5829},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":4731,"inputs":{"object":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"},"propertyName":"attributes","propertyValue":{"accessors":["$filters"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$filters.state.updates.value.data.attributes","source":"$filters.state.updates.value.data.attributes"}},"position":"640,-100","title":"Set Property","transitions":[{"id":4767,"inputs":{},"position":"760,-70 760,-10","sourceConnector":"bottom","target":{"id":4733},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureGeometry","id":4733,"inputs":{"feature":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"},"geometry":{"accessors":["$filters"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$filters.state.updates.value.data.geometry","source":"$filters.state.updates.value.data.geometry"}},"position":"640,-10","title":"Set Feature Geometry","transitions":[{"id":4769,"inputs":{},"position":"760,20 760,60","sourceConnector":"bottom","target":{"id":4735},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":4735,"inputs":{"expression":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":16,"kind":"idref"}],"code":"\"OBJECTID = \" + $theFeature.feature.attributes.OBJECTID","source":"\"OBJECTID = \" + $theFeature.feature.attributes.OBJECTID"},"layerId":"Updates"},"name":"updateUpdates1","position":"640,60","title":"Set Layer Definition Expression","transitions":[{"id":4771,"inputs":{},"position":"760,130 760,180","sourceConnector":"bottom","target":{"id":4737},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":4737,"inputs":{"expression":"1=0","layerId":"New"},"name":"updateNew1","position":"640,180","title":"Set Layer Definition Expression","transitions":[{"id":5631,"inputs":{},"position":"760,250 760,300","sourceConnector":"bottom","target":{"id":4717},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":4747,"inputs":{"elementName":"newRoads","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"current"},"position":"640,-180","title":"Set Form Element Property","transitions":[{"id":4777,"inputs":{},"position":"760,-150 760,-100","sourceConnector":"bottom","target":{"id":4731},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":5829,"inputs":{"object":{"accessors":["$filterValues"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$filterValues","source":"$filterValues"},"propertyName":"result","propertyValue":{"accessors":["$filters","$filters","$filters"],"annotations":[{"count":8,"index":22,"kind":"idref"},{"count":8,"index":72,"kind":"idref"},{"count":8,"index":112,"kind":"idref"}],"code":"{ \"filterSubmissions\": $filters.state.filterSubmissions.value, \"townId\": $filters.state.townId.value, \"updates\": $filters.state.updates.value, \"newRoads\": null }","source":"{\"filterSubmissions\": $filters.state.filterSubmissions.value, \"townId\": $filters.state.townId.value, \"updates\": $filters.state.updates.value, \"newRoads\": null}"}},"position":"640,410","title":"Set Property","transitions":[{"id":1739,"inputs":{},"position":"760,440 760,480","sourceConnector":"bottom","target":{"id":1738},"targetConnector":"top"}]}],"title":"change-updates"},{"id":5123,"steps":[{"action":"gcx:wf:core::SetProperty","id":1575,"inputs":{"object":{"accessors":["$townLabel"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$townLabel","source":"$townLabel"},"propertyName":"result","propertyValue":{"accessors":["$filters"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$filters.state.townId.current","source":"$filters.state.townId.current"}},"position":"-450,240","title":"Set Property"},{"id":5125,"inputs":{},"position":"-420,-890","purpose":"start","title":"Event","transitions":[{"id":5165,"inputs":{},"position":"-330,-830 -330,-740","sourceConnector":"bottom","target":{"id":5127},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":5127,"inputs":{"items":{"accessors":[],"annotations":[],"code":"[\"updates\", \"newRoads\"]","source":"[\"updates\", \"newRoads\"]"}},"name":"forEachSelectorHide5","position":"-450,-740","title":"For Each","transitions":[{"id":3490,"inputs":{},"position":"-330,-620 -330,-530","sourceConnector":"bottom","target":{"id":5129},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Populates the drop down list with updates for this submission","id":5129,"inputs":{},"position":"-450,-530","title":"Populate Updates","transitions":[{"id":5167,"inputs":{},"position":"-330,-370 -330,-260","sourceConnector":"bottom","target":{"id":5131},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Populates the drop down list with new roads for this submission","id":5131,"inputs":{},"position":"-450,-260","title":"Populate New Roads","transitions":[{"id":5826,"inputs":{},"position":"-330,-100 -330,-30","sourceConnector":"bottom","target":{"id":5825},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":5825,"inputs":{"object":{"accessors":["$filterValues"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$filterValues","source":"$filterValues"},"propertyName":"result","propertyValue":{"accessors":["$filters","$filters"],"annotations":[{"count":8,"index":22,"kind":"idref"},{"count":8,"index":72,"kind":"idref"}],"code":"{ \"filterSubmissions\": $filters.state.filterSubmissions.value, \"townId\": $filters.state.townId.value, \"updates\": null, \"newRoads\": null }","source":"{\"filterSubmissions\": $filters.state.filterSubmissions.value, \"townId\": $filters.state.townId.value, \"updates\": null, \"newRoads\": null}"}},"position":"-450,-30","title":"Set Property","transitions":[{"id":1712,"inputs":{},"position":"-330,0 -330,240","sourceConnector":"bottom","target":{"id":1575},"targetConnector":"top"}]}],"title":"change-townId"},{"id":5201,"steps":[{"action":"gcx:wf:forms::SetFormElementProperty","id":5203,"inputs":{"elementName":{"accessors":["$forEachSelectorHide5"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$forEachSelectorHide5.item","source":"$forEachSelectorHide5.item"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":false},"position":"-30,280","title":"Set Form Element Property"},{"action":"gcx:wf:forms::SetFormElementProperty","id":5205,"inputs":{"elementName":{"accessors":["$forEachSelectorHide5"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$forEachSelectorHide5.item","source":"$forEachSelectorHide5.item"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"current"},"position":"-30,180","title":"Set Form Element Property","transitions":[{"id":5209,"inputs":{},"position":"90,210 90,280","sourceConnector":"bottom","target":{"id":5203},"targetConnector":"top"}]},{"id":5207,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":5211,"inputs":{},"position":"90,60 90,180","sourceConnector":"bottom","target":{"id":5205},"targetConnector":"top"}]}]},{"id":5319,"steps":[{"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","id":5321,"inputs":{"elementName":"newRoads","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$newRoads1"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$newRoads1.items","source":"$newRoads1.items"},"reset":true},"position":"-30,500","title":"Set New Road Items","transitions":[{"id":5335,"inputs":{},"position":"90,590 90,640","sourceConnector":"bottom","target":{"id":5323},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":5323,"inputs":{"condition":{"accessors":["$findNewRoads1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$findNewRoads1.features.length > 0","source":"$findNewRoads1.features.length > 0"}},"position":"30,640","title":"If","transitions":[{"branch":"true","id":5343,"inputs":{},"position":"30,670 -100,670 -100,750","sourceConnector":"left","target":{"id":5331},"targetConnector":"top"},{"branch":"false","id":5345,"inputs":{},"position":"150,670 270,670 270,750","sourceConnector":"right","target":{"id":5333},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the features into form element items to be used in the element.","id":5325,"inputs":{"features":{"accessors":["$findNewRoads1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$findNewRoads1.features","source":"$findNewRoads1.features"},"labelFieldName":"{Route_ID} - {St_Name}"},"name":"newRoads1","position":"-30,280","title":"Get Form Element Items From Features","transitions":[{"id":5337,"inputs":{},"position":"90,410 90,500","target":{"id":5321}}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Query for features.","id":5327,"inputs":{"orderByFields":"Route_ID","outFields":"*","outSpatialReference":102100,"returnGeometry":true,"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"},"where":{"accessors":["$filters","$filters"],"annotations":[{"count":8,"index":14,"kind":"idref"},{"count":8,"index":106,"kind":"idref"}],"code":"\"City = '\" + $filters.state.townId.value.data.attributes.City + \"' and Update_Type = 'NEW ROAD' and (\" + $filters.state.filterSubmissions.value + \")\"","source":"\"City = '\"  + $filters.state.townId.value.data.attributes.City + \"' and Update_Type = 'NEW ROAD' and (\" + $filters.state.filterSubmissions.value + \")\""}},"name":"findNewRoads1","position":"-30,140","title":"Query Updates","transitions":[{"id":5339,"inputs":{},"position":"90,240 90,280","target":{"id":5325}}]},{"id":5329,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":5341,"inputs":{},"position":"90,60 90,140","sourceConnector":"bottom","target":{"id":5327},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5331,"inputs":{"elementName":"newRoads","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":true},"position":"-220,750","title":"Set Form Element Property"},{"action":"gcx:wf:forms::SetFormElementProperty","id":5333,"inputs":{"elementName":"newRoads","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":false},"position":"150,750","title":"Set Form Element Property"}]},{"id":5347,"steps":[{"id":5349,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":5363,"inputs":{},"position":"90,60 90,150","sourceConnector":"bottom","target":{"id":5351},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Query for features.","id":5351,"inputs":{"orderByFields":"Route_ID","outFields":"*","outSpatialReference":102100,"returnGeometry":true,"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"},"where":{"accessors":["$filters","$filters"],"annotations":[{"count":8,"index":13,"kind":"idref"},{"count":8,"index":108,"kind":"idref"}],"code":"\"City= '\" + $filters.state.townId.value.data.attributes.City + \"' and Update_Type = 'ROAD UPDATE' and (\" + $filters.state.filterSubmissions.value + \")\"","source":"\"City= '\"  + $filters.state.townId.value.data.attributes.City + \"' and Update_Type = 'ROAD UPDATE' and (\" + $filters.state.filterSubmissions.value + \")\""}},"name":"findUpdates1","position":"-30,150","title":"Query Updates","transitions":[{"id":5365,"inputs":{},"position":"90,250 90,300","target":{"id":5353}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the features into form element items to be used in the element.","id":5353,"inputs":{"features":{"accessors":["$findUpdates1"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$findUpdates1.features","source":"$findUpdates1.features"},"labelFieldName":"{Route_ID} - {St_Name}"},"name":"updates1","position":"-30,300","title":"Get Form Element Items From Features","transitions":[{"id":5367,"inputs":{},"position":"90,430 90,500","target":{"id":5355}}]},{"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","id":5355,"inputs":{"elementName":"updates","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$updates1"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$updates1.items","source":"$updates1.items"},"reset":true},"position":"-30,500","title":"Set Update Items","transitions":[{"id":5369,"inputs":{},"position":"90,590 90,660","sourceConnector":"bottom","target":{"id":5357},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":5357,"inputs":{"condition":{"accessors":["$findUpdates1"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$findUpdates1.features.length > 0","source":"$findUpdates1.features.length > 0"}},"position":"30,660","title":"If","transitions":[{"branch":"true","id":5371,"inputs":{},"position":"30,690 -100,690 -100,810","sourceConnector":"left","target":{"id":5359},"targetConnector":"top"},{"branch":"false","id":5373,"inputs":{},"position":"150,690 240,690 240,810","sourceConnector":"right","target":{"id":5361},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5359,"inputs":{"elementName":"updates","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":true},"position":"-220,810","title":"Set Form Element Property"},{"action":"gcx:wf:forms::SetFormElementProperty","id":5361,"inputs":{"elementName":"updates","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":false},"position":"120,810","title":"Set Form Element Property"}]},{"id":5594,"steps":[{"id":5596,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":5602,"inputs":{},"position":"90,60 90,180","sourceConnector":"bottom","target":{"id":5598},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5598,"inputs":{"elementName":{"accessors":["$hideEachFilter"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$hideEachFilter.item","source":"$hideEachFilter.item"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"current"},"position":"-30,180","title":"Set Form Element Property","transitions":[{"id":5604,"inputs":{},"position":"90,210 90,280","sourceConnector":"bottom","target":{"id":5600},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5600,"inputs":{"elementName":{"accessors":["$hideEachFilter"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$hideEachFilter.item","source":"$hideEachFilter.item"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":false},"position":"-30,280","title":"Set Form Element Property"}]},{"id":5641,"steps":[{"action":"gcx:wf:core::Container","id":1729,"inputs":{},"position":"-20,190","title":"Container","transitions":[{"id":1735,"inputs":{},"position":"100,280 100,350","sourceConnector":"bottom","target":{"id":3475},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3475,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes !== undefined","source":"$theFeature.feature.attributes !== undefined"}},"position":"40,350","title":"If","transitions":[{"branch":"true","id":3476,"inputs":{},"position":"40,380 -110,380 -110,420","sourceConnector":"left","target":{"id":5654},"targetConnector":"top"}]},{"id":5642,"inputs":{},"position":"10,60","purpose":"start","title":"Event","transitions":[{"id":1727,"inputs":{},"position":"100,120 100,190","sourceConnector":"bottom","target":{"id":1729},"targetConnector":"top"}]},{"action":"gcx:wf:forms::PropagateFormEvent","id":5654,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-230,420","title":"Propagate Form Event"}],"title":"click-footer"},{"id":5716,"steps":[{"id":5718,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":5722,"inputs":{},"position":"90,60 90,140 110,140 110,160","sourceConnector":"bottom","target":{"id":5720},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5720,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Reviewer_Comments","source":"$form.state.Reviewer_Comments\n"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-10,160","title":"Set Form Element Property"}]},{"id":5724,"steps":[{"id":5726,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":5730,"inputs":{},"position":"90,60 90,140","sourceConnector":"bottom","target":{"id":5728},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5728,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Reviewer_Comments","source":"$form.state.Reviewer_Comments\n"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Reviewer_Comments","source":"$theFeature.feature.attributes.Reviewer_Comments"}},"position":"-30,140","title":"Set Form Element Property"}]},{"id":5732,"steps":[{"id":5734,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":5738,"inputs":{},"position":"90,60 90,140 110,140 110,160","sourceConnector":"bottom","target":{"id":5736},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5736,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Email","source":"$form.state.Email\n"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":[],"code":"\"**Email**: None\"","source":"\"**Email**: None\""}},"position":"-10,160","title":"Set Form Element Property"}]},{"id":5740,"steps":[{"action":"gcx:wf:arcgis::QueryAttachmentInfos","id":1886,"inputs":{"objectId":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.OBJECTID","source":"$theFeature.feature.attributes.OBJECTID"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"getAttachment1","position":"-30,310","title":"Query Attachment Infos","transitions":[{"id":1889,"inputs":{},"position":"90,380 90,410","sourceConnector":"bottom","target":{"id":1894},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1894,"inputs":{"condition":{"accessors":["$getAttachment1"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$getAttachment1.infos.length > 0","source":"$getAttachment1.infos.length > 0"}},"position":"30,410","title":"If","transitions":[{"branch":"false","id":1906,"inputs":{},"position":"150,440 170,440 170,720 -110,720 -110,740","sourceConnector":"right","target":{"id":1903},"targetConnector":"top"},{"branch":"true","id":1917,"inputs":{},"position":"30,440 -110,440 -110,640","sourceConnector":"left","target":{"id":1898},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1898,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.submissionDocuments","source":"$form.state.submissionDocuments\n"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$getAttachment1","$edits","$theFeature","$getAttachment1"],"annotations":[{"count":15,"index":23,"kind":"idref"},{"count":6,"index":62,"kind":"idref"},{"count":11,"index":84,"kind":"idref"},{"count":15,"index":144,"kind":"idref"}],"code":"\"**Attachments**: [\" + $getAttachment1.infos[0].name + \"](\" + $edits.result + \"/\" + $theFeature.feature.attributes.OBJECTID + \"/attachments/\" + $getAttachment1.infos[0].id + \")\"","source":"\"**Attachments**: [\" + $getAttachment1.infos[0].name + \"](\" + $edits.result + \"/\" + $theFeature.feature.attributes.OBJECTID + \"/attachments/\" + $getAttachment1.infos[0].id + \")\""}},"position":"-230,640","title":"Set Form Element Property","transitions":[{"id":1905,"inputs":{},"position":"-110,670 -110,740","sourceConnector":"bottom","target":{"id":1903},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::QueryAttachmentInfos","id":1903,"inputs":{"objectId":{"accessors":["$queryParentSubmission","$theFeature"],"annotations":[{"count":22,"index":0,"kind":"idref"},{"count":11,"index":31,"kind":"idref"}],"code":"$queryParentSubmission.results[$theFeature.feature.attributes.OBJECTID].features[0].attributes.OBJECTID","source":"$queryParentSubmission.results[$theFeature.feature.attributes.OBJECTID].features[0].attributes.OBJECTID"},"url":{"accessors":["$submissions"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submissions.result","source":"$submissions.result"}},"name":"getAttachment2","position":"-230,740","title":"Query Attachment Infos","transitions":[{"id":1912,"inputs":{},"position":"-110,810 -110,870","sourceConnector":"bottom","target":{"id":1909},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1909,"inputs":{"condition":{"accessors":["$getAttachment2"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$getAttachment2.infos.length > 0","source":"$getAttachment2.infos.length > 0"}},"position":"-170,870","title":"If","transitions":[{"branch":"true","id":1913,"inputs":{},"position":"-170,900 -320,900 -320,980","sourceConnector":"left","target":{"id":1911},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1911,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.submissionDocuments","source":"$form.state.submissionDocuments\n"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$form","$getAttachment2","$submissions","$queryParentSubmission","$theFeature","$getAttachment2"],"annotations":[{"count":5,"index":0,"kind":"idref"},{"count":15,"index":62,"kind":"idref"},{"count":12,"index":101,"kind":"idref"},{"count":22,"index":129,"kind":"idref"},{"count":11,"index":160,"kind":"idref"},{"count":15,"index":253,"kind":"idref"}],"code":"$form.state.submissionDocuments.description.markdown + \" [\" + $getAttachment2.infos[0].name + \"](\" + $submissions.result + \"/\" + $queryParentSubmission.results[$theFeature.feature.attributes.OBJECTID].features[0].attributes.OBJECTID + \"/attachments/\" + $getAttachment2.infos[0].id + \")\"","source":"$form.state.submissionDocuments.description.markdown + \" [\" + $getAttachment2.infos[0].name + \"](\" + $submissions.result + \"/\" + $queryParentSubmission.results[$theFeature.feature.attributes.OBJECTID].features[0].attributes.OBJECTID + \"/attachments/\" + $getAttachment2.infos[0].id + \")\""}},"position":"-440,980","title":"Set Form Element Property"},{"action":"gcx:wf:arcgis:query:RelationshipQueryTask","id":3523,"inputs":{"objectIds":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.OBJECTID","source":"$theFeature.feature.attributes.OBJECTID"},"outFields":"*","relationshipId":0,"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"queryParentSubmission","position":"-30,130","title":"Query Relationship","transitions":[{"id":3524,"inputs":{},"position":"90,200 90,240","sourceConnector":"bottom","target":{"id":5744},"targetConnector":"top"}]},{"id":5742,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":5746,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":3523},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5744,"inputs":{"elementName":{"accessors":["$form"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$form.state.Email","source":"$form.state.Email\n"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"description","propertyValue":{"accessors":["$queryParentSubmission","$theFeature"],"annotations":[{"count":22,"index":17,"kind":"idref"},{"count":11,"index":48,"kind":"idref"}],"code":"\"**Email**: <\" + $queryParentSubmission.results[$theFeature.feature.attributes.OBJECTID].features[0].attributes.Email + \">\"","source":"\"**Email**: <\" + $queryParentSubmission.results[$theFeature.feature.attributes.OBJECTID].features[0].attributes.Email + \">\""}},"position":"-30,240","title":"Set Form Element Property","transitions":[{"id":1887,"inputs":{},"position":"90,270 90,310","sourceConnector":"bottom","target":{"id":1886},"targetConnector":"top"}]}]},{"id":5776,"steps":[{"action":"gcx:wf:core::If","id":927,"inputs":{"condition":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature.attributes.Update_Type == 'ROAD UPDATE'","source":"$theFeature.feature.attributes.Update_Type == 'ROAD UPDATE'"}},"position":"-130,1360","title":"If","transitions":[{"branch":"true","id":928,"inputs":{},"position":"-130,1390 -170,1390 -170,1480","sourceConnector":"left","target":{"id":1130},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1130,"inputs":{"condition":{"accessors":["$oldFeature","$populateAttributes"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":19,"index":31,"kind":"idref"}],"code":"$oldFeature.feature.attributes[$populateAttributes.item['field']] !== \":\"","source":"$oldFeature.feature.attributes[$populateAttributes.item['field']] !== \":\""}},"position":"-230,1480","title":"If","transitions":[{"branch":"true","id":1131,"inputs":{},"position":"-230,1510 -340,1510 -340,1600","sourceConnector":"left","target":{"id":5786},"targetConnector":"top"},{"branch":"false","id":1135,"inputs":{},"position":"-110,1510 -30,1510 -30,1600","sourceConnector":"right","target":{"id":1134},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1134,"inputs":{"elementName":{"accessors":["$populateAttributes"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$populateAttributes.item['field']","source":"$populateAttributes.item['field']"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"markdown":true,"propertyName":"description","propertyValue":{"accessors":[],"code":"\"_Event currently N/A_\"","source":"\"_Event currently N/A_\""}},"position":"-150,1600","title":"Set Form Element Property"},{"id":5778,"inputs":{},"position":"0,810","purpose":"start","title":"For Each","transitions":[{"id":5796,"inputs":{},"position":"90,870 90,1010","sourceConnector":"bottom","target":{"id":5780},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":5780,"inputs":{"condition":{"accessors":["$theFeature","$populateAttributes","$populateAttributes"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":19,"index":31,"kind":"idref"},{"count":19,"index":77,"kind":"idref"}],"code":"$theFeature.feature.attributes[$populateAttributes.item['field']] != null && $populateAttributes.item['type'] == \"attribute\"","source":"$theFeature.feature.attributes[$populateAttributes.item['field']] != null && $populateAttributes.item['type'] == \"attribute\""}},"position":"30,1010","title":"If","transitions":[{"branch":"true","id":5798,"inputs":{},"position":"30,1040 -70,1040 -70,1100","sourceConnector":"left","target":{"id":5782},"targetConnector":"top"},{"branch":"false","id":5800,"inputs":{},"position":"150,1040 380,1040 380,1100","sourceConnector":"right","target":{"id":5784},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5782,"inputs":{"elementName":{"accessors":["$populateAttributes"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$populateAttributes.item['field']","source":"$populateAttributes.item['field']"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$theFeature","$populateAttributes"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":19,"index":31,"kind":"idref"}],"code":"$theFeature.feature.attributes[$populateAttributes.item['field']]","source":"$theFeature.feature.attributes[$populateAttributes.item['field']]"}},"position":"-190,1100","title":"Set Form Element Property","transitions":[{"id":5804,"inputs":{},"position":"-70,1130 -70,1160","sourceConnector":"bottom","target":{"id":5788},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":5784,"inputs":{"condition":{"accessors":["$populateAttributes"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$populateAttributes.item['type'] == \"attribute\"","source":"$populateAttributes.item['type'] == \"attribute\""}},"position":"320,1100","title":"If","transitions":[{"branch":"true","id":5810,"inputs":{},"position":"320,1130 250,1130 250,1230","sourceConnector":"left","target":{"id":5794},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5786,"inputs":{"elementName":{"accessors":["$populateAttributes"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$populateAttributes.item['field']","source":"$populateAttributes.item['field']"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"markdown":true,"propertyName":"description","propertyValue":{"accessors":["$oldFeature","$populateAttributes"],"annotations":[{"count":11,"index":6,"kind":"idref"},{"count":19,"index":37,"kind":"idref"}],"code":"\"_\" + $oldFeature.feature.attributes[$populateAttributes.item['field']] + \"_\"","source":"\"_\" + $oldFeature.feature.attributes[$populateAttributes.item['field']] + \"_\""}},"position":"-460,1600","title":"Set Form Element Property"},{"action":"gcx:wf:forms::SetFormElementProperty","id":5788,"inputs":{"elementName":{"accessors":["$populateAttributes"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$populateAttributes.item['field']","source":"$populateAttributes.item['field']"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":true},"position":"-190,1160","title":"Set Form Element Property","transitions":[{"id":5802,"inputs":{},"position":"-70,1190 -70,1230","sourceConnector":"bottom","target":{"id":5790},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":5790,"inputs":{"elementName":{"accessors":["$populateAttributes"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$populateAttributes.item['field']","source":"$populateAttributes.item['field']"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":{"accessors":["$theFeature","$populateAttributes"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":19,"index":31,"kind":"idref"}],"code":"$theFeature.feature.attributes[$populateAttributes.item['field']]","source":"$theFeature.feature.attributes[$populateAttributes.item['field']]"}},"name":"setCurrentFormElementItemDomain","position":"-190,1230","title":"Set Current Form Element Item","transitions":[{"id":5806,"inputs":{},"position":"-70,1300 -70,1360","sourceConnector":"bottom","target":{"id":927},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":5792,"inputs":{"elementName":{"accessors":["$populateAttributes"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$populateAttributes.item['field']","source":"$populateAttributes.item['field']"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"visible","propertyValue":false},"position":"130,1290","title":"Set Form Element Property"},{"action":"gcx:wf:forms::SetFormElementProperty","id":5794,"inputs":{"elementName":{"accessors":["$populateAttributes"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$populateAttributes.item['field']","source":"$populateAttributes.item['field']"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"130,1230","title":"Set Form Element Property","transitions":[{"id":5808,"inputs":{},"position":"250,1260 250,1290","sourceConnector":"bottom","target":{"id":5792},"targetConnector":"top"}]}]},{"id":5837,"steps":[{"action":"gcx:wf:core::SetProperty","id":3477,"inputs":{"object":{"accessors":["$theFeature"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$theFeature.feature","source":"$theFeature.feature"},"propertyName":"attributes"},"position":"-30,200","title":"Set Property"},{"id":5838,"inputs":{},"position":"0,-50","purpose":"start","title":"Event","transitions":[{"id":1740,"inputs":{},"position":"90,10 90,200","sourceConnector":"bottom","target":{"id":3477},"targetConnector":"top"}]}],"title":"load-header"}],"designerVersion":"5.19.0+22","forms":[{"defaults":{},"elements":{"Attributes_Edited":{"description":{"markdown":"Attributes_Edited"},"enabled":true,"index":12,"section":{"name":"fieldset2"},"title":{"markdown":""},"type":"Text","visible":true},"Comments":{"description":{"markdown":"Comments"},"enabled":true,"index":13,"section":{"name":"fieldset2"},"title":{"markdown":""},"type":"Text","visible":true},"Email":{"description":{"markdown":"No email"},"enabled":true,"index":2,"section":{"name":"fieldset1"},"type":"Text","visible":true},"F_Class":{"enabled":true,"index":21,"items":{},"section":{"name":"other"},"title":{"markdown":"Functional Classification"},"type":"DropDownList","visible":false},"Facility":{"enabled":true,"index":19,"items":{},"section":{"name":"other"},"title":{"markdown":"Facility Type"},"type":"DropDownList"},"From_Measure":{"description":{"markdown":"From_Measure"},"enabled":true,"index":9,"section":{"name":"fieldset2"},"type":"Text","visible":true},"Jurisdictn":{"enabled":true,"index":16,"items":{},"section":{"name":"attributes"},"title":{"markdown":"Jurisdiction"},"type":"DropDownList"},"Length":{"description":{"markdown":"Length"},"enabled":true,"index":11,"section":{"name":"fieldset2"},"type":"Text","visible":true},"Mile_Count":{"enabled":true,"index":20,"items":{"0":{"index":0,"label":"Yes","value":"1"},"1":{"index":1,"label":"No","value":"0"}},"section":{"name":"other"},"title":{"markdown":"Mileage Counted"},"type":"DropDownList"},"NHS":{"enabled":true,"index":22,"items":{},"section":{"name":"other"},"title":{"markdown":"NHS"},"type":"DropDownList","visible":false},"Priority":{"enabled":true,"format":{"precision":0,"step":1},"index":23,"section":{"name":"other"},"title":{"markdown":"Priority"},"type":"Number","visible":false},"Reviewer_Comments":{"enabled":true,"index":4,"section":{"name":"fieldset1"},"title":{"markdown":"Reviewer Comments"},"type":"TextArea","visible":true,"wrap":"soft"},"Route_ID":{"description":{"markdown":"Route_ID"},"enabled":true,"index":8,"section":{"name":"fieldset2"},"type":"Text","visible":true},"St_Name":{"enabled":true,"index":17,"section":{"name":"attributes"},"title":{"markdown":"Street Name"},"tooltip":"","type":"TextBox"},"Status":{"description":{"markdown":"Status"},"enabled":true,"index":14,"section":{"name":"fieldset2"},"type":"Text","visible":true},"To_Measure":{"description":{"markdown":"To_Measure"},"enabled":true,"index":10,"section":{"name":"fieldset2"},"type":"Text","visible":true},"attributes":{"enabled":true,"format":"fieldset-section","index":15,"title":{"markdown":"**Proposed Attributes**"},"type":"Section"},"fieldset1":{"enabled":true,"format":"fieldset-section","index":1,"title":{"markdown":""},"type":"Section","visible":true},"fieldset2":{"enabled":true,"format":"fieldset-section","index":7,"type":"Section","visible":true},"footer":{"enabled":true,"items":{},"section":"footer","type":"ButtonBar"},"formHeader":{"description":{"markdown":""},"enabled":true,"index":0,"title":{"markdown":"# Submission"},"type":"Text"},"header":{"section":"header","title":{"markdown":"Reviewer"},"type":"Header"},"other":{"description":{"markdown":"Leave blank if not applicable"},"enabled":true,"format":"fieldset-section","index":18,"title":{"markdown":"**Other Attributes**"},"type":"Section"},"saveRefresh":{"enabled":true,"index":5,"items":{"0":{"index":0,"label":{"markdown":"Save"},"value":"save"},"1":{"index":1,"label":{"markdown":"Refresh"},"value":"refresh"},"2":{"index":2,"label":{"markdown":"Back"},"value":"back"}},"section":{"name":"fieldset1"},"type":"ButtonBar","visible":true},"saveUpdate":{"enabled":true,"index":6,"items":{"0":{"index":0,"label":{"markdown":"Approve"},"validates":true,"value":"approve"},"1":{"index":1,"label":{"markdown":"Reject"},"validates":true,"value":"reject"}},"section":{"name":"fieldset1"},"type":"ButtonBar","visible":true},"submissionDocuments":{"description":{"markdown":"No attachment"},"enabled":true,"index":3,"section":{"name":"fieldset1"},"type":"Text","visible":true}},"id":5},{"defaults":{},"elements":{"filterHeader":{"description":{"markdown":"- Staging version\n- Submissions from 1/1/2020 - 12/31/2020 ONLY"},"enabled":true,"index":0,"title":{"markdown":"# RISA Submissions"},"type":"Text"},"filterSubmissions":{"current":"1","enabled":true,"index":2,"items":{"0":{"index":0,"label":{"markdown":"All Submissions"},"value":"1=1 AND created_date > timestamp '2020-01-01 00:00:01'"},"1":{"index":1,"label":{"markdown":"Approved"},"value":"Status = 1 AND created_date > timestamp '2020-01-01 00:00:01'"},"2":{"index":2,"label":{"markdown":"Rejected"},"value":"Status = 2 AND created_date > timestamp '2020-01-01 00:00:01'"},"3":{"index":3,"label":{"markdown":"Pending Review"},"value":"Status = 0 AND created_date > timestamp '2020-01-01 00:00:01'"}},"title":{"markdown":"RISA Status"},"type":"RadioGroup"},"footer":{"enabled":true,"items":{"0":{"index":0,"label":{"markdown":"Review"},"value":"review"}},"section":"footer","type":"ButtonBar"},"header":{"section":"header","title":{"markdown":"Reviewer"},"type":"Header"},"horizontalRule1":{"enabled":true,"index":1,"type":"HorizontalRule"},"newRoads":{"enabled":true,"index":5,"items":{},"title":{"markdown":"New Roads"},"type":"DropDownList","visible":true},"townId":{"description":{"markdown":"Select a City/Town"},"enabled":true,"index":3,"items":{},"title":{"markdown":"City/Town"},"type":"DropDownList"},"updates":{"enabled":true,"index":4,"items":{},"title":{"markdown":"Updates"},"type":"DropDownList","visible":true}},"id":5375}],"licenseInfo":{"licenseeId":"0016000001KQg99AAD"},"start":{"id":3},"transitions":[{"branch":"content","id":294,"inputs":{},"source":{"id":291},"target":{"id":293}},{"branch":"clicked$saveUpdate","id":359,"inputs":{},"source":{"id":4},"target":{"id":357}},{"branch":"content","id":407,"inputs":{},"source":{"id":402},"target":{"id":395}},{"branch":"content","id":425,"inputs":{},"source":{"id":421},"target":{"id":417}},{"branch":"try","id":640,"inputs":{},"source":{"id":632},"target":{"id":626}},{"branch":"catch","id":642,"inputs":{},"source":{"id":632},"target":{"id":618}},{"branch":"loop","id":914,"inputs":{},"source":{"id":912},"target":{"id":886}},{"branch":"loop","id":916,"inputs":{},"source":{"id":890},"target":{"id":898}},{"branch":"content","id":972,"inputs":{},"source":{"id":967},"target":{"id":970}},{"branch":"content","id":1072,"inputs":{},"source":{"id":1069},"target":{"id":1071}},{"branch":"loop","id":1139,"inputs":{},"source":{"id":1136},"target":{"id":1138}},{"branch":"loop","id":1163,"inputs":{},"source":{"id":1160},"target":{"id":1162}},{"branch":"load$header","id":1433,"inputs":{},"source":{"id":4},"target":{"id":1431}},{"branch":"content","id":1466,"inputs":{},"source":{"id":1463},"target":{"id":1465}},{"branch":"loop","id":1474,"inputs":{},"source":{"id":1467},"target":{"id":1449}},{"branch":"load$filterSubmissions","id":1492,"inputs":{},"source":{"id":5377},"target":{"id":1491}},{"branch":"loop","id":1512,"inputs":{},"source":{"id":1499},"target":{"id":1506}},{"branch":"content","id":1587,"inputs":{},"source":{"id":1579},"target":{"id":1583}},{"branch":"content","id":1638,"inputs":{},"source":{"id":1627},"target":{"id":1632}},{"branch":"content","id":1680,"inputs":{},"source":{"id":1672},"target":{"id":1679}},{"branch":"loop","id":1693,"inputs":{},"source":{"id":1687},"target":{"id":1670}},{"branch":"content","id":1696,"inputs":{},"source":{"id":1689},"target":{"id":1631}},{"branch":"content","id":1698,"inputs":{},"source":{"id":1691},"target":{"id":1584}},{"branch":"load$NHS","id":1719,"inputs":{},"source":{"id":4},"target":{"id":1718}},{"branch":"content","id":1734,"inputs":{},"source":{"id":1729},"target":{"id":1733}},{"branch":"loop","id":1749,"inputs":{},"source":{"id":1746},"target":{"id":1748}},{"branch":"loop","id":1780,"inputs":{},"source":{"id":1777},"target":{"id":1779}},{"branch":"loop","id":1784,"inputs":{},"source":{"id":1781},"target":{"id":1783}},{"branch":"clicked$saveRefresh","id":1863,"inputs":{},"source":{"id":4},"target":{"id":1862}},{"branch":"loop","id":1883,"inputs":{},"source":{"id":1875},"target":{"id":1849}},{"branch":"content","id":1904,"inputs":{},"source":{"id":1902},"target":{"id":1868}},{"branch":"loop","id":2011,"inputs":{},"source":{"id":1995},"target":{"id":1774}},{"branch":"try","id":2024,"inputs":{},"source":{"id":2021},"target":{"id":2023}},{"branch":"catch","id":2027,"inputs":{},"source":{"id":2021},"target":{"id":2026}},{"branch":"loop","id":2071,"inputs":{},"source":{"id":2068},"target":{"id":2070}},{"branch":"loop","id":2291,"inputs":{},"source":{"id":2279},"target":{"id":2289}},{"branch":"loop","id":2362,"inputs":{},"source":{"id":2340},"target":{"id":2316}},{"branch":"loop","id":2535,"inputs":{},"source":{"id":2531},"target":{"id":2410}},{"branch":"loop","id":2907,"inputs":{},"source":{"id":2904},"target":{"id":2906}},{"branch":"changed$Reviewer_Comments","id":3527,"inputs":{},"source":{"id":4},"target":{"id":3526}},{"branch":"populate$Facility","id":3544,"inputs":{},"source":{"id":4},"target":{"id":3543}},{"branch":"populate$F_Class","id":3579,"inputs":{},"source":{"id":4},"target":{"id":3578}},{"branch":"populate$NHS","id":3594,"inputs":{},"source":{"id":4},"target":{"id":3593}},{"branch":"load$Facility","id":3646,"inputs":{},"source":{"id":4},"target":{"id":3645}},{"branch":"content","id":3681,"inputs":{},"source":{"id":3679},"target":{"id":3651}},{"branch":"load$Route_ID","id":3685,"inputs":{},"source":{"id":4},"target":{"id":3684}},{"branch":"load$From_Measure","id":3699,"inputs":{},"source":{"id":4},"target":{"id":3698}},{"branch":"load$To_Measure","id":3706,"inputs":{},"source":{"id":4},"target":{"id":3705}},{"branch":"load$Length","id":3709,"inputs":{},"source":{"id":4},"target":{"id":3708}},{"branch":"load$Attributes_Edited","id":3720,"inputs":{},"source":{"id":4},"target":{"id":3719}},{"branch":"load$Comments","id":3727,"inputs":{},"source":{"id":4},"target":{"id":3726}},{"branch":"load$Status","id":3734,"inputs":{},"source":{"id":4},"target":{"id":3733}},{"branch":"populate$Jurisdictn","id":3804,"inputs":{},"source":{"id":4},"target":{"id":3803}},{"branch":"load$Jurisdictn","id":3819,"inputs":{},"source":{"id":4},"target":{"id":3818}},{"branch":"changed$Jurisdictn","id":3830,"inputs":{},"source":{"id":4},"target":{"id":3829}},{"branch":"content","id":3865,"inputs":{},"source":{"id":3863},"target":{"id":3835}},{"branch":"load$St_Name","id":3871,"inputs":{},"source":{"id":4},"target":{"id":3870}},{"branch":"changed$St_Name","id":3878,"inputs":{},"source":{"id":4},"target":{"id":3877}},{"branch":"changed$townId","id":5379,"inputs":{},"source":{"id":5377},"target":{"id":5125}},{"branch":"changed$updates","id":5381,"inputs":{},"source":{"id":5377},"target":{"id":4711}},{"branch":"changed$newRoads","id":5383,"inputs":{},"source":{"id":5377},"target":{"id":4463}},{"branch":"changed$filterSubmissions","id":5387,"inputs":{},"source":{"id":5377},"target":{"id":3443}},{"branch":"load$townId","id":5389,"inputs":{},"source":{"id":5377},"target":{"id":3213}},{"branch":"content","id":5573,"inputs":{},"source":{"id":5129},"target":{"id":5349}},{"branch":"content","id":5575,"inputs":{},"source":{"id":5131},"target":{"id":5329}},{"branch":"loop","id":5579,"inputs":{},"source":{"id":5127},"target":{"id":5207}},{"branch":"loop","id":5608,"inputs":{},"source":{"id":5606},"target":{"id":5596}},{"branch":"clicked$footer","id":5643,"inputs":{},"source":{"id":5377},"target":{"id":5642}},{"branch":"try","id":5756,"inputs":{},"source":{"id":5748},"target":{"id":5742}},{"branch":"catch","id":5758,"inputs":{},"source":{"id":5748},"target":{"id":5734}},{"branch":"try","id":5760,"inputs":{},"source":{"id":5752},"target":{"id":5726}},{"branch":"catch","id":5762,"inputs":{},"source":{"id":5752},"target":{"id":5718}},{"branch":"loop","id":5816,"inputs":{},"source":{"id":5814},"target":{"id":5778}},{"branch":"load$header","id":5839,"inputs":{},"source":{"id":5377},"target":{"id":5838}}]}