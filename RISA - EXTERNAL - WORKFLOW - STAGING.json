{"components":[{"id":2,"steps":[{"id":3,"inputs":{},"position":"-740,-1710","purpose":"start","title":"Start","transitions":[{"id":1604,"inputs":{},"position":"-650,-1650 -650,-1480","sourceConnector":"bottom","target":{"id":1686},"targetConnector":"top"}]},{"action":"gcx:wf:forms:form:DisplayForm","id":4,"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":5}}},"name":"submissionForm","position":"-770,-1080","title":"Submission Form","transitions":[{"id":1685,"inputs":{},"position":"-650,-960 -650,-910","sourceConnector":"bottom","target":{"id":368},"targetConnector":"top"}]},{"action":"gcx:wf:core::Annotation","description":"Workflow if user is adding a new street","id":84,"inputs":{},"position":"-1370,-360","title":"New Street"},{"action":"gcx:wf:core::Annotation","description":"Workflow if user is updating an existing street","id":88,"inputs":{},"position":"-400,-360","title":"Update Street"},{"action":"gcx:wf:core::If","id":90,"inputs":{"condition":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$submissionForm.result === \"addRoad\"","source":"$submissionForm.result === \"addRoad\""}},"position":"-710,-280","title":"If","transitions":[{"branch":"true","id":83,"inputs":{},"position":"-710,-250 -1240,-250 -1240,-210","sourceConnector":"left","target":{"id":99},"targetConnector":"top"},{"branch":"false","id":98,"inputs":{},"position":"-590,-250 -290,-250 -290,-180","sourceConnector":"right","target":{"id":804},"targetConnector":"top"}]},{"action":"gcx:wf:forms:form:DisplayForm","id":99,"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":100}}},"name":"newRoad","position":"-1360,-210","title":"Add Road Form","transitions":[{"id":293,"inputs":{},"position":"-1240,-90 -1240,-30","sourceConnector":"bottom","target":{"id":307},"targetConnector":"top"}]},{"action":"gcx:wf:forms:form:DisplayForm","id":102,"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":103}}},"name":"updateRoad","position":"-410,-60","title":"Update Road Form","transitions":[{"id":395,"inputs":{},"position":"-290,60 -290,100 0,100 0,230","sourceConnector":"bottom","target":{"id":394},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":307,"inputs":{"condition":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.result == \"submit\"","source":"$newRoad.result == \"submit\""}},"position":"-1300,-30","title":"If","transitions":[{"branch":"true","id":313,"inputs":{},"position":"-1300,0 -1320,0 -1320,110","sourceConnector":"left","target":{"id":314},"targetConnector":"top"},{"branch":"false","id":1446,"inputs":{},"position":"-1180,0 -1000,0 -1000,80","sourceConnector":"right","target":{"id":1445},"targetConnector":"top"}]},{"action":"gcx:wf:core::Switch","id":312,"inputs":{"value":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.state.nextOptions.value","source":"$newRoad.state.nextOptions.value"}},"position":"-1440,240","title":"Switch","transitions":[{"branch":"updateRoad","id":330,"inputs":{},"position":"-1320,300 -1320,430 160,430","sourceConnector":"bottom","target":{"id":361},"targetConnector":"left"},{"branch":"addRoad","id":334,"inputs":{},"position":"-1440,270 -1460,270 -1460,-150 -1360,-150","sourceConnector":"left","target":{"id":99},"targetConnector":"left"},{"branch":"submitQuit","id":338,"inputs":{},"position":"-1200,270 -1100,270 -1100,470","sourceConnector":"right","target":{"id":1114},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":314,"inputs":{},"position":"-1440,110","title":"Add New Road","transitions":[{"id":322,"inputs":{},"position":"-1320,200 -1320,240","sourceConnector":"bottom","target":{"id":312},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":361,"inputs":{},"name":"removeRoad","position":"160,370","title":"Remove Graphics","transitions":[{"id":367,"inputs":{},"position":"280,370 280,-135 -170,-135","sourceConnector":"top","target":{"id":804},"targetConnector":"right"}]},{"action":"gcx:wf:core::Container","id":368,"inputs":{},"name":"submitForm","position":"-770,-910","title":"Create Submission","transitions":[{"id":2542,"inputs":{},"position":"-650,-790 -650,-280","sourceConnector":"bottom","target":{"id":90},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":394,"inputs":{"condition":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.result == \"submit\"","source":"$updateRoad.result == \"submit\""}},"position":"-60,230","title":"If","transitions":[{"branch":"true","id":412,"inputs":{},"position":"-60,260 -170,255","sourceConnector":"left","target":{"id":406},"targetConnector":"right"},{"branch":"false","id":1424,"inputs":{},"position":"60,260 80,260 80,100 -290,100 -290,120","sourceConnector":"right","target":{"id":1422},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":406,"inputs":{},"position":"-410,210","title":"Add Update","transitions":[{"id":416,"inputs":{},"position":"-290,300 -290,340","sourceConnector":"bottom","target":{"id":415},"targetConnector":"top"}]},{"action":"gcx:wf:core::Switch","id":415,"inputs":{"value":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateOptions.value","source":"$updateRoad.state.updateOptions.value"}},"position":"-410,340","title":"Switch","transitions":[{"branch":"updateRoad","id":430,"inputs":{},"position":"-410,370 -430,370 -430,-135 -410,-135","sourceConnector":"left","target":{"id":804},"targetConnector":"left"},{"branch":"addRoad","id":431,"inputs":{},"position":"-290,400 -290,450 -1440,450","sourceConnector":"bottom","target":{"id":455},"targetConnector":"right"},{"branch":"submitQuit","id":1573,"inputs":{},"position":"-290,400 -290,480","sourceConnector":"bottom","target":{"id":1124},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":455,"inputs":{},"name":"removeUpdates","position":"-1680,390","title":"Remove Graphics","transitions":[{"id":459,"inputs":{},"position":"-1560,390 -1560,-150 -1360,-150","sourceConnector":"top","target":{"id":99},"targetConnector":"left"}]},{"action":"gcx:wf:core::Container","id":804,"inputs":{},"position":"-410,-180","title":"Update ","transitions":[{"id":860,"inputs":{},"position":"-290,-90 -290,-60","sourceConnector":"bottom","target":{"id":102},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1112,"inputs":{"expression":"Hello,\nThis is a message confirming your recent contribution to the MassDOT Road Inventory File. Your work will be used to improve data that is widely used and distributed throughout the commonwealth. Below is a summary of the changes you have submitted. If have any questions or would like to adjust your submission, please reach out to our GIS municipal Coordinator Jose Simo at Jose.Simo@dot.state.ma.us. \n\nAny changes that impact a municipal Chapter 90 list before 12/31 of the current year will be included in the disbursement for the next calendar year.\n\nThank you!\n\nRoad Update Summary"},"name":"editList","position":"-740,550","title":"Create Value","transitions":[{"id":1117,"inputs":{},"position":"-620,620 -620,650","sourceConnector":"bottom","target":{"id":1226},"targetConnector":"top"}]},{"action":"gcx:wf:ui::Alert","id":1114,"inputs":{"text":"Your submission has been sent to MassDOT for approval."},"position":"-1220,470","title":"Alert","transitions":[{"id":1576,"inputs":{},"position":"-1100,500 -1100,530 -620,530 -620,550","sourceConnector":"bottom","target":{"id":1112},"targetConnector":"top"}]},{"action":"gcx:wf:ui::Alert","id":1124,"inputs":{"text":"Your submission has been sent to MassDOT for approval."},"position":"-410,480","title":"Alert","transitions":[{"id":1575,"inputs":{},"position":"-290,510 -290,530 -620,530 -620,550","sourceConnector":"bottom","target":{"id":1112},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":1147,"inputs":{},"name":"tryCatch1","position":"360,720","title":"Try Catch - Email","transitions":[{"id":1292,"inputs":{},"position":"480,720 480,-1020 -530,-1020","sourceConnector":"top","target":{"id":4},"targetConnector":"right"}]},{"action":"gcx:wf:core::CreateValue","id":1184,"inputs":{"expression":"Hello,\nThis is a message confirming your recent contribution to the MassDOT Road Inventory File. Your work will be used to improve data that is widely distributed throughout the commonwealth. Below is a summary of the changes you have submitted. If have any questions or would like to adjust your submission, please reach out to our GIS municipal coordinator at dot.gisservices@dot.state.ma.us. \n\nAny changes that impact a municipal Chapter 90 list before 12/31 of the current year will be included in the disbursement for the next calendar year.\n\nThank you!\n\nRoad Update Summary"},"name":"emailText","position":"-740,780","title":"Create Email","transitions":[{"id":1188,"inputs":{},"position":"-620,850 -620,870 480,870 480,840","sourceConnector":"bottom","target":{"id":1147},"targetConnector":"bottom"}]},{"action":"gcx:wf:core::Container","id":1226,"inputs":{},"position":"-740,650","title":"Get Email String","transitions":[{"id":1157,"inputs":{},"position":"-620,740 -620,780","sourceConnector":"bottom","target":{"id":1184},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1422,"inputs":{"condition":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.result == \"ignoreAdd\"","source":"$updateRoad.result == \"ignoreAdd\""}},"position":"-350,120","title":"If","transitions":[{"branch":"false","id":425,"inputs":{},"position":"-230,150 -210,150 -210,80 -510,80 -510,-1020 -530,-1020","sourceConnector":"right","target":{"id":4},"targetConnector":"right"},{"branch":"true","id":1423,"inputs":{},"position":"-350,150 -920,150 -920,-150 -1120,-150","sourceConnector":"left","target":{"id":99},"targetConnector":"right"}]},{"action":"gcx:wf:core::If","id":1445,"inputs":{"condition":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.result == \"ignoreUpdate\"","source":"$newRoad.result == \"ignoreUpdate\""}},"position":"-1060,80","title":"If","transitions":[{"branch":"false","id":342,"inputs":{},"position":"-940,110 -790,110 -790,-1020 -770,-1020","sourceConnector":"right","target":{"id":4},"targetConnector":"left"},{"branch":"true","id":1448,"inputs":{},"position":"-1060,110 -1080,110 -1080,-200 -290,-200 -290,-180","sourceConnector":"left","target":{"id":804},"targetConnector":"top"}]},{"action":"gcx:wf:core::Annotation","description":"Creates email text based on standard text and any updates/new roads created in this submission","id":1564,"inputs":{},"position":"-470,690","title":"Create Email"},{"action":"gcx:wf:core::Annotation","description":"Creates a submission feature based on the selected town and user info. This feature will be parent to any related updates/new roads","id":1566,"inputs":{},"position":"-1050,-900","title":"Create Submission"},{"action":"gcx:wf:core::TryCatch","id":1593,"inputs":{},"name":"tryServices","position":"-770,-1280","title":"Try Catch","transitions":[{"id":1709,"inputs":{},"position":"-650,-1160 -650,-1080","sourceConnector":"bottom","target":{"id":4},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":1686,"inputs":{},"position":"-770,-1480","title":"Container","transitions":[{"id":1706,"inputs":{},"position":"-650,-1390 -650,-1280","sourceConnector":"bottom","target":{"id":1593},"targetConnector":"top"}]}]},{"id":39,"steps":[{"id":40,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":45,"inputs":{},"position":"90,60 90,110","target":{"id":42}}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Query for town names.","id":42,"inputs":{"orderByFields":"TOWN","outFields":"TOWN, TOWN_ID","returnGeometry":false,"url":{"accessors":["$towns"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$towns.result","source":"$towns.result"},"where":"OBJECTID > 0"},"name":"queryTowns","position":"-30,110","title":"Query Towns","transitions":[{"id":46,"inputs":{},"position":"90,210 90,280","target":{"id":43}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the features into form element items to be used in the element.","id":43,"inputs":{"features":{"accessors":["$queryTowns"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$queryTowns.features","source":"$queryTowns.features"},"labelFieldName":"TOWN","valueFieldName":"TOWN_ID"},"name":"formTowns","position":"-30,280","title":"Get Form Element Items From Features","transitions":[{"id":2192,"inputs":{},"position":"90,410 90,510","sourceConnector":"bottom","target":{"id":44}}]},{"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","id":44,"inputs":{"elementName":"towns","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$formTowns"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$formTowns.items","source":"$formTowns.items"}},"position":"-30,510","title":"Set Form Element Town Names"}],"title":"ArcGIS Query-towns"},{"id":97,"steps":[{"id":101,"inputs":{},"position":"420,-20","purpose":"start","title":"Event","transitions":[{"id":344,"inputs":{},"position":"510,40 510,80","sourceConnector":"bottom","target":{"id":335},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":147,"inputs":{"layerId":"townLayer"},"position":"-10,510","title":"Clear Graphics Layer"},{"action":"gcx:wf:arcgis::AddGraphicsLayerFeatures","id":329,"inputs":{"features":{"accessors":["$townFeature"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$townFeature.feature","source":"$townFeature.feature"},"layerId":"townLayer"},"name":"addTown","position":"-10,610","title":"Add Town Graphics Layer Features"},{"action":"gcx:wf:arcgis::CreateGraphic","description":"Creates a feature of the selected town","id":331,"inputs":{"geometry":{"accessors":["$findTown"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$findTown.feature.geometry","source":"$findTown.feature.geometry"},"symbol":{"accessors":["$townSymbol"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$townSymbol.symbol","source":"$townSymbol.symbol"}},"name":"townFeature","position":"-10,300","title":"Create Town Feature","transitions":[{"id":1244,"inputs":{},"position":"110,410 110,510","sourceConnector":"bottom","target":{"id":147},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SymbolFromJson","id":333,"inputs":{"json":{"accessors":[],"annotations":[],"code":"{\n    \"color\": [190, 255, 232, 20],\n    \"style\": \"esriSFSSolid\",\n    \"type\": \"esriSFS\",\n    \"outline\": {\n        \"color\": [0, 92, 230, 255],\n        \"width\": 1,\n        \"type\": \"esriSLS\",\n        \"style\": \"esriSLSSolid\"\n    }\n}","source":"{\n  \"color\": [190, 255, 232,20],\n  \"style\": \"esriSFSSolid\",\n  \"type\": \"esriSFS\",\n  \"outline\": {\n    \"color\": [0, 92, 230, 255],\n    \"width\": 1,\n    \"type\": \"esriSLS\",\n    \"style\": \"esriSLSSolid\"\n  }\n}"}},"name":"townSymbol","position":"-10,200","title":"Get Town Symbol From JSON","transitions":[{"id":1242,"inputs":{},"position":"110,270 110,300","sourceConnector":"bottom","target":{"id":331},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","id":335,"inputs":{"outFields":"*","outSpatialReference":102100,"returnGeometry":{"accessors":[],"code":"true","source":"true"},"url":{"accessors":["$towns"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$towns.result","source":"$towns.result"},"where":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":14,"kind":"idref"}],"code":"\"Town = '\" + $submissionForm.state.towns.label + \"'\"","source":" \"Town = '\" + $submissionForm.state.towns.label + \"'\""}},"name":"findTown","position":"390,80","title":"Query Town","transitions":[{"id":2360,"inputs":{},"position":"510,150 510,190","sourceConnector":"bottom","target":{"id":2359},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":2359,"inputs":{"expression":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":13,"kind":"idref"}],"code":"\"Town = '\" + $submissionForm.state.towns.label + \"'\"","source":"\"Town = '\" + $submissionForm.state.towns.label + \"'\""},"layerId":"Towns"},"name":"filterTown","position":"390,190","title":"Set Layer Definition Expression","transitions":[{"id":2513,"inputs":{},"position":"510,260 510,290","sourceConnector":"bottom","target":{"id":2512},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetViewExtent","id":2363,"inputs":{"features":{"accessors":["$findTown"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$findTown.feature","source":"$findTown.feature"},"scale":150000},"name":"setMapExtentToTown","position":"390,730","title":"Set Map Extent to Town","transitions":[{"id":2381,"inputs":{},"position":"510,800 510,830","sourceConnector":"bottom","target":{"id":2379},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":2367,"inputs":{"expression":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":13,"kind":"idref"}],"code":"\"City = '\" + $submissionForm.state.towns.value + \"'\"","source":"\"City = '\" + $submissionForm.state.towns.value + \"'\""},"layerId":"New"},"name":"filterNew","position":"390,400","title":"Set Layer Definition Expression","transitions":[{"id":2372,"inputs":{},"position":"510,470 510,510","sourceConnector":"bottom","target":{"id":2370},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":2370,"inputs":{"expression":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":13,"kind":"idref"}],"code":"\"City = '\" + $submissionForm.state.towns.value + \"'\"","source":"\"City = '\" + $submissionForm.state.towns.value + \"'\""},"layerId":"Updates"},"name":"filterUpdates","position":"390,510","title":"Set Layer Definition Expression","transitions":[{"id":2377,"inputs":{},"position":"510,580 510,620","sourceConnector":"bottom","target":{"id":2376},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":2376,"inputs":{"expression":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":13,"kind":"idref"}],"code":"\"City = '\" + $submissionForm.state.towns.value + \"'\"","source":"\"City = '\" + $submissionForm.state.towns.value + \"'\""},"layerId":"RoadInv"},"name":"filterRoads","position":"390,620","title":"Set Layer Definition Expression","transitions":[{"id":2378,"inputs":{},"position":"510,690 510,730","sourceConnector":"bottom","target":{"id":2363},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2379,"inputs":{"attributeName":"Town","attributeValue":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$submissionForm.state.towns.value","source":"$submissionForm.state.towns.value"},"feature":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"}},"position":"390,830","title":"Set Feature Attribute","transitions":[{"id":2382,"inputs":{},"position":"510,860 510,940","sourceConnector":"bottom","target":{"id":2380},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureGeometry","id":2380,"inputs":{"feature":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"},"geometry":{"accessors":["$findTown"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$findTown.feature.geometry","source":"$findTown.feature.geometry"}},"position":"390,940","title":"Set Feature Geometry"},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":2512,"inputs":{"expression":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":13,"kind":"idref"}],"code":"\"Town = '\" + $submissionForm.state.towns.value + \"'\"","source":"\"Town = '\" + $submissionForm.state.towns.value + \"'\""},"layerId":"Submissions"},"name":"filterSubmissions","position":"390,290","title":"Set Layer Definition Expression","transitions":[{"id":2514,"inputs":{},"position":"510,360 510,400","sourceConnector":"bottom","target":{"id":2367},"targetConnector":"top"}]}],"title":"change-towns"},{"id":105,"steps":[{"id":106,"inputs":{},"position":"0,-180","purpose":"start","title":"Event","transitions":[{"id":111,"inputs":{},"position":"90,-120 90,-50","target":{"id":108}}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Query for street names.","id":108,"inputs":{"groupByFieldsForStatistics":"St_Name","orderByFields":"St_Name","outFields":"St_Name","returnDistinctValues":true,"returnGeometry":false,"url":{"accessors":["$street_names"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$street_names.result","source":"$street_names.result"},"where":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":37,"kind":"idref"}],"code":"\"objectid > 0 and City_Maint = '\" + $submissionForm.state.towns.value + \"' and St_Name <> ''\"","source":" \"objectid > 0 and City_Maint = '\" + $submissionForm.state.towns.value + \"' and St_Name <> ''\""}},"name":"roadQuery","position":"-30,-50","title":"Road Query","transitions":[{"id":1844,"inputs":{},"position":"90,50 90,110","sourceConnector":"bottom","target":{"id":109},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the street names into form element items to be used in the element.","id":109,"inputs":{"features":{"accessors":["$roadQuery"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$roadQuery.features","source":"$roadQuery.features"},"labelFieldName":"{St_Name}","valueFieldName":"St_Name"},"name":"roadNames","position":"-30,110","title":"Get Form Element Items From Features","transitions":[{"id":1437,"inputs":{},"position":"90,240 90,330","sourceConnector":"bottom","target":{"id":2183},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","id":110,"inputs":{"elementName":"updateName","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$roadNames"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$roadNames.items","source":"$roadNames.items"}},"position":"-30,410","title":"Set Form Element Items"},{"action":"gcx:wf:core::AddItem","id":2183,"inputs":{"collection":{"accessors":["$roadNames"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$roadNames.items","source":"$roadNames.items"},"item":"No Name"},"position":"-30,330","title":"Add Item","transitions":[{"id":2184,"inputs":{},"position":"90,360 90,410","sourceConnector":"bottom","target":{"id":110},"targetConnector":"top"}]}],"title":"ArcGIS Query-roadName"},{"id":225,"steps":[{"id":226,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1056,"inputs":{},"position":"90,60 90,250","sourceConnector":"bottom","target":{"id":259},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Add all selected attribute fields to the form","id":244,"inputs":{"items":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.value.items","source":"$updateRoad.state.attributes.value.items"}},"name":"forEachAttribute","position":"-420,1150","title":"For Each","transitions":[{"id":1927,"inputs":{},"position":"-300,1310 -300,1380","sourceConnector":"bottom","target":{"id":1947},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Remove all attribute fields from the form","id":259,"inputs":{"items":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.items","source":"$updateRoad.state.attributes.items"}},"name":"removeFields","position":"-30,250","title":"For Each","transitions":[{"id":505,"inputs":{},"position":"90,410 90,1010","sourceConnector":"bottom","target":{"id":1938},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Gets attribute set for selected segment and populates fields that are homogeneous throughout","id":1245,"inputs":{},"name":"updateAttributeSet2","position":"-1310,800","title":"Get Attribute Set"},{"action":"gcx:wf:forms::ShowFormElement","id":1926,"inputs":{"elementName":"buttonsUpdate","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-420,1450","title":"Show Form Element","transitions":[{"id":2064,"inputs":{},"position":"-300,1480 -300,1580","sourceConnector":"bottom","target":{"id":2063},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1938,"inputs":{"condition":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.value !== undefined","source":"$updateRoad.state.attributes.value !== undefined"}},"position":"30,1010","title":"If","transitions":[{"branch":"false","id":1944,"inputs":{},"position":"150,1040 330,1040 330,1220","sourceConnector":"right","target":{"id":1959},"targetConnector":"top"},{"branch":"true","id":1945,"inputs":{},"position":"30,1040 -300,1040 -300,1150","sourceConnector":"left","target":{"id":244},"targetConnector":"top"}]},{"action":"gcx:wf:ui::Alert","id":1939,"inputs":{"text":"Please select at least one attribute to update or indicate if road requires a geometry update"},"position":"380,1430","title":"Alert","transitions":[{"id":2072,"inputs":{},"position":"500,1460 500,1570","sourceConnector":"bottom","target":{"id":2071},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1947,"inputs":{"message":"Allow submit"},"position":"-420,1380","title":"Log","transitions":[{"id":1949,"inputs":{},"position":"-300,1410 -300,1450","sourceConnector":"bottom","target":{"id":1926},"targetConnector":"top"}]},{"action":"gcx:wf:forms::HideFormElement","id":1953,"inputs":{"elementName":"buttonsUpdate","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"380,1370","title":"Hide Form Element","transitions":[{"id":1955,"inputs":{},"position":"500,1400 500,1430","sourceConnector":"bottom","target":{"id":1939},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1959,"inputs":{"condition":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.GeoUpdate.value === '1'","source":"$updateRoad.state.GeoUpdate.value === '1'"}},"position":"270,1220","title":"If","transitions":[{"branch":"false","id":1960,"inputs":{},"position":"390,1250 500,1250 500,1370","sourceConnector":"right","target":{"id":1953},"targetConnector":"top"},{"branch":"true","id":1973,"inputs":{},"position":"270,1250 120,1250 120,1370","sourceConnector":"left","target":{"id":1972},"targetConnector":"top"}]},{"action":"gcx:wf:forms::ShowFormElement","id":1965,"inputs":{"elementName":"buttonsUpdate","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"0,1440","title":"Show Form Element","transitions":[{"id":2068,"inputs":{},"position":"120,1470 120,1580","sourceConnector":"bottom","target":{"id":2067},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1972,"inputs":{"message":"Allow submit"},"position":"0,1370","title":"Log","transitions":[{"id":1975,"inputs":{},"position":"120,1400 120,1440","sourceConnector":"bottom","target":{"id":1965},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2063,"inputs":{"object":{"accessors":["$submittable"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submittable","source":"$submittable"},"propertyName":"result","propertyValue":"attributes"},"position":"-420,1580","title":"Set Property","transitions":[{"id":2076,"inputs":{},"position":"-300,1610 -300,1900 120,1900 120,1920","sourceConnector":"bottom","target":{"id":2075},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2067,"inputs":{"object":{"accessors":["$submittable"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submittable","source":"$submittable"},"propertyName":"result","propertyValue":"geomonly"},"position":"0,1580","title":"Set Property","transitions":[{"id":2077,"inputs":{},"position":"120,1610 120,1920","sourceConnector":"bottom","target":{"id":2075},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2071,"inputs":{"object":{"accessors":["$submittable"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submittable","source":"$submittable"},"propertyName":"result","propertyValue":false},"position":"380,1570","title":"Set Property","transitions":[{"id":2078,"inputs":{},"position":"500,1600 500,1900 120,1900 120,1920","sourceConnector":"bottom","target":{"id":2075},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":2075,"inputs":{"message":{"accessors":["$submittable"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submittable.result","source":"$submittable.result"}},"position":"0,1920","title":"Log"}],"title":"click-buttonBar1"},{"id":230,"steps":[{"action":"gcx:wf:forms::ShowFormElement","id":232,"inputs":{"elementName":{"accessors":["$forEachAttribute"],"annotations":[{"count":17,"index":11,"kind":"idref"}],"code":"\"update\" + $forEachAttribute.item.value","source":"\"update\" + $forEachAttribute.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"name":"showField","position":"-390,80","title":"Show Form Element","transitions":[{"id":1482,"inputs":{},"position":"-270,140 -270,220","sourceConnector":"bottom","target":{"id":1481},"targetConnector":"top"}]},{"id":237,"inputs":{},"position":"-360,-30","purpose":"start","title":"For Each","transitions":[{"id":504,"inputs":{},"position":"-270,30 -270,80","sourceConnector":"bottom","target":{"id":232},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1481,"inputs":{"elementName":{"accessors":["$forEachAttribute"],"annotations":[{"count":17,"index":11,"kind":"idref"}],"code":"\"update\" + $forEachAttribute.item.value","source":"\"update\" + $forEachAttribute.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"require","propertyValue":true},"position":"-390,220","title":"Set Form Element Property","transitions":[{"id":1492,"inputs":{},"position":"-270,250 -270,340","sourceConnector":"bottom","target":{"id":1491},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1491,"inputs":{"message":{"accessors":["$forEachAttribute"],"annotations":[{"count":17,"index":11,"kind":"idref"}],"code":"\"update\" + $forEachAttribute.item.value","source":"\"update\" + $forEachAttribute.item.value"}},"position":"-390,340","title":"Log"}]},{"id":260,"steps":[{"id":263,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1061,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":266},"targetConnector":"top"}]},{"action":"gcx:wf:forms::HideFormElement","id":266,"inputs":{"elementName":{"accessors":["$removeFields"],"annotations":[{"count":13,"index":11,"kind":"idref"}],"code":"\"update\" + $removeFields.item.value","source":"\"update\" + $removeFields.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"name":"hideField","position":"-30,130","title":"Hide Form Element","transitions":[{"id":1430,"inputs":{},"position":"90,190 90,240","sourceConnector":"bottom","target":{"id":1428},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1428,"inputs":{"elementName":{"accessors":["$removeFields"],"annotations":[{"count":13,"index":11,"kind":"idref"}],"code":"\"update\" + $removeFields.item.value","source":"\"update\" + $removeFields.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-30,240","title":"Set Form Element Property","transitions":[{"id":1486,"inputs":{},"position":"90,270 90,350","sourceConnector":"bottom","target":{"id":1558},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1485,"inputs":{"elementName":{"accessors":["$removeFields"],"annotations":[{"count":13,"index":11,"kind":"idref"}],"code":"\"update\" + $removeFields.item.value","source":"\"update\" + $removeFields.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"require","propertyValue":false},"position":"-30,480","title":"Set Form Element Property","transitions":[{"id":1541,"inputs":{},"position":"90,510 90,570","sourceConnector":"bottom","target":{"id":1540},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1540,"inputs":{"message":{"accessors":["$removeFields"],"annotations":[{"count":13,"index":11,"kind":"idref"}],"code":"\"update\" + $removeFields.item.value","source":"\"update\" + $removeFields.item.value"}},"position":"-30,570","title":"Log"},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":1558,"inputs":{"elementName":{"accessors":["$removeFields"],"annotations":[{"count":13,"index":11,"kind":"idref"}],"code":"\"update\" + $removeFields.item.value","source":"\"update\" + $removeFields.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"index","value":0},"name":"setCurrentFormElementItem5","position":"-30,350","title":"Set Current Form Element Item","transitions":[{"id":1559,"inputs":{},"position":"90,410 90,480","sourceConnector":"bottom","target":{"id":1485},"targetConnector":"top"}]}]},{"id":275,"steps":[{"id":276,"inputs":{},"position":"-300,-1260","purpose":"start","title":"Event","transitions":[{"id":1513,"inputs":{},"position":"-210,-1200 -210,-1080","sourceConnector":"bottom","target":{"id":1298},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1047,"inputs":{"attributeName":"St_Name","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateName.value","source":"$updateRoad.state.updateName.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-330,-880","title":"Set Feature Attribute","transitions":[{"id":1317,"inputs":{},"position":"-210,-850 -210,-760","sourceConnector":"bottom","target":{"id":1049},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1049,"inputs":{"attributeName":"Route_ID","attributeValue":{"accessors":["$runDisplaySelectedRoad"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$runDisplaySelectedRoad.result.selectedFeatureID","source":"$runDisplaySelectedRoad.result.selectedFeatureID"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-330,-760","title":"Set Feature Attribute","transitions":[{"id":1321,"inputs":{},"position":"-210,-730 -210,-650","sourceConnector":"bottom","target":{"id":1320},"targetConnector":"top"}]},{"action":"gcx:wf:core::RunWorkflow","id":1298,"inputs":{"arguments":{"accessors":["$submissionForm","$updateRoad"],"annotations":[{"count":15,"index":10,"kind":"idref"},{"count":11,"index":56,"kind":"idref"}],"code":"{\n    \"town\": $submissionForm.state.towns.value,\n    \"st_name\": $updateRoad.state.updateName.value\n}","source":"{\n\"town\": $submissionForm.state.towns.value,\n\"st_name\": $updateRoad.state.updateName.value\n}"},"url":"https://massdot.maps.arcgis.com/home/item.html?id=0300fbbf212c468f80b3016522008f8d"},"name":"runDisplaySelectedRoad","position":"-330,-1080","title":"Run Workflow","transitions":[{"id":1306,"inputs":{},"position":"-210,-1020 -210,-990","sourceConnector":"bottom","target":{"id":1305},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1305,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateGeom.state","source":"$updateRoad.state.updateGeom.state"}},"position":"-330,-990","title":"Clear Collection","transitions":[{"id":1316,"inputs":{},"position":"-210,-960 -210,-880","sourceConnector":"bottom","target":{"id":1047},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureGeometry","id":1320,"inputs":{"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"},"geometry":{"accessors":["$runDisplaySelectedRoad"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$runDisplaySelectedRoad.result.selectedFeatureGeom","source":"$runDisplaySelectedRoad.result.selectedFeatureGeom"}},"position":"-330,-650","title":"Set Feature Geometry","transitions":[{"id":1480,"inputs":{},"position":"-210,-620 -210,-550","sourceConnector":"bottom","target":{"id":1528},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Remove all attribute fields from the form","id":1477,"inputs":{"items":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.items","source":"$updateRoad.state.attributes.items"}},"name":"removeFields2","position":"-330,-460","title":"For Each","transitions":[{"id":1682,"inputs":{},"position":"-210,-300 -210,-240","sourceConnector":"bottom","target":{"id":1669},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1528,"inputs":{"message":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-330,-550","title":"Log","transitions":[{"id":1529,"inputs":{},"position":"-210,-520 -210,-460","sourceConnector":"bottom","target":{"id":1477},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Query for street names.","id":1669,"inputs":{"groupByFieldsForStatistics":"St_Name","orderByFields":"St_Name","outFields":"St_Name","returnDistinctValues":true,"returnGeometry":false,"url":{"accessors":["$street_names"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$street_names.result","source":"$street_names.result"},"where":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":37,"kind":"idref"}],"code":"\"objectid > 0 and City_Maint = '\" + $submissionForm.state.towns.value + \"' and St_Name <> ''\"","source":" \"objectid > 0 and City_Maint = '\" + $submissionForm.state.towns.value + \"' and St_Name <> ''\""}},"name":"roadQuery1","position":"-330,-240","title":"Road Query","transitions":[{"id":1679,"inputs":{},"position":"-210,-150 -210,-50","sourceConnector":"bottom","target":{"id":1675},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the street names into form element items to be used in the element.","id":1671,"inputs":{"features":{"accessors":["$roadQuery1"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$roadQuery1.features","source":"$roadQuery1.features"},"labelFieldName":"{St_Name}","valueFieldName":"St_Name"},"name":"roadNames1","position":"-330,30","title":"Get Form Element Items From Features","transitions":[{"id":1677,"inputs":{},"position":"-210,160 -210,190","sourceConnector":"bottom","target":{"id":1673},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","id":1673,"inputs":{"elementName":"updateName","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$roadNames1"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$roadNames1.items","source":"$roadNames1.items"}},"position":"-330,190","title":"Set Form Element Items"},{"action":"gcx:wf:core::Log","id":1675,"inputs":{"message":{"accessors":["$roadQuery1"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$roadQuery1.features[5]","source":"$roadQuery1.features[5]"}},"position":"-330,-50","title":"Log","transitions":[{"id":1681,"inputs":{},"position":"-210,-20 -210,30","sourceConnector":"bottom","target":{"id":1671},"targetConnector":"top"}]}],"title":"change-roadName"},{"id":287,"steps":[{"id":291,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1074,"inputs":{},"position":"90,60 90,120","sourceConnector":"bottom","target":{"id":1054},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::LengthEngineTask","id":1054,"inputs":{"geodesic":true,"geometry":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.state.newGeom.value.geometry[0]","source":"$newRoad.state.newGeom.value.geometry[0]"},"unit":"miles"},"name":"newLength","position":"-30,120","title":"Calculate Length","transitions":[{"id":1075,"inputs":{},"position":"90,190 90,240","sourceConnector":"bottom","target":{"id":1068},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1068,"inputs":{"elementName":"newLength","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$newLength"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$newLength.length","source":"$newLength.length"}},"position":"-30,240","title":"Set Form Element Property","transitions":[{"id":2032,"inputs":{},"position":"90,270 90,340","sourceConnector":"bottom","target":{"id":2030},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetMap","id":2030,"inputs":{},"name":"map1","position":"-30,340","title":"Get Map"}],"title":"change-geometryPicker1"},{"id":301,"steps":[{"id":302,"inputs":{},"position":"0,-260","purpose":"start","title":"Event","transitions":[{"id":972,"inputs":{},"position":"90,-200 90,-130","sourceConnector":"bottom","target":{"id":867},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":733,"inputs":{},"name":"updateGeomDrawSegment2","position":"-30,150","title":"Container"},{"action":"gcx:wf:core::Container","description":"Gets attribute set for selected segment and populates fields that are homogeneous throughout","id":813,"inputs":{},"name":"updateAttributeSet","position":"-30,350","title":"Get Attribute Set"},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":867,"inputs":{"attributeName":"To_Measure","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateTo_Measure.value.numeric","source":"$updateRoad.state.updateTo_Measure.value.numeric"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,-130","title":"Set Feature Attribute","transitions":[{"id":876,"inputs":{},"position":"90,-100 90,-60","sourceConnector":"bottom","target":{"id":966},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":903,"inputs":{"attributeName":"Length","attributeValue":{"accessors":["$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":11,"index":51,"kind":"idref"}],"code":"$updateRoad.state.updateTo_Measure.value.numeric - $updateRoad.state.updateFrom_Measure.value.numeric","source":"$updateRoad.state.updateTo_Measure.value.numeric - $updateRoad.state.updateFrom_Measure.value.numeric"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,10","title":"Set Feature Attribute","transitions":[{"id":904,"inputs":{},"position":"90,40 90,80","sourceConnector":"bottom","target":{"id":921},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":921,"inputs":{"attributeName":"From_Measure","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateFrom_Measure.value.numeric","source":"$updateRoad.state.updateFrom_Measure.value.numeric"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,80","title":"Set Feature Attribute","transitions":[{"id":831,"inputs":{},"position":"90,110 90,150","sourceConnector":"bottom","target":{"id":733},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":966,"inputs":{"elementName":"updateLength","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":11,"index":51,"kind":"idref"}],"code":"$updateRoad.state.updateTo_Measure.value.numeric - $updateRoad.state.updateFrom_Measure.value.numeric","source":"$updateRoad.state.updateTo_Measure.value.numeric - $updateRoad.state.updateFrom_Measure.value.numeric"}},"position":"-30,-60","title":"Set Form Element Property","transitions":[{"id":736,"inputs":{},"position":"90,-30 90,10","sourceConnector":"bottom","target":{"id":903},"targetConnector":"top"}]}],"title":"change-toMile"},{"id":315,"steps":[{"id":318,"inputs":{},"position":"0,-490","purpose":"start","title":"Container","transitions":[{"id":1860,"inputs":{},"position":"90,-430 90,-340","sourceConnector":"bottom","target":{"id":1101},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":388,"inputs":{"attributes":{"accessors":["$newRouteNumber","$newRouteNumber","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$newRoad","$submissionForm","$theSubmissionFeature","$theSubmissionFeature","$newRoad","$newRoad","$newRoad"],"annotations":[{"count":15,"index":20,"kind":"idref"},{"count":15,"index":89,"kind":"idref"},{"count":8,"index":149,"kind":"idref"},{"count":8,"index":196,"kind":"idref"},{"count":8,"index":246,"kind":"idref"},{"count":8,"index":315,"kind":"idref"},{"count":8,"index":365,"kind":"idref"},{"count":8,"index":419,"kind":"idref"},{"count":8,"index":468,"kind":"idref"},{"count":8,"index":525,"kind":"idref"},{"count":8,"index":575,"kind":"idref"},{"count":8,"index":633,"kind":"idref"},{"count":8,"index":691,"kind":"idref"},{"count":8,"index":741,"kind":"idref"},{"count":8,"index":799,"kind":"idref"},{"count":8,"index":843,"kind":"idref"},{"count":8,"index":887,"kind":"idref"},{"count":8,"index":946,"kind":"idref"},{"count":8,"index":1003,"kind":"idref"},{"count":8,"index":1052,"kind":"idref"},{"count":8,"index":1105,"kind":"idref"},{"count":8,"index":1163,"kind":"idref"},{"count":8,"index":1210,"kind":"idref"},{"count":8,"index":1256,"kind":"idref"},{"count":8,"index":1305,"kind":"idref"},{"count":8,"index":1355,"kind":"idref"},{"count":8,"index":1413,"kind":"idref"},{"count":8,"index":1463,"kind":"idref"},{"count":15,"index":1507,"kind":"idref"},{"count":21,"index":1586,"kind":"idref"},{"count":21,"index":1658,"kind":"idref"},{"count":8,"index":1759,"kind":"idref"},{"count":8,"index":1817,"kind":"idref"},{"count":8,"index":1867,"kind":"idref"}],"code":"{\n    \"Route_ID\": 'L' + $newRouteNumber.result + ' NB',\n    \"Route_System\": 'L',\n    \"Route_Number\": $newRouteNumber.result,\n    \"Route_Direction\": 'NB',\n    \"St_Name\": $newRoad.state.newSt_Name.value,\n    \"Fm_St_Name\": $newRoad.state.newFm_St_Name.value,\n    \"To_St_Name\": $newRoad.state.newTo_St_Name.value,\n    \"From_Measure\": 0,\n    \"To_Measure\": $newRoad.state.newLength.value.numeric,\n    \"Length\": $newRoad.state.newLength.value.numeric,\n    \"Jurisdictn\": $newRoad.state.newJurisdictn.value,\n    \"Num_Lanes\": $newRoad.state.newNum_Lanes.value.numeric,\n    \"Surface_Tp\": $newRoad.state.newSurface_Tp.value,\n    \"Surface_Wd\": $newRoad.state.newSurface_Wd.value.numeric,\n    \"Shldr_Rt_W\": $newRoad.state.newShldr_Rt_W.value.numeric,\n    \"Shldr_Rt_T\": $newRoad.state.newShldr_Rt_T.value,\n    \"Shldr_Lt_W\": $newRoad.state.newShldr_Lt_W.value.numeric,\n    \"Shldr_Lt_T\": $newRoad.state.newShldr_Lt_T.value,\n    \"Curb\": $newRoad.state.newCurb.value,\n    \"Lt_Sidewlk\": $newRoad.state.newLt_Sidewlk.value.numeric,\n    \"Rt_Sidewlk\": $newRoad.state.newRt_Sidewlk.value.numeric,\n    \"Operation\": $newRoad.state.newOperation.value,\n    \"Speed_Lim\": $newRoad.state.newSpeed.value.numeric,\n    \"ROW_Width\": $newRoad.state.newROW_Width.value.numeric,\n    \"Struct_Cnd\": $newRoad.state.newStruct_Cnd.value,\n    \"Terrain\": $newRoad.state.newTerrain.value,\n    \"Left_Cond\": $newRoad.state.newLeft_Cond.value,\n    \"Right_Cond\": $newRoad.state.newRight_Cond.value,\n    \"Path_Width\": $newRoad.state.newPath_Width.value.numeric,\n    \"Pd_Sf_Type\": $newRoad.state.newPd_Sf_Type.value,\n    \"Pd_Fc_Type\": $newRoad.state.newPd_Fc_Type.value,\n    \"City\": $submissionForm.state.towns.value,\n    \"Update_Type\": \"NEW ROAD\",\n    \"SubmissionID\": $theSubmissionFeature.feature.attributes.SubmissionID,\n    \"Submission_ID\": $theSubmissionFeature.feature.attributes.SubmissionID,\n    \"Status\": 0,\n    \"Comments\": 'From location: ' + $newRoad.state.newFm_St_Name.value + ' To location: ' + $newRoad.state.newTo_St_Name.value + ' Notes: ' + $newRoad.state.newNotes.value\n}","source":"{\n\"Route_ID\": 'L' + $newRouteNumber.result + ' NB',\n\"Route_System\": 'L',\n\"Route_Number\": $newRouteNumber.result,\n\"Route_Direction\": 'NB',\n\"St_Name\": $newRoad.state.newSt_Name.value,\n\"Fm_St_Name\": $newRoad.state.newFm_St_Name.value,\n\"To_St_Name\": $newRoad.state.newTo_St_Name.value,\n\"From_Measure\": 0,\n\"To_Measure\": $newRoad.state.newLength.value.numeric,\n\"Length\": $newRoad.state.newLength.value.numeric,\n\"Jurisdictn\": $newRoad.state.newJurisdictn.value,\n\"Num_Lanes\": $newRoad.state.newNum_Lanes.value.numeric,\n\"Surface_Tp\": $newRoad.state.newSurface_Tp.value,\n\"Surface_Wd\": $newRoad.state.newSurface_Wd.value.numeric,\n\"Shldr_Rt_W\": $newRoad.state.newShldr_Rt_W.value.numeric,\n\"Shldr_Rt_T\": $newRoad.state.newShldr_Rt_T.value,\n\"Shldr_Lt_W\": $newRoad.state.newShldr_Lt_W.value.numeric,\n\"Shldr_Lt_T\": $newRoad.state.newShldr_Lt_T.value,\n\"Curb\": $newRoad.state.newCurb.value,\n\"Lt_Sidewlk\": $newRoad.state.newLt_Sidewlk.value.numeric, \n\"Rt_Sidewlk\": $newRoad.state.newRt_Sidewlk.value.numeric,\n\"Operation\": $newRoad.state.newOperation.value, \n\"Speed_Lim\": $newRoad.state.newSpeed.value.numeric, \n\"ROW_Width\": $newRoad.state.newROW_Width.value.numeric, \n\"Struct_Cnd\": $newRoad.state.newStruct_Cnd.value,\n\"Terrain\": $newRoad.state.newTerrain.value,\n\"Left_Cond\": $newRoad.state.newLeft_Cond.value,\n\"Right_Cond\": $newRoad.state.newRight_Cond.value,\n\"Path_Width\": $newRoad.state.newPath_Width.value.numeric,\n\"Pd_Sf_Type\": $newRoad.state.newPd_Sf_Type.value,\n\"Pd_Fc_Type\": $newRoad.state.newPd_Fc_Type.value,\n\"City\": $submissionForm.state.towns.value,\n\"Update_Type\": \"NEW ROAD\", \n\"SubmissionID\": $theSubmissionFeature.feature.attributes.SubmissionID,\n\"Submission_ID\": $theSubmissionFeature.feature.attributes.SubmissionID, \n\"Status\": 0,\n\"Comments\": 'From location: ' + $newRoad.state.newFm_St_Name.value  +  ' To location: ' + $newRoad.state.newTo_St_Name.value + ' Notes: ' + $newRoad.state.newNotes.value\n}\n"},"geometry":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.state.newGeom.value.geometry[0]","source":"$newRoad.state.newGeom.value.geometry[0]"}},"name":"createRoadFeature","position":"-30,-50","title":"Create Feature","transitions":[{"id":1793,"inputs":{},"position":"90,20 90,100","sourceConnector":"bottom","target":{"id":1796},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":774,"inputs":{"condition":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.state.newFile.value != undefined","source":"$newRoad.state.newFile.value != undefined"}},"position":"30,780","title":"If","transitions":[{"branch":"true","id":797,"inputs":{},"position":"30,810 -220,810 -220,910","sourceConnector":"left","target":{"id":1921},"targetConnector":"top"},{"branch":"false","id":2039,"inputs":{},"position":"150,810 170,810 170,1160 90,1160 90,1180","sourceConnector":"right","target":{"id":2037}}]},{"action":"gcx:wf:arcgis:query:QueryTask","id":1101,"inputs":{"orderByFields":"Route_number DESC","outFields":"Route_number","returnGeometry":false,"url":{"accessors":["$redline"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$redline.result","source":"$redline.result"},"where":"Route_System = 'L' and Route_number LIKE '7_%_%_%_%_%'"},"name":"getmax","position":"-30,-340","title":"Query Layer","transitions":[{"id":1107,"inputs":{},"position":"90,-270 90,-190","sourceConnector":"bottom","target":{"id":1118},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1118,"inputs":{"expression":{"accessors":["parseInt","$getmax"],"annotations":[{"count":8,"index":0,"kind":"idref"},{"count":7,"index":9,"kind":"idref"}],"code":"parseInt($getmax.feature.attributes.Route_Number) + 1","source":"parseInt($getmax.feature.attributes.Route_Number) + 1"}},"name":"newRouteNumber","position":"-30,-190","title":"Create Value","transitions":[{"id":1126,"inputs":{},"position":"90,-120 90,-50","sourceConnector":"bottom","target":{"id":388},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":1222,"inputs":{"attributes":{"accessors":["$newRouteNumber","$newRouteNumber","$newRoad","$newRouteNumber"],"annotations":[{"count":15,"index":20,"kind":"idref"},{"count":15,"index":89,"kind":"idref"},{"count":8,"index":210,"kind":"idref"},{"count":15,"index":276,"kind":"idref"}],"code":"{\n    \"Route_ID\": 'L' + $newRouteNumber.result + ' NB',\n    \"Route_System\": 'L',\n    \"Route_Number\": $newRouteNumber.result,\n    \"Route_Direction\": 'NB',\n    \"Route_Type\": 1,\n    \"Route_Qualifier\": 7,\n    \"From_Measure\": 0,\n    \"To_Measure\": $newRoad.state.newLength.value.numeric,\n    \"Alternate_Route_Number\": $newRouteNumber.result,\n}","source":"{\n\"Route_ID\": 'L' + $newRouteNumber.result + ' NB',\n\"Route_System\": 'L',\n\"Route_Number\": $newRouteNumber.result,\n\"Route_Direction\": 'NB',\n\"Route_Type\": 1,\n\"Route_Qualifier\": 7,\n\"From_Measure\": 0,\n\"To_Measure\": $newRoad.state.newLength.value.numeric,\n\"Alternate_Route_Number\": $newRouteNumber.result,\n}"},"geometry":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.state.newGeom.value.geometry[0]","source":"$newRoad.state.newGeom.value.geometry[0]"}},"name":"createRedline","position":"-30,290","title":"Create Feature","transitions":[{"id":1220,"inputs":{},"position":"90,360 90,460","sourceConnector":"bottom","target":{"id":1888},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":1796,"inputs":{},"name":"addNewRoad","position":"-30,100","title":"Try Catch","transitions":[{"id":1813,"inputs":{},"position":"90,220 90,290","sourceConnector":"bottom","target":{"id":1222},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1863,"inputs":{"elementName":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.state.newGeom","source":"$newRoad.state.newGeom"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-30,620","title":"Set Form Element Property","transitions":[{"id":1867,"inputs":{},"position":"90,650 90,710","sourceConnector":"bottom","target":{"id":1865},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1865,"inputs":{"message":{"accessors":[],"code":"\"CLEARING GRAPHICS\"","source":"\"CLEARING GRAPHICS\""}},"position":"-30,710","title":"Log","transitions":[{"id":1868,"inputs":{},"position":"90,740 90,780","sourceConnector":"bottom","target":{"id":774},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":1888,"inputs":{},"name":"addNewRedline","position":"-30,460","title":"Try Catch","transitions":[{"id":1902,"inputs":{},"position":"90,580 90,620","sourceConnector":"bottom","target":{"id":1863},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":1921,"inputs":{},"name":"addNewRoadDocumentation","position":"-340,910","title":"Try Catch","transitions":[{"id":2038,"inputs":{},"position":"-220,1030 -220,1160 90,1160 90,1180","sourceConnector":"bottom","target":{"id":2037},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":2037,"inputs":{"layerId":"graphicsLayer2"},"position":"-30,1180","title":"Clear Graphics"}]},{"id":362,"steps":[{"id":364,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":384,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":1083},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1080,"inputs":{"collection":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.state.newGeom.state","source":"$newRoad.state.newGeom.state"}},"position":"-30,210","title":"Clear Collection"},{"action":"gcx:wf:forms::SetFormElementProperty","id":1083,"inputs":{"elementName":"newGeom","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-30,130","title":"Set Form Element Property","transitions":[{"id":1085,"inputs":{},"position":"90,160 90,210","sourceConnector":"bottom","target":{"id":1080},"targetConnector":"top"}]}]},{"id":369,"steps":[{"id":371,"inputs":{},"position":"1270,-320","purpose":"start","title":"Container","transitions":[{"id":2515,"inputs":{},"position":"1360,-260 1360,60","sourceConnector":"bottom","target":{"id":1260},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":377,"inputs":{"attributes":{"accessors":["$submissionForm","$submissionForm","$submissionForm","$submissionID","$submission_ID","$getDate"],"annotations":[{"count":15,"index":12,"kind":"idref"},{"count":15,"index":55,"kind":"idref"},{"count":15,"index":98,"kind":"idref"},{"count":13,"index":149,"kind":"idref"},{"count":14,"index":188,"kind":"idref"},{"count":8,"index":232,"kind":"idref"}],"code":"{ \"Contact\": $submissionForm.state.name.value,\n    \"Email\": $submissionForm.state.email.value,\n    \"Town\": $submissionForm.state.towns.value,\n    \"SubmissionID\": $submissionID.result,\n    \"Submission_ID\": $submission_ID.result,\n    \"Status\": 0,\n    \"Date\": $getDate.result }","source":"{\"Contact\": $submissionForm.state.name.value,\n\"Email\": $submissionForm.state.email.value,\n\"Town\": $submissionForm.state.towns.value,\n\"SubmissionID\": $submissionID.result,\n\"Submission_ID\": $submission_ID.result,\n\"Status\": 0,\n\"Date\": $getDate.result}"},"geometry":{"accessors":["$getTownLayer"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getTownLayer.features[0].geometry","source":"$getTownLayer.features[0].geometry"}},"name":"submissionFeature","position":"-50,510","title":"Create Feature"},{"action":"gcx:wf:core::CreateValue","id":405,"inputs":{"expression":{"accessors":["$submissionForm","$date1","$userInfo"],"annotations":[{"count":15,"index":0,"kind":"idref"},{"count":6,"index":42,"kind":"idref"},{"count":9,"index":67,"kind":"idref"}],"code":"$submissionForm.state.towns.label + \"-\" + $date1.formatted + \"-\" + $userInfo.username","source":"$submissionForm.state.towns.label + \"-\" + $date1.formatted + \"-\" + $userInfo.username"}},"name":"submissionID","position":"880,490","title":"Create Value"},{"action":"gcx:wf:app::GetUserInfo","id":755,"inputs":{},"name":"userInfo","position":"880,-170","title":"Get User Info"},{"action":"gcx:wf:arcgis::ArcadeScript","id":1260,"inputs":{"script":"Concatenate(Year(Now()), '-', Month(Now())+1, '-',Day(Now()), ' ', Hour(Now()), ':', Minute(Now()), ':', Second(Now()))"},"name":"getDate","position":"1240,60","title":"Run Arcade Script","transitions":[{"id":2516,"inputs":{},"position":"1360,130 1360,200","sourceConnector":"bottom","target":{"id":2405},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetGraphicsLayerFeatures","id":1322,"inputs":{"layerId":"townLayer"},"name":"getTownLayer","position":"-50,410","title":"Get Graphics Layer Features","transitions":[{"id":1323,"inputs":{},"position":"70,480 70,510","sourceConnector":"bottom","target":{"id":377},"targetConnector":"top"}]},{"action":"gcx:wf:core::FormatDate","id":2018,"inputs":{"date":{"accessors":["$getDate"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$getDate.result","source":"$getDate.result"},"format":"lll"},"name":"date1","position":"870,160","title":"Format Date","transitions":[{"id":2023,"inputs":{},"position":"990,230 990,260","sourceConnector":"bottom","target":{"id":2201},"targetConnector":"top"}]},{"action":"gcx:wf:core::FormatDate","id":2201,"inputs":{"date":{"accessors":["$getDate"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$getDate.result","source":"$getDate.result"},"format":"L"},"name":"date2","position":"870,260","title":"Format Date","transitions":[{"id":2211,"inputs":{},"position":"990,330 990,360","sourceConnector":"bottom","target":{"id":2203},"targetConnector":"top"}]},{"action":"gcx:wf:core::FormatDate","id":2203,"inputs":{"date":{"accessors":["$getDate"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$getDate.result","source":"$getDate.result"},"format":"LTS"},"name":"date3","position":"870,360","title":"Format Date"},{"action":"gcx:wf:core::CreateValue","id":2205,"inputs":{"expression":{"accessors":["$submissionForm","$getDateFormatted"],"annotations":[{"count":15,"index":0,"kind":"idref"},{"count":17,"index":42,"kind":"idref"}],"code":"$submissionForm.state.towns.label + \"-\" + $getDateFormatted.result","source":"$submissionForm.state.towns.label + \"-\" + $getDateFormatted.result"}},"name":"submission_ID","position":"1240,330","title":"Create Value","transitions":[{"id":2411,"inputs":{},"position":"1360,400 1360,480","sourceConnector":"bottom","target":{"id":2386},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2386,"inputs":{"attributeName":"Date","attributeValue":{"accessors":["$getDate"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$getDate.result","source":"$getDate.result"},"feature":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"}},"position":"1240,480","title":"Set Feature Attribute","transitions":[{"id":2391,"inputs":{},"position":"1360,510 1360,590","sourceConnector":"bottom","target":{"id":2390},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2390,"inputs":{"attributeName":"Status","attributeValue":0,"feature":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"}},"position":"1240,590","title":"Set Feature Attribute","transitions":[{"id":2415,"inputs":{},"position":"1360,620 1360,690","sourceConnector":"bottom","target":{"id":2414},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ArcadeScript","id":2405,"inputs":{"script":"Concatenate(Month(Now())+1,'/',Day(Now()),'/',Year(Now()),'-', Hour(Now()),':',Minute(Now()), ':', Second(Now()))"},"name":"getDateFormatted","position":"1240,200","title":"Run Arcade Script","transitions":[{"id":2433,"inputs":{},"position":"1360,270 1360,330","sourceConnector":"bottom","target":{"id":2205},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2414,"inputs":{"attributeName":"SubmissionID","attributeValue":{"accessors":["$submissionForm","$getDateFormatted"],"annotations":[{"count":15,"index":0,"kind":"idref"},{"count":17,"index":42,"kind":"idref"}],"code":"$submissionForm.state.towns.label + \"-\" + $getDateFormatted.result","source":"$submissionForm.state.towns.label + \"-\" + $getDateFormatted.result"},"feature":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"}},"position":"1240,690","title":"Set Feature Attribute","transitions":[{"id":2420,"inputs":{},"position":"1360,720 1360,770","sourceConnector":"bottom","target":{"id":2419},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2419,"inputs":{"attributeName":"Submission_ID","attributeValue":{"accessors":["$submissionForm","$getDateFormatted"],"annotations":[{"count":15,"index":0,"kind":"idref"},{"count":17,"index":42,"kind":"idref"}],"code":"$submissionForm.state.towns.label + \"-\" + $getDateFormatted.result","source":"$submissionForm.state.towns.label + \"-\" + $getDateFormatted.result"},"feature":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"}},"position":"1240,770","title":"Set Feature Attribute","transitions":[{"id":2500,"inputs":{},"position":"1360,800 1360,880","sourceConnector":"bottom","target":{"id":2459},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":2459,"inputs":{},"name":"tryCreateSubmission","position":"1240,880","title":"Try Catch","transitions":[{"id":2504,"inputs":{},"position":"1360,1000 1360,1180","sourceConnector":"bottom","target":{"id":2503},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":2503,"inputs":{"message":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"}},"position":"1240,1180","title":"Log"}]},{"id":398,"steps":[{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":356,"inputs":{"layerId":"roadLayer"},"position":"-370,1000","title":"Clear Graphics Layer","transitions":[{"id":1073,"inputs":{},"position":"-250,1030 -250,1070","sourceConnector":"bottom","target":{"id":1095},"targetConnector":"top"}]},{"id":400,"inputs":{},"position":"-340,-230","purpose":"start","title":"Container","transitions":[{"id":917,"inputs":{},"position":"-250,-170 -250,-100","sourceConnector":"bottom","target":{"id":854},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":840,"inputs":{"attributes":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature.attributes","source":"$updateFeature.feature.attributes"},"geometry":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature.geometry","source":"$updateFeature.feature.geometry"}},"name":"updateToAdd","position":"-370,190","title":"Create Feature","transitions":[{"id":1019,"inputs":{},"position":"-250,260 -250,300","sourceConnector":"bottom","target":{"id":1059},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":854,"inputs":{"expression":"Updated: "},"name":"editedFields","position":"-370,-100","title":"Create Value","transitions":[{"id":1875,"inputs":{},"position":"-250,-30 -250,-10 -20,-10 -20,-60 120,-60 120,-40","sourceConnector":"bottom","target":{"id":1889},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":902,"inputs":{"attributeName":"Attributes_Edited","attributeValue":{"accessors":["$editedFields"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$editedFields.result","source":"$editedFields.result"},"feature":{"accessors":["$updateToAdd"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$updateToAdd.feature","source":"$updateToAdd.feature"}},"position":"-370,370","title":"Set Feature Attribute","transitions":[{"id":910,"inputs":{},"position":"-250,400 -250,440","sourceConnector":"bottom","target":{"id":1327},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":969,"inputs":{"items":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.value.items","source":"$updateRoad.state.attributes.value.items"}},"name":"forEachSelectedAttribute","position":"440,150","title":"For Each","transitions":[{"id":1971,"inputs":{},"position":"560,270 560,290 -110,290 -110,170 -250,170 -250,190","sourceConnector":"bottom","target":{"id":840},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1059,"inputs":{"attributeName":"Comments","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateNotes.value","source":"$updateRoad.state.updateNotes.value"},"feature":{"accessors":["$updateToAdd"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$updateToAdd.feature","source":"$updateToAdd.feature"}},"position":"-370,300","title":"Set Feature Attribute","transitions":[{"id":1113,"inputs":{},"position":"-250,330 -250,370","sourceConnector":"bottom","target":{"id":902},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1064,"inputs":{"condition":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateFile.value != undefined","source":"$updateRoad.state.updateFile.value != undefined"}},"position":"-310,1140","title":"If","transitions":[{"branch":"true","id":1072,"inputs":{},"position":"-310,1170 -490,1170 -490,1250","sourceConnector":"left","target":{"id":2041},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1095,"inputs":{"layerId":"updateSegmentLayer"},"position":"-370,1070","title":"Clear Graphics Layer","transitions":[{"id":1096,"inputs":{},"position":"-250,1100 -250,1140","sourceConnector":"bottom","target":{"id":1064},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1293,"inputs":{"attributeName":"From_Measure","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateFrom_Measure.value.numeric","source":"$updateRoad.state.updateFrom_Measure.value.numeric"},"feature":{"accessors":["$updateToAdd"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$updateToAdd.feature","source":"$updateToAdd.feature"}},"position":"-370,690","title":"Set Feature Attribute","transitions":[{"id":1299,"inputs":{},"position":"-250,720 -250,750","sourceConnector":"bottom","target":{"id":1303},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1295,"inputs":{"attributeName":"Length","attributeValue":{"accessors":["$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":11,"index":51,"kind":"idref"}],"code":"$updateRoad.state.updateTo_Measure.value.numeric - $updateRoad.state.updateFrom_Measure.value.numeric","source":"$updateRoad.state.updateTo_Measure.value.numeric - $updateRoad.state.updateFrom_Measure.value.numeric"},"feature":{"accessors":["$updateToAdd"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$updateToAdd.feature","source":"$updateToAdd.feature"}},"position":"-370,800","title":"Set Feature Attribute","transitions":[{"id":1300,"inputs":{},"position":"-250,830 -250,815 140,770","sourceConnector":"bottom","target":{"id":1886},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1303,"inputs":{"attributeName":"To_Measure","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateTo_Measure.value.numeric","source":"$updateRoad.state.updateTo_Measure.value.numeric"},"feature":{"accessors":["$updateToAdd"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$updateToAdd.feature","source":"$updateToAdd.feature"}},"position":"-370,750","title":"Set Feature Attribute","transitions":[{"id":1304,"inputs":{},"position":"-250,780 -250,738 -250,738 -250,800","sourceConnector":"bottom","target":{"id":1295},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1327,"inputs":{"elementName":"updateGeom","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-370,440","title":"Set Form Element Property","transitions":[{"id":1336,"inputs":{},"position":"-250,470 -250,500","sourceConnector":"bottom","target":{"id":1332},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1332,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateGeom.state","source":"$updateRoad.state.updateGeom.state"}},"position":"-370,500","title":"Clear Collection","transitions":[{"id":1338,"inputs":{},"position":"-250,530 -250,560","sourceConnector":"bottom","target":{"id":2005},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1866,"inputs":{"message":"NO ATTRIBUTES"},"position":"-370,90","title":"Log","transitions":[{"id":1879,"inputs":{},"position":"-250,120 -250,190","sourceConnector":"bottom","target":{"id":840},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1880,"inputs":{"message":"ATTRIBUTES"},"position":"440,90","title":"Log","transitions":[{"id":1878,"inputs":{},"position":"560,120 560,150","sourceConnector":"bottom","target":{"id":969},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1886,"inputs":{"message":{"accessors":["$updateToAdd"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$updateToAdd.feature","source":"$updateToAdd.feature"}},"position":"20,770","title":"Log","transitions":[{"id":1887,"inputs":{},"position":"140,800 140,785 -250,860","sourceConnector":"bottom","target":{"id":2009},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1889,"inputs":{"message":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.value","source":"$updateRoad.state.attributes.value"}},"position":"0,-40","title":"Log","transitions":[{"id":1890,"inputs":{},"position":"120,-10 120,20 330,20 330,40","sourceConnector":"bottom","target":{"id":1891},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1891,"inputs":{"condition":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.value === undefined","source":"$updateRoad.state.attributes.value === undefined"}},"position":"270,40","title":"If","transitions":[{"branch":"true","id":1858,"inputs":{},"position":"270,70 -250,70 -250,90","sourceConnector":"left","target":{"id":1866},"targetConnector":"top"},{"branch":"false","id":1859,"inputs":{},"position":"390,70 560,70 560,90","sourceConnector":"right","target":{"id":1880},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2003,"inputs":{"object":{"accessors":["$updateToAdd"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$updateToAdd.feature.geometry","source":"$updateToAdd.feature.geometry"},"propertyName":"hasZ","propertyValue":false},"position":"-370,630","title":"Set Property","transitions":[{"id":2008,"inputs":{},"position":"-250,660 -250,690","sourceConnector":"bottom","target":{"id":1293},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2005,"inputs":{"object":{"accessors":["$updateToAdd"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$updateToAdd.feature.geometry","source":"$updateToAdd.feature.geometry"},"propertyName":"hasM","propertyValue":false},"position":"-370,560","title":"Set Property","transitions":[{"id":2007,"inputs":{},"position":"-250,590 -250,630","sourceConnector":"bottom","target":{"id":2003},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":2009,"inputs":{},"name":"tryUpdate","position":"-370,860","title":"Try Catch","transitions":[{"id":2016,"inputs":{},"position":"-250,980 -250,1042 -250,1042 -250,1000","sourceConnector":"bottom","target":{"id":356},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":2041,"inputs":{},"name":"tryAttach","position":"-610,1250","title":"Try Catch"}]},{"id":435,"steps":[{"id":443,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":451,"inputs":{},"position":"90,60 90,110 -420,110 -420,310","sourceConnector":"bottom","target":{"id":1088},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1088,"inputs":{"elementName":"updateGeom","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-540,310","title":"Set Form Element Property","transitions":[{"id":1092,"inputs":{},"position":"-420,340 -420,390","sourceConnector":"bottom","target":{"id":1090},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1090,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateGeom.state","source":"$updateRoad.state.updateGeom.state"}},"position":"-540,390","title":"Clear Collection"}]},{"id":439,"steps":[{"id":440,"inputs":{},"position":"10,-210","purpose":"start","title":"Event","transitions":[{"id":1383,"inputs":{},"position":"100,-150 100,-60","sourceConnector":"bottom","target":{"id":1522},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":669,"inputs":{"elementName":"updateGeom","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-20,330","title":"Set Form Element Property","transitions":[{"id":677,"inputs":{},"position":"100,360 100,390","sourceConnector":"bottom","target":{"id":673},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":673,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateGeom.state","source":"$updateRoad.state.updateGeom.state"}},"position":"-20,390","title":"Clear Collection","transitions":[{"id":1417,"inputs":{},"position":"100,420 100,510","sourceConnector":"bottom","target":{"id":1408},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":739,"inputs":{"layerId":"updateSegmentLayer"},"position":"-20,260","title":"Clear Graphics Layer","transitions":[{"id":679,"inputs":{},"position":"100,290 100,330","sourceConnector":"bottom","target":{"id":669},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":1376,"inputs":{},"position":"-20,40","title":"Container","transitions":[{"id":1380,"inputs":{},"position":"100,130 100,260","sourceConnector":"bottom","target":{"id":739},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1408,"inputs":{"attributeName":"St_Name","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateName.value","source":"$updateRoad.state.updateName.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-20,510","title":"Set Feature Attribute","transitions":[{"id":1414,"inputs":{},"position":"100,540 100,590","sourceConnector":"bottom","target":{"id":1410},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1410,"inputs":{"attributeName":"Route_ID","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateRouteID.value","source":"$updateRoad.state.updateRouteID.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-20,590","title":"Set Feature Attribute","transitions":[{"id":1416,"inputs":{},"position":"100,620 100,680","sourceConnector":"bottom","target":{"id":1412},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureGeometry","id":1412,"inputs":{"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"},"geometry":{"accessors":["$getSelectedRoadGeometry"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$getSelectedRoadGeometry.geometry","source":"$getSelectedRoadGeometry.geometry"}},"position":"-20,680","title":"Set Feature Geometry","transitions":[{"id":1527,"inputs":{},"position":"100,710 100,810","sourceConnector":"bottom","target":{"id":1526},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1522,"inputs":{"message":"ROUTE ID HAS BEEN CHANGED"},"position":"-20,-60","title":"Log","transitions":[{"id":1523,"inputs":{},"position":"100,-30 100,40","sourceConnector":"bottom","target":{"id":1376},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1526,"inputs":{"message":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-20,810","title":"Log"}],"title":"change-routeID2"},{"id":463,"steps":[{"id":465,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":488,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":479},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":479,"inputs":{"elementName":"updateJurisdictn","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$jurisdictionDomainElements"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$jurisdictionDomainElements.items","source":"$jurisdictionDomainElements.items"}},"position":"-30,130","title":"Set Form Element Items"}],"title":"ArcGIS Query-updateJur"},{"id":511,"steps":[{"id":512,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":531,"inputs":{},"position":"90,60 90,260","sourceConnector":"bottom","target":{"id":526},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":522,"inputs":{"field":"Shldr_Lt_T","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/40"},"name":"getcodedvalueLtT","position":"-670,170","title":"Get Coded Value Domain","transitions":[{"id":528,"inputs":{},"position":"-550,230 -550,280","target":{"id":524}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":524,"inputs":{"collection":{"accessors":["$getcodedvalueLtT"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$getcodedvalueLtT.domain.codedValues","source":"$getcodedvalueLtT.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"LtTElements","position":"-670,280","title":"Get Form Element Items From Collection"},{"action":"gcx:wf:forms::SetFormElementItems","id":526,"inputs":{"elementName":"updateShldr_Lt_T","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$Shldr_LtDomainElements"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$Shldr_LtDomainElements.items","source":"$Shldr_LtDomainElements.items"}},"position":"-30,260","title":"Set Form Element Items"}],"title":"ArcGIS Query-updateLtT"},{"id":553,"steps":[{"id":554,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":573,"inputs":{},"position":"90,60 90,130 110,130 110,150","sourceConnector":"bottom","target":{"id":568},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":564,"inputs":{"elementName":"updateShldr_Rt_T","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$RtTElements"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$RtTElements.items","source":"$RtTElements.items"}},"position":"-10,370","title":"Set Form Element Items"},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":566,"inputs":{"collection":{"accessors":["$getcodedvalueRrT"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$getcodedvalueRrT.domain.codedValues","source":"$getcodedvalueRrT.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"RtTElements","position":"-10,260","title":"Get Form Element Items From Collection","transitions":[{"id":570,"inputs":{},"position":"110,320 110,370","target":{"id":564}}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":568,"inputs":{"field":"Shldr_Rt_T","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/41"},"name":"getcodedvalueRrT","position":"-10,150","title":"Get Coded Value Domain","transitions":[{"id":572,"inputs":{},"position":"110,210 110,260","target":{"id":566}}]}],"title":"ArcGIS Query-updateRtT"},{"id":557,"steps":[{"id":558,"inputs":{},"position":"-190,770","purpose":"start","title":"Container","transitions":[{"id":667,"inputs":{},"position":"-100,830 -100,900","sourceConnector":"bottom","target":{"id":645},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":645,"inputs":{"channelName":"arcgis","expect":"json","method":"GET","query":{"accessors":["$updateRoad","$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":55,"kind":"idref"},{"count":11,"index":115,"kind":"idref"},{"count":11,"index":179,"kind":"idref"}],"code":"{\n    f: \"json\",\n    outSR: 102100,\n    locations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value + \"}]\"\n}","source":"{\nf: \"json\",\noutSR: 102100,\nlocations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value + \"}]\"\n}"},"url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/exts/LRSServer/networkLayers/62/measureToGeometry"},"name":"getSegmentGeometry","position":"-220,900","title":"Send Web Request","transitions":[{"id":938,"inputs":{},"position":"-100,970 -100,1000","sourceConnector":"bottom","target":{"id":649},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GeometryFromJson","id":649,"inputs":{"json":{"accessors":["$getSegmentGeometry"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$getSegmentGeometry.json.locations[0].geometry","source":"$getSegmentGeometry.json.locations[0].geometry"}},"name":"segmentGeometry","position":"-220,1000","title":"Get Geometry From JSON","transitions":[{"id":1535,"inputs":{},"position":"-100,1070 -100,1100","sourceConnector":"bottom","target":{"id":651},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":651,"inputs":{"object":{"accessors":["$segmentGeometry"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$segmentGeometry.geometry.spatialReference","source":"$segmentGeometry.geometry.spatialReference"},"propertyName":"wkid","propertyValue":102100},"position":"-220,1100","title":"Set Property","transitions":[{"id":1534,"inputs":{},"position":"-100,1130 -100,1210","sourceConnector":"bottom","target":{"id":942},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::AddGraphicsLayerFeatures","id":655,"inputs":{"features":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"},"layerId":"updateSegmentLayer","removeAllFeatures":true},"name":"segmentGraphics","position":"-220,1310","title":"Add Graphics Layer Features","transitions":[{"id":1533,"inputs":{},"position":"-100,1380 -100,1450","sourceConnector":"bottom","target":{"id":1532},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureGeometry","id":942,"inputs":{"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"},"geometry":{"accessors":["$segmentGeometry"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$segmentGeometry.geometry","source":"$segmentGeometry.geometry"}},"position":"-220,1210","title":"Set Feature Geometry","transitions":[{"id":943,"inputs":{},"position":"-100,1240 -100,1260 60,1260 60,1120 200,1120 200,1140","sourceConnector":"bottom","target":{"id":1974},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1532,"inputs":{"message":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-220,1450","title":"Log"},{"action":"gcx:wf:core::SetProperty","id":1974,"inputs":{"object":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature.geometry","source":"$updateFeature.feature.geometry"},"propertyName":"hasM","propertyValue":false},"position":"80,1140","title":"Set Property","transitions":[{"id":1983,"inputs":{},"position":"200,1170 200,1200","sourceConnector":"bottom","target":{"id":1982},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1982,"inputs":{"object":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature.geometry","source":"$updateFeature.feature.geometry"},"propertyName":"hasZ","propertyValue":false},"position":"80,1200","title":"Set Property","transitions":[{"id":1984,"inputs":{},"position":"200,1230 200,1290 -100,1290 -100,1310","sourceConnector":"bottom","target":{"id":655},"targetConnector":"top"}]}]},{"id":574,"steps":[{"id":575,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":594,"inputs":{},"position":"90,60 90,130 110,130 110,150","sourceConnector":"bottom","target":{"id":589},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":585,"inputs":{"elementName":"updateCurb","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$CurbsElements1"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$CurbsElements1.items","source":"$CurbsElements1.items"}},"position":"-10,370","title":"Set Form Element Items"},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":587,"inputs":{"collection":{"accessors":["$getcodedvalueCurbs"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$getcodedvalueCurbs.domain.codedValues","source":"$getcodedvalueCurbs.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"CurbsElements1","position":"-10,260","title":"Get Form Element Items From Collection","transitions":[{"id":591,"inputs":{},"position":"110,320 110,370","target":{"id":585}}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":589,"inputs":{"field":"Curb","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/9"},"name":"getcodedvalueCurbs","position":"-10,150","title":"Get Coded Value Domain","transitions":[{"id":593,"inputs":{},"position":"110,210 110,260","target":{"id":587}}]}],"title":"ArcGIS Query-dropDownList1"},{"id":595,"steps":[{"id":596,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":615,"inputs":{},"position":"90,60 90,150","sourceConnector":"bottom","target":{"id":610},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":606,"inputs":{"elementName":"updateStruct_Cnd","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$StCdnElements"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$StCdnElements.items","source":"$StCdnElements.items"}},"position":"-30,370","title":"Set Form Element Items"},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":608,"inputs":{"collection":{"accessors":["$getcodedvalueStCnd"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$getcodedvalueStCnd.domain.codedValues","source":"$getcodedvalueStCnd.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"StCdnElements","position":"-30,260","title":"Get Form Element Items From Collection","transitions":[{"id":612,"inputs":{},"position":"90,320 90,370","target":{"id":606}}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":610,"inputs":{"field":"Struct_Cnd","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/49"},"name":"getcodedvalueStCnd","position":"-30,150","title":"Get Coded Value Domain","transitions":[{"id":614,"inputs":{},"position":"90,210 90,260","target":{"id":608}}]}],"title":"ArcGIS Query-updateStCnd"},{"id":616,"steps":[{"id":617,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":636,"inputs":{},"position":"90,60 90,150","sourceConnector":"bottom","target":{"id":631},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":627,"inputs":{"elementName":"updateTerrain","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$TerrainElements"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$TerrainElements.items","source":"$TerrainElements.items"}},"position":"-30,370","title":"Set Form Element Items"},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":629,"inputs":{"collection":{"accessors":["$getcodedvalueTerrain"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$getcodedvalueTerrain.domain.codedValues","source":"$getcodedvalueTerrain.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"TerrainElements","position":"-30,260","title":"Get Form Element Items From Collection","transitions":[{"id":633,"inputs":{},"position":"90,320 90,370","target":{"id":627}}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":631,"inputs":{"field":"Terrain","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/52"},"name":"getcodedvalueTerrain","position":"-30,150","title":"Get Coded Value Domain","transitions":[{"id":635,"inputs":{},"position":"90,210 90,260","target":{"id":629}}]}],"title":"ArcGIS Query-updateTerrain"},{"id":638,"steps":[{"action":"gcx:wf:core::Container","id":556,"inputs":{},"name":"updateGeomDrawSegment","position":"-270,1000","title":"Container"},{"id":639,"inputs":{},"position":"0,-460","purpose":"start","title":"Event","transitions":[{"id":878,"inputs":{},"position":"90,-400 90,-290","sourceConnector":"bottom","target":{"id":1536},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":707,"inputs":{"channelName":"arcgis","expect":"json","method":"GET","query":{"accessors":["$updateRoad","$updateRoad","$updateRoad","$updateRoad","$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":40,"kind":"idref"},{"count":11,"index":99,"kind":"idref"},{"count":11,"index":158,"kind":"idref"},{"count":11,"index":228,"kind":"idref"},{"count":11,"index":287,"kind":"idref"},{"count":11,"index":346,"kind":"idref"}],"code":"{\n    f: \"json\",\n    locations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", geometry:{x:\" + $updateRoad.state.updateGeom.value.geometry[0].x + \",y:\" + $updateRoad.state.updateGeom.value.geometry[0].y + \"}}, {routeId: \" + $updateRoad.state.updateRouteID.value + \", geometry:{x:\" + $updateRoad.state.updateGeom.value.geometry[1].x + \",y:\" + $updateRoad.state.updateGeom.value.geometry[1].y + \"}}]\",\n    inSR: 102100,\n    tolerance: 50\n}","source":"{\nf: \"json\",\nlocations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", geometry:{x:\" + $updateRoad.state.updateGeom.value.geometry[0].x + \",y:\" + $updateRoad.state.updateGeom.value.geometry[0].y + \"}}, {routeId: \" + $updateRoad.state.updateRouteID.value + \", geometry:{x:\" + $updateRoad.state.updateGeom.value.geometry[1].x + \",y:\" + $updateRoad.state.updateGeom.value.geometry[1].y + \"}}]\",\ninSR: 102100,\ntolerance: 50\n}"},"url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/exts/LRSServer/networkLayers/62/geometryToMeasure"},"name":"getStartMile","position":"-270,140","title":"Send Web Request","transitions":[{"id":937,"inputs":{},"position":"-150,210 -150,300","sourceConnector":"bottom","target":{"id":882},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":790,"inputs":{"elementName":"updateFrom_Measure","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getStartMile.json.locations[1].results[0].measure","source":"$getStartMile.json.locations[1].results[0].measure"}},"position":"-510,550","title":"Set Form Element Property","transitions":[{"id":887,"inputs":{},"position":"-390,580 -390,610","sourceConnector":"bottom","target":{"id":886},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":877,"inputs":{"condition":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateGeom.value.geometry.length > 1","source":"$updateRoad.state.updateGeom.value.geometry.length > 1"}},"position":"30,-130","title":"If","transitions":[{"branch":"true","id":936,"inputs":{},"position":"30,-100 -150,-100 -150,140","sourceConnector":"left","target":{"id":707},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","description":"If point 0 is the TO point","id":882,"inputs":{"condition":{"accessors":["$getStartMile","$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":53,"kind":"idref"}],"code":"$getStartMile.json.locations[0].results[0].measure > $getStartMile.json.locations[1].results[0].measure","source":"$getStartMile.json.locations[0].results[0].measure > $getStartMile.json.locations[1].results[0].measure"}},"position":"-270,300","title":"If","transitions":[{"branch":"false","id":883,"inputs":{},"position":"-30,345 50,345 50,540","sourceConnector":"right","target":{"id":890},"targetConnector":"top"},{"branch":"true","id":895,"inputs":{},"position":"-270,345 -390,345 -390,550","sourceConnector":"left","target":{"id":790},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":886,"inputs":{"elementName":"updateTo_Measure","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getStartMile.json.locations[0].results[0].measure","source":"$getStartMile.json.locations[0].results[0].measure"}},"position":"-510,610","title":"Set Form Element Property","transitions":[{"id":899,"inputs":{},"position":"-390,640 -390,598 -390,598 -390,660","sourceConnector":"bottom","target":{"id":976},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":890,"inputs":{"elementName":"updateFrom_Measure","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getStartMile.json.locations[0].results[0].measure","source":"$getStartMile.json.locations[0].results[0].measure"}},"position":"-70,540","title":"Set Form Element Property","transitions":[{"id":894,"inputs":{},"position":"50,570 50,610","sourceConnector":"bottom","target":{"id":892},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":892,"inputs":{"elementName":"updateTo_Measure","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getStartMile.json.locations[1].results[0].measure","source":"$getStartMile.json.locations[1].results[0].measure"}},"position":"-70,610","title":"Set Form Element Property","transitions":[{"id":900,"inputs":{},"position":"50,640 50,680","sourceConnector":"bottom","target":{"id":980},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":976,"inputs":{"elementName":"updateLength","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$getStartMile","$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":53,"kind":"idref"}],"code":"$getStartMile.json.locations[0].results[0].measure - $getStartMile.json.locations[1].results[0].measure","source":"$getStartMile.json.locations[0].results[0].measure - $getStartMile.json.locations[1].results[0].measure"}},"position":"-510,660","title":"Set Form Element Property","transitions":[{"id":982,"inputs":{},"position":"-390,690 -390,750","sourceConnector":"bottom","target":{"id":1013},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":979,"inputs":{"attributeName":"From_Measure","attributeValue":{"accessors":["$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getStartMile.json.locations[0].results[0].measure","source":"$getStartMile.json.locations[0].results[0].measure"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-70,760","title":"Set Feature Attribute","transitions":[{"id":997,"inputs":{},"position":"50,790 50,840","sourceConnector":"bottom","target":{"id":986},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":980,"inputs":{"elementName":"updateLength","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$getStartMile","$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":53,"kind":"idref"}],"code":"$getStartMile.json.locations[1].results[0].measure - $getStartMile.json.locations[0].results[0].measure","source":"$getStartMile.json.locations[1].results[0].measure - $getStartMile.json.locations[0].results[0].measure"}},"position":"-70,680","title":"Set Form Element Property","transitions":[{"id":981,"inputs":{},"position":"50,710 50,760","sourceConnector":"bottom","target":{"id":979},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":986,"inputs":{"attributeName":"Length","attributeValue":{"accessors":["$getStartMile","$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":53,"kind":"idref"}],"code":"$getStartMile.json.locations[1].results[0].measure - $getStartMile.json.locations[0].results[0].measure","source":"$getStartMile.json.locations[1].results[0].measure - $getStartMile.json.locations[0].results[0].measure"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-70,840","title":"Set Feature Attribute","transitions":[{"id":1001,"inputs":{},"position":"50,870 50,910","sourceConnector":"bottom","target":{"id":990},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":990,"inputs":{"attributeName":"To_Measure","attributeValue":{"accessors":["$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getStartMile.json.locations[1].results[0].measure","source":"$getStartMile.json.locations[1].results[0].measure"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-70,910","title":"Set Feature Attribute","transitions":[{"id":1003,"inputs":{},"position":"50,940 50,980 -150,980 -150,1000","sourceConnector":"bottom","target":{"id":556},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1013,"inputs":{"attributeName":"From_Measure","attributeValue":{"accessors":["$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getStartMile.json.locations[1].results[0].measure","source":"$getStartMile.json.locations[1].results[0].measure"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-510,750","title":"Set Feature Attribute","transitions":[{"id":1028,"inputs":{},"position":"-390,780 -390,830","sourceConnector":"bottom","target":{"id":1017},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1017,"inputs":{"attributeName":"Length","attributeValue":{"accessors":["$getStartMile","$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":53,"kind":"idref"}],"code":"$getStartMile.json.locations[0].results[0].measure - $getStartMile.json.locations[1].results[0].measure","source":"$getStartMile.json.locations[0].results[0].measure - $getStartMile.json.locations[1].results[0].measure"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-510,830","title":"Set Feature Attribute","transitions":[{"id":1032,"inputs":{},"position":"-390,860 -390,900","sourceConnector":"bottom","target":{"id":1021},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1021,"inputs":{"attributeName":"To_Measure","attributeValue":{"accessors":["$getStartMile"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$getStartMile.json.locations[0].results[0].measure","source":"$getStartMile.json.locations[0].results[0].measure"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-510,900","title":"Set Feature Attribute","transitions":[{"id":1034,"inputs":{},"position":"-390,930 -390,980 -150,980 -150,1000","sourceConnector":"bottom","target":{"id":556},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1536,"inputs":{"message":"UPDATING GEOMETRY"},"position":"-30,-290","title":"Log","transitions":[{"id":1537,"inputs":{},"position":"90,-260 90,-130","sourceConnector":"bottom","target":{"id":877},"targetConnector":"top"}]}],"title":"change-updateFromGeom"},{"id":670,"steps":[{"id":672,"inputs":{},"position":"-180,770","purpose":"start","title":"Container","transitions":[{"id":696,"inputs":{},"position":"-90,830 -90,920","sourceConnector":"bottom","target":{"id":676},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::AddGraphicsLayerFeatures","id":674,"inputs":{"features":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"},"layerId":"updateSegmentLayer","removeAllFeatures":true},"name":"segmentGraphics2","position":"-210,1400","title":"Add Graphics Layer Features"},{"action":"gcx:wf:core:request:WebRequest","id":676,"inputs":{"channelName":"arcgis","expect":"json","method":"GET","query":{"accessors":["$updateRoad","$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":55,"kind":"idref"},{"count":11,"index":115,"kind":"idref"},{"count":11,"index":187,"kind":"idref"}],"code":"{\n    f: \"json\",\n    outSR: 102100,\n    locations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value.numeric + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value.numeric + \"}]\"\n}","source":"{\nf: \"json\",\noutSR: 102100,\nlocations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value.numeric + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value.numeric + \"}]\"\n}"},"url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/exts/LRSServer/networkLayers/62/measureToGeometry"},"name":"getSegmentGeometry2","position":"-210,920","title":"Send Web Request","transitions":[{"id":686,"inputs":{},"position":"-90,990 -90,1020","sourceConnector":"bottom","target":{"id":680},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GeometryFromJson","id":680,"inputs":{"json":{"accessors":["$getSegmentGeometry2"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$getSegmentGeometry2.json.locations[0].geometry","source":"$getSegmentGeometry2.json.locations[0].geometry"}},"name":"segmentGeometry2","position":"-210,1020","title":"Get Geometry From JSON","transitions":[{"id":690,"inputs":{},"position":"-90,1090 -90,1130","sourceConnector":"bottom","target":{"id":682},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":682,"inputs":{"object":{"accessors":["$segmentGeometry2"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$segmentGeometry2.geometry.spatialReference","source":"$segmentGeometry2.geometry.spatialReference"},"propertyName":"wkid","propertyValue":102100},"position":"-210,1130","title":"Set Property","transitions":[{"id":915,"inputs":{},"position":"-90,1160 -90,1230","sourceConnector":"bottom","target":{"id":941},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureGeometry","id":941,"inputs":{"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"},"geometry":{"accessors":["$segmentGeometry2"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$segmentGeometry2.geometry","source":"$segmentGeometry2.geometry"}},"position":"-210,1230","title":"Set Feature Geometry","transitions":[{"id":947,"inputs":{},"position":"-90,1260 -90,1280 80,1280 80,1140 220,1140 220,1160","sourceConnector":"bottom","target":{"id":1987},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1987,"inputs":{"object":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature.geometry","source":"$updateFeature.feature.geometry"},"propertyName":"hasM","propertyValue":false},"position":"100,1160","title":"Set Property","transitions":[{"id":1991,"inputs":{},"position":"220,1190 220,1220","sourceConnector":"bottom","target":{"id":1989},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1989,"inputs":{"object":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature.geometry","source":"$updateFeature.feature.geometry"},"propertyName":"hasZ","propertyValue":false},"position":"100,1220","title":"Set Property","transitions":[{"id":1992,"inputs":{},"position":"220,1250 220,1380 -90,1380 -90,1400","sourceConnector":"bottom","target":{"id":674},"targetConnector":"top"}]}]},{"id":704,"steps":[{"id":706,"inputs":{},"position":"-180,770","purpose":"start","title":"Container","transitions":[{"id":776,"inputs":{},"position":"-90,830 -90,870","sourceConnector":"bottom","target":{"id":711},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::AddGraphicsLayerFeatures","id":709,"inputs":{"features":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"},"layerId":"updateSegmentLayer","removeAllFeatures":true},"name":"segmentGraphics3","position":"-210,1340","title":"Add Graphics Layer Features"},{"action":"gcx:wf:core:request:WebRequest","id":711,"inputs":{"channelName":"arcgis","expect":"json","method":"GET","query":{"accessors":["$updateRoad","$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":55,"kind":"idref"},{"count":11,"index":115,"kind":"idref"},{"count":11,"index":187,"kind":"idref"}],"code":"{\n    f: \"json\",\n    outSR: 102100,\n    locations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value.numeric + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value.numeric + \"}]\"\n}","source":"{\nf: \"json\",\noutSR: 102100,\nlocations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value.numeric + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value.numeric + \"}]\"\n}"},"url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/exts/LRSServer/networkLayers/62/measureToGeometry"},"name":"getSegmentGeometry3","position":"-210,870","title":"Send Web Request","transitions":[{"id":721,"inputs":{},"position":"-90,940 -90,970","sourceConnector":"bottom","target":{"id":715},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GeometryFromJson","id":715,"inputs":{"json":{"accessors":["$getSegmentGeometry3"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$getSegmentGeometry3.json.locations[0].geometry","source":"$getSegmentGeometry3.json.locations[0].geometry"}},"name":"segmentGeometry3","position":"-210,970","title":"Get Geometry From JSON","transitions":[{"id":725,"inputs":{},"position":"-90,1040 -90,1102 -90,1102 -90,1060","sourceConnector":"bottom","target":{"id":717},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":717,"inputs":{"object":{"accessors":["$segmentGeometry3"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$segmentGeometry3.geometry.spatialReference","source":"$segmentGeometry3.geometry.spatialReference"},"propertyName":"wkid","propertyValue":102100},"position":"-210,1060","title":"Set Property","transitions":[{"id":906,"inputs":{},"position":"-90,1090 -90,1130","sourceConnector":"bottom","target":{"id":956},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureGeometry","id":956,"inputs":{"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"},"geometry":{"accessors":["$segmentGeometry3"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$segmentGeometry3.geometry","source":"$segmentGeometry3.geometry"}},"position":"-210,1130","title":"Set Feature Geometry","transitions":[{"id":962,"inputs":{},"position":"-90,1160 -90,1190","sourceConnector":"bottom","target":{"id":1997},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1995,"inputs":{"object":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature.geometry","source":"$updateFeature.feature.geometry"},"propertyName":"hasZ","propertyValue":false},"position":"-210,1270","title":"Set Property","transitions":[{"id":2000,"inputs":{},"position":"-90,1300 -90,1340","sourceConnector":"bottom","target":{"id":709},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1997,"inputs":{"object":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature.geometry","source":"$updateFeature.feature.geometry"},"propertyName":"hasM","propertyValue":false},"position":"-210,1190","title":"Set Property","transitions":[{"id":1999,"inputs":{},"position":"-90,1220 -90,1270","sourceConnector":"bottom","target":{"id":1995},"targetConnector":"top"}]}]},{"id":744,"steps":[{"id":745,"inputs":{},"position":"0,-80","purpose":"start","title":"For Each","transitions":[{"id":808,"inputs":{},"position":"90,-20 90,40","sourceConnector":"bottom","target":{"id":766},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SortFeatureSet","id":751,"inputs":{"ascending":true,"features":{"accessors":["$attributeFeatureSet"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$attributeFeatureSet.featureSet","source":"$attributeFeatureSet.featureSet"},"sortAttribute":{"accessors":["$eventAttributeName"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$eventAttributeName.result.value","source":"$eventAttributeName.result.value"}},"name":"sortFeatureSet","position":"-30,170","title":"Sort Feature Set","transitions":[{"id":1122,"inputs":{},"position":"90,230 90,290","sourceConnector":"bottom","target":{"id":779},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":766,"inputs":{"expression":{"accessors":["$forEachSegment"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$forEachSegment.item","source":"$forEachSegment.item"}},"name":"eventAttributeName","position":"-30,40","title":"Create Value","transitions":[{"id":1121,"inputs":{},"position":"90,100 90,170","sourceConnector":"bottom","target":{"id":751},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetAttributeValue","id":779,"inputs":{"attribute":{"accessors":["$eventAttributeName"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$eventAttributeName.result.value","source":"$eventAttributeName.result.value"},"features":{"accessors":["$sortFeatureSet"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$sortFeatureSet.features[0]","source":"$sortFeatureSet.features[0]"}},"name":"attributeValueLow","position":"-30,290","title":"Get Feature Attribute Value","transitions":[{"id":1123,"inputs":{},"position":"90,350 90,440","sourceConnector":"bottom","target":{"id":787},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetAttributeValue","id":787,"inputs":{"attribute":{"accessors":["$eventAttributeName"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$eventAttributeName.result.value","source":"$eventAttributeName.result.value"},"features":{"accessors":["$sortFeatureSet","$sortFeatureSet"],"annotations":[{"count":15,"index":0,"kind":"idref"},{"count":15,"index":25,"kind":"idref"}],"code":"$sortFeatureSet.features[$sortFeatureSet.features.length - 1]","source":"$sortFeatureSet.features[$sortFeatureSet.features.length - 1]"}},"name":"attributeValueHigh","position":"-30,440","title":"Get Feature Attribute Value","transitions":[{"id":807,"inputs":{},"position":"90,500 90,560","sourceConnector":"bottom","target":{"id":792},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":792,"inputs":{"condition":{"accessors":["$attributeValueLow","$attributeValueHigh","$attributeValueLow"],"annotations":[{"count":18,"index":1,"kind":"idref"},{"count":19,"index":29,"kind":"idref"},{"count":18,"index":59,"kind":"idref"}],"code":"($attributeValueLow.value == $attributeValueHigh.value) && ($attributeValueLow.value != undefined)","source":"($attributeValueLow.value == $attributeValueHigh.value) &&($attributeValueLow.value != undefined)"}},"position":"30,560","title":"If","transitions":[{"branch":"true","id":948,"inputs":{},"position":"30,590 -220,590 -220,720","sourceConnector":"left","target":{"id":805},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":805,"inputs":{"elementName":{"accessors":["$eventAttributeName"],"annotations":[{"count":19,"index":11,"kind":"idref"}],"code":"\"update\" + $eventAttributeName.result.value","source":"\"update\" + $eventAttributeName.result.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$attributeValueHigh"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$attributeValueHigh.value","source":"$attributeValueHigh.value"}},"position":"-340,720","title":"Set Form Element Property"}]},{"id":784,"steps":[{"action":"gcx:wf:arcgis::CreateFeatureSet","id":710,"inputs":{"features":{"accessors":["$getSegmentAtrributes"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$getSegmentAtrributes.json.features","source":"$getSegmentAtrributes.json.features"}},"name":"attributeFeatureSet","position":"-210,990","title":"Create Feature Set","transitions":[{"id":1065,"inputs":{},"position":"-90,1050 -90,1110","sourceConnector":"bottom","target":{"id":743},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":743,"inputs":{"items":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.items","source":"$updateRoad.state.attributes.items\n"}},"name":"forEachSegment","position":"-210,1110","title":"For Each"},{"id":786,"inputs":{},"position":"-180,770","purpose":"start","title":"Container","transitions":[{"id":811,"inputs":{},"position":"-90,830 -90,880","sourceConnector":"bottom","target":{"id":791},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":791,"inputs":{"channelName":"arcgis","expect":"json","method":"GET","query":{"accessors":["$updateRoad","$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":55,"kind":"idref"},{"count":11,"index":115,"kind":"idref"},{"count":11,"index":187,"kind":"idref"}],"code":"{\n    f: \"json\",\n    outSR: 102100,\n    locations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value.numeric + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value.numeric + \"}]\",\n    attributeSet: \"[{layerId: 21, fields: [Jurisdictn]}, {layerId: 43, fields: [Speed_Lim]}, {layerId: 39, fields: [Shldr_Lt_W, Shldr_Lt_T]}, {layerId: 50, fields: [Surface_Tp, Surface_Wd]}, {layerId: 40, fields: [Shldr_Rt_W, Shldr_Rt_T]},  {layerId: 28, fields: [Num_Lanes]},  {layerId: 9, fields: [Curb]},  {layerId: 47, fields: [Operation]}, {layerId: 51, fields: [Terrain]}, {layerId: 48, fields: [Struct_Cnd]}, {layerId: 36, fields: [ROW_Width]}]\"\n}","source":"{\nf: \"json\",\noutSR: 102100,\nlocations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value.numeric + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value.numeric + \"}]\",\nattributeSet: \"[{layerId: 21, fields: [Jurisdictn]}, {layerId: 43, fields: [Speed_Lim]}, {layerId: 39, fields: [Shldr_Lt_W, Shldr_Lt_T]}, {layerId: 50, fields: [Surface_Tp, Surface_Wd]}, {layerId: 40, fields: [Shldr_Rt_W, Shldr_Rt_T]},  {layerId: 28, fields: [Num_Lanes]},  {layerId: 9, fields: [Curb]},  {layerId: 47, fields: [Operation]}, {layerId: 51, fields: [Terrain]}, {layerId: 48, fields: [Struct_Cnd]}, {layerId: 36, fields: [ROW_Width]}]\"\n}"},"url":"http://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/exts/LRSServer/networkLayers/61/queryAttributeSet"},"name":"getSegmentAtrributes","position":"-210,880","title":"Send Web Request","transitions":[{"id":742,"inputs":{},"position":"-90,940 -90,990","sourceConnector":"bottom","target":{"id":710},"targetConnector":"top"}]}]},{"id":809,"steps":[{"id":810,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":859,"inputs":{},"position":"90,60 90,110","sourceConnector":"bottom","target":{"id":844},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SymbolFromJson","id":822,"inputs":{"json":{"accessors":[],"annotations":[],"code":"{\n    \"color\": [0, 92, 230],\n    \"type\": \"esriSLS\",\n    \"style\": \"esriSLSSolid\",\n    \"width\": 6\n}","source":"{\n  \"color\": [0, 92, 230],\n  \"type\": \"esriSLS\",\n  \"style\": \"esriSLSSolid\",\n  \"width\": 6\n}"}},"name":"selectedRoadSymbol","position":"-30,520","title":"Get Road Symbol From JSON","transitions":[{"id":2084,"inputs":{},"position":"90,590 90,640","sourceConnector":"bottom","target":{"id":2083},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":844,"inputs":{"expression":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":14,"kind":"idref"}],"code":"\"Town = '\" + $submissionForm.state.towns.value + \"'\"","source":" \"Town = '\" + $submissionForm.state.towns.value + \"'\""}},"name":"townValue","position":"-30,110","title":"Create Value","transitions":[{"id":1042,"inputs":{},"position":"90,180 90,250","sourceConnector":"bottom","target":{"id":850},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","description":"This is the feature that will be submitted","id":846,"inputs":{"attributes":{"accessors":["$theSubmissionFeature","$theSubmissionFeature","$theSubmissionFeature"],"annotations":[{"count":21,"index":44,"kind":"idref"},{"count":21,"index":115,"kind":"idref"},{"count":21,"index":188,"kind":"idref"}],"code":"{ Update_Type: \"ROAD UPDATE\",\n    SubmissionID: $theSubmissionFeature.feature.attributes.SubmissionID,\n    Submission_ID: $theSubmissionFeature.feature.attributes.Submission_ID,\n    Status: 0,\n    City: $theSubmissionFeature.feature.attributes.Town\n}","source":"{Update_Type: \"ROAD UPDATE\", \nSubmissionID: $theSubmissionFeature.feature.attributes.SubmissionID, \nSubmission_ID: $theSubmissionFeature.feature.attributes.Submission_ID,\nStatus: 0,\nCity: $theSubmissionFeature.feature.attributes.Town\n}"},"symbol":{"accessors":["$updateSegmentSymbol"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$updateSegmentSymbol.symbol","source":"$updateSegmentSymbol.symbol"}},"name":"updateFeature","position":"-30,370","title":"updateFeature","transitions":[{"id":824,"inputs":{},"position":"90,480 90,520","sourceConnector":"bottom","target":{"id":822},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SymbolFromJson","id":850,"inputs":{"json":{"accessors":[],"annotations":[],"code":"{\n    \"color\": [250, 0, 0],\n    \"type\": \"esriSLS\",\n    \"style\": \"esriSLSSolid\",\n    \"width\": 5\n}","source":"{\n  \"color\": [250, 0, 0],\n  \"type\": \"esriSLS\",\n  \"style\": \"esriSLSSolid\",\n  \"width\": 5\n}"}},"name":"updateSegmentSymbol","position":"-30,250","title":"Get Road Symbol From JSON","transitions":[{"id":1036,"inputs":{},"position":"90,320 90,370","sourceConnector":"bottom","target":{"id":846},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2083,"inputs":{"expression":false},"name":"submittable","position":"-30,640","title":"Create Value"}]},{"id":817,"steps":[{"action":"gcx:wf:core::Container","id":698,"inputs":{},"name":"updateGeomDrawSegment1","position":"-30,340","title":"Container"},{"id":818,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":973,"inputs":{},"position":"90,60 90,100","sourceConnector":"bottom","target":{"id":961},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":874,"inputs":{"attributeName":"From_Measure","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateFrom_Measure.value.numeric","source":"$updateRoad.state.updateFrom_Measure.value.numeric"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,160","title":"Set Feature Attribute","transitions":[{"id":875,"inputs":{},"position":"90,190 90,240","sourceConnector":"bottom","target":{"id":897},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":897,"inputs":{"attributeName":"Length","attributeValue":{"accessors":["$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":11,"index":51,"kind":"idref"}],"code":"$updateRoad.state.updateTo_Measure.value.numeric - $updateRoad.state.updateFrom_Measure.value.numeric","source":"$updateRoad.state.updateTo_Measure.value.numeric - $updateRoad.state.updateFrom_Measure.value.numeric"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,240","title":"Set Feature Attribute","transitions":[{"id":898,"inputs":{},"position":"90,270 90,340","sourceConnector":"bottom","target":{"id":698},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":961,"inputs":{"elementName":"updateLength","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":11,"index":51,"kind":"idref"}],"code":"$updateRoad.state.updateTo_Measure.value.numeric - $updateRoad.state.updateFrom_Measure.value.numeric","source":"$updateRoad.state.updateTo_Measure.value.numeric - $updateRoad.state.updateFrom_Measure.value.numeric"}},"position":"-30,100","title":"Set Form Element Property","transitions":[{"id":701,"inputs":{},"position":"90,130 90,160","sourceConnector":"bottom","target":{"id":874},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Gets attribute set for selected segment and populates fields that are homogeneous throughout","id":1193,"inputs":{},"name":"updateAttributeSet1","position":"-10,580","title":"Get Attribute Set"}],"title":"change-updateFrom_Measure"},{"id":880,"steps":[{"id":881,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":896,"inputs":{},"position":"90,60 90,150","target":{"id":925},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":925,"inputs":{"elementName":"newLeft_Cond","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$Left_CondDomainElements"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$Left_CondDomainElements.items","source":"$Left_CondDomainElements.items"}},"position":"-30,150","title":"Set Form Element Items"}],"title":"ArcGIS Query-newLeft_Cond"},{"id":891,"steps":[{"id":893,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":978,"inputs":{},"position":"90,60 90,120","sourceConnector":"bottom","target":{"id":932},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":932,"inputs":{"elementName":"newPd_Sf_Type","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$Pd_Sf_TypeDomainElements"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$Pd_Sf_TypeDomainElements.items","source":"$Pd_Sf_TypeDomainElements.items"}},"position":"-30,120","title":"Set Form Element Items"}],"title":"Blank-newPd_Sf_Type"},{"id":907,"steps":[{"id":908,"inputs":{},"position":"20,20","purpose":"start","title":"Event","transitions":[{"id":927,"inputs":{},"position":"110,80 110,130","sourceConnector":"bottom","target":{"id":922},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":922,"inputs":{"elementName":"newJurisdictn","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$jurisdictionDomainElements"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$jurisdictionDomainElements.items","source":"$jurisdictionDomainElements.items"}},"position":"-10,130","title":"Set Form Element Items"}],"title":"ArcGIS Query-newJurisdictn"},{"id":928,"steps":[{"id":931,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":964,"inputs":{},"position":"90,60 90,110","sourceConnector":"bottom","target":{"id":955},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":955,"inputs":{"elementName":"newShldr_Lt_T","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$Shldr_LtDomainElements"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$Shldr_LtDomainElements.items","source":"$Shldr_LtDomainElements.items"}},"position":"-30,110","title":"Set Form Element Items"}],"title":"ArcGIS Query-newShldr_Lt_T"},{"id":939,"steps":[{"action":"gcx:wf:forms::SetFormElementItems","id":864,"inputs":{"elementName":"newRight_Cond","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$Right_CondDomainElements"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$Right_CondDomainElements.items","source":"$Right_CondDomainElements.items"}},"position":"-30,110","title":"Set Form Element Items"},{"id":945,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":889,"inputs":{},"position":"90,60 90,110","sourceConnector":"bottom","target":{"id":864},"targetConnector":"top"}]}],"title":"Blank-newRight_Cond"},{"id":965,"steps":[{"id":967,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":992,"inputs":{},"position":"90,60 90,120","sourceConnector":"bottom","target":{"id":987},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":987,"inputs":{"elementName":"newSurface_Tp","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$Surface_TypeDomainValues"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$Surface_TypeDomainValues.items","source":"$Surface_TypeDomainValues.items"}},"position":"-30,120","title":"Set Form Element Items"}],"title":"ArcGIS Query-newSurface_Tp"},{"id":970,"steps":[{"action":"gcx:wf:core::Evaluate","id":884,"inputs":{"expression":{"accessors":["$editedFields","$forEachSelectedAttribute"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":25,"index":24,"kind":"idref"}],"code":"$editedFields.result += $forEachSelectedAttribute.item.value + \" \"","source":"$editedFields.result += $forEachSelectedAttribute.item.value + \" \""}},"name":"evaluate2","position":"-30,-280","title":"Evaluate Expression","transitions":[{"id":885,"inputs":{},"position":"90,-220 90,-170","sourceConnector":"bottom","target":{"id":1027},"targetConnector":"top"}]},{"id":971,"inputs":{},"position":"0,-440","purpose":"start","title":"For Each","transitions":[{"id":1131,"inputs":{},"position":"90,-380 90,-280","sourceConnector":"bottom","target":{"id":884},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementProperty","id":984,"inputs":{"elementName":{"accessors":["$forEachSelectedAttribute"],"annotations":[{"count":25,"index":11,"kind":"idref"}],"code":"\"update\" + $forEachSelectedAttribute.item.value","source":"\"update\" + $forEachSelectedAttribute.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"name":"value"},"name":"getFormDropdownValues","position":"190,200","title":"Get Form Element Property","transitions":[{"id":1132,"inputs":{},"position":"310,260 310,440","sourceConnector":"bottom","target":{"id":1115},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementProperty","id":1027,"inputs":{"elementName":{"accessors":["$forEachSelectedAttribute"],"annotations":[{"count":25,"index":11,"kind":"idref"}],"code":"\"update\" + $forEachSelectedAttribute.item.value","source":"\"update\" + $forEachSelectedAttribute.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"name":"type"},"name":"getFieldTypes","position":"-30,-170","title":"Get Form Element Property","transitions":[{"id":1129,"inputs":{},"position":"90,-110 90,-50","sourceConnector":"bottom","target":{"id":1275},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1069,"inputs":{"condition":{"accessors":["$getFieldTypes"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$getFieldTypes.value == \"Number\"","source":"$getFieldTypes.value == \"Number\""}},"position":"30,40","title":"If","transitions":[{"branch":"false","id":1071,"inputs":{},"position":"150,70 310,70 310,200","sourceConnector":"right","target":{"id":984},"targetConnector":"top"},{"branch":"true","id":1081,"inputs":{},"position":"30,70 -220,70 -220,110","sourceConnector":"left","target":{"id":1496},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementProperty","id":1076,"inputs":{"elementName":{"accessors":["$forEachSelectedAttribute"],"annotations":[{"count":25,"index":11,"kind":"idref"}],"code":"\"update\" + $forEachSelectedAttribute.item.value","source":"\"update\" + $forEachSelectedAttribute.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"name":"value"},"name":"getFormNumericValues","position":"-340,180","title":"Get Form Element Property","transitions":[{"id":1130,"inputs":{},"position":"-220,240 -220,310","sourceConnector":"bottom","target":{"id":1493},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1115,"inputs":{"attributeName":{"accessors":["$forEachSelectedAttribute"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$forEachSelectedAttribute.item.value","source":"$forEachSelectedAttribute.item.value"},"attributeValue":{"accessors":["$getFormDropdownValues"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$getFormDropdownValues.value","source":"$getFormDropdownValues.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"190,440","title":"Set Feature Attribute","transitions":[{"id":1885,"inputs":{},"position":"310,470 310,540","sourceConnector":"bottom","target":{"id":1884},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1119,"inputs":{"attributeName":{"accessors":["$forEachSelectedAttribute"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$forEachSelectedAttribute.item.value","source":"$forEachSelectedAttribute.item.value"},"attributeValue":{"accessors":["$getFormNumericValues"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$getFormNumericValues.value.numeric","source":"$getFormNumericValues.value.numeric"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-570,450","title":"Set Feature Attribute","transitions":[{"id":1893,"inputs":{},"position":"-450,480 -450,540","sourceConnector":"bottom","target":{"id":1881},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1275,"inputs":{"message":{"accessors":["$forEachSelectedAttribute"],"annotations":[{"count":25,"index":11,"kind":"idref"}],"code":"\"update\" + $forEachSelectedAttribute.item.value","source":"\"update\" + $forEachSelectedAttribute.item.value"}},"position":"-30,-50","title":"Log","transitions":[{"id":1281,"inputs":{},"position":"90,-20 90,40","sourceConnector":"bottom","target":{"id":1069},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1493,"inputs":{"condition":{"accessors":["$getFormNumericValues"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$getFormNumericValues.value != undefined","source":"$getFormNumericValues.value != undefined"}},"position":"-280,310","title":"If","transitions":[{"branch":"true","id":1495,"inputs":{},"position":"-280,340 -450,340 -450,450","sourceConnector":"left","target":{"id":1119},"targetConnector":"top"},{"branch":"false","id":1906,"inputs":{},"position":"-160,340 -70,340 -70,450","sourceConnector":"right","target":{"id":1899},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1496,"inputs":{"message":{"accessors":["$forEachSelectedAttribute"],"annotations":[{"count":25,"index":11,"kind":"idref"}],"code":"\"update\" + $forEachSelectedAttribute.item.value","source":"\"update\" + $forEachSelectedAttribute.item.value"}},"position":"-340,110","title":"Log","transitions":[{"id":1497,"inputs":{},"position":"-220,140 -220,180","sourceConnector":"bottom","target":{"id":1076},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1881,"inputs":{"message":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-570,540","title":"Log"},{"action":"gcx:wf:core::Log","id":1884,"inputs":{"message":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"190,540","title":"Log"},{"action":"gcx:wf:core::Log","id":1899,"inputs":{"message":{"accessors":["$getFormNumericValues"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$getFormNumericValues.value + \"IT ACTUALLY IS UNDEFINED\"","source":"$getFormNumericValues.value + \"IT ACTUALLY IS UNDEFINED\""}},"position":"-190,450","title":"Log"}]},{"id":988,"steps":[{"id":996,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1079,"inputs":{},"position":"90,60 90,100","sourceConnector":"bottom","target":{"id":1062},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":1062,"inputs":{"elementName":"newPd_Fc_Type","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$Pd_Fc_TypeDomainElements"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$Pd_Fc_TypeDomainElements.items","source":"$Pd_Fc_TypeDomainElements.items"}},"position":"-30,100","title":"Set Form Element Items"}],"title":"Blank-newPd_Fc_Type"},{"id":993,"steps":[{"id":994,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1007,"inputs":{},"position":"90,60 90,180","sourceConnector":"bottom","target":{"id":1002},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":1002,"inputs":{"elementName":"newShldr_Rt_T","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$Shldr_RtDomainElements"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$Shldr_RtDomainElements.items","source":"$Shldr_RtDomainElements.items"}},"position":"-30,180","title":"Set Form Element Items"}],"title":"Blank-newShldr_Rt_T"},{"id":1008,"steps":[{"id":1009,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1023,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":1018},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":1018,"inputs":{"elementName":"newCurb","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$CurbsDomainElements"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$CurbsDomainElements.items","source":"$CurbsDomainElements.items"}},"position":"-30,130","title":"Set Form Element Items"}],"title":"Blank-newCurb"},{"id":1024,"steps":[{"id":1025,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1038,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":1033},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":1033,"inputs":{"elementName":"newTerrain","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$TerrainDomainElements"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$TerrainDomainElements.items","source":"$TerrainDomainElements.items"}},"position":"-30,130","title":"Set Form Element Items"}],"title":"Blank-newTerrain"},{"id":1039,"steps":[{"id":1040,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1053,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":1048},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","id":1048,"inputs":{"elementName":"newStruct_Cnd","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$Struct_CndDomainElements"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$Struct_CndDomainElements.items","source":"$Struct_CndDomainElements.items"}},"position":"-30,130","title":"Set Form Element Items"}],"title":"Blank-newStruct_Cnd"},{"id":1082,"steps":[{"id":1084,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1103,"inputs":{},"position":"90,60 90,80 490,80 490,100","sourceConnector":"bottom","target":{"id":1091},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":1091,"inputs":{"field":"Left_Cond","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/34"},"name":"getcodedvalueupdateLeft_Cond","position":"370,100","title":"Get Coded Value Domain","transitions":[{"id":1100,"inputs":{},"position":"490,160 490,210","target":{"id":1094}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":1094,"inputs":{"collection":{"accessors":["$getcodedvalueupdateLeft_Cond"],"annotations":[{"count":29,"index":0,"kind":"idref"}],"code":"$getcodedvalueupdateLeft_Cond.domain.codedValues","source":"$getcodedvalueupdateLeft_Cond.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"updateLeft_CondElements","position":"370,210","title":"Get Form Element Items From Collection","transitions":[{"id":1102,"inputs":{},"position":"490,270 490,320","target":{"id":1098}}]},{"action":"gcx:wf:forms::SetFormElementItems","id":1098,"inputs":{"elementName":"updateLeft_Cond","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$updateLeft_CondElements"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$updateLeft_CondElements.items","source":"$updateLeft_CondElements.items"}},"position":"370,320","title":"Set Form Element Items"}],"title":"Blank-updateLeft_Cond"},{"id":1104,"steps":[{"id":1105,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1128,"inputs":{},"position":"90,60 90,100 510,100 510,120","sourceConnector":"bottom","target":{"id":1109},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":1109,"inputs":{"field":"Right_Cond","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/34"},"name":"getcodedvalueupdateRight_Cond","position":"390,120","title":"Get Coded Value Domain","transitions":[{"id":1120,"inputs":{},"position":"510,180 510,230","target":{"id":1111}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":1111,"inputs":{"collection":{"accessors":["$getcodedvalueupdateRight_Cond"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$getcodedvalueupdateRight_Cond.domain.codedValues","source":"$getcodedvalueupdateRight_Cond.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"updateRight_CondElements","position":"390,230","title":"Get Form Element Items From Collection","transitions":[{"id":1127,"inputs":{},"position":"510,290 510,340","target":{"id":1116}}]},{"action":"gcx:wf:forms::SetFormElementItems","id":1116,"inputs":{"elementName":"updateRight_Cond","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$updateRight_CondElements"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$updateRight_CondElements.items","source":"$updateRight_CondElements.items"}},"position":"390,340","title":"Set Form Element Items"}],"title":"Blank-updateRight_Cond"},{"id":1133,"steps":[{"id":1134,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1169,"inputs":{},"position":"90,60 90,120 530,120 530,140","sourceConnector":"bottom","target":{"id":1151},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":1151,"inputs":{"field":"Pd_Sf_Type","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/34"},"name":"getcodedvalueupdatePd_Sf_Type","position":"410,140","title":"Get Coded Value Domain","transitions":[{"id":1163,"inputs":{},"position":"530,200 530,250","target":{"id":1155}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":1155,"inputs":{"collection":{"accessors":["$getcodedvalueupdatePd_Sf_Type"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$getcodedvalueupdatePd_Sf_Type.domain.codedValues","source":"$getcodedvalueupdatePd_Sf_Type.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"updatePd_Sf_TypeElements","position":"410,250","title":"Get Form Element Items From Collection","transitions":[{"id":1167,"inputs":{},"position":"530,310 530,360","target":{"id":1159}}]},{"action":"gcx:wf:forms::SetFormElementItems","id":1159,"inputs":{"elementName":"updatePd_Sf_Type","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$updatePd_Sf_TypeElements"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$updatePd_Sf_TypeElements.items","source":"$updatePd_Sf_TypeElements.items"}},"position":"410,360","title":"Set Form Element Items"}],"title":"Blank-updatePd_Sf_Type"},{"id":1135,"steps":[{"id":1136,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1149,"inputs":{},"position":"90,60 90,150 130,150 130,170","sourceConnector":"bottom","target":{"id":1140},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":1140,"inputs":{"field":"Surface_Tp","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/51"},"name":"getcodedvalueSurface_Tp","position":"10,170","title":"Get Coded Value Domain","transitions":[{"id":1146,"inputs":{},"position":"130,230 130,280","target":{"id":1142}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":1142,"inputs":{"collection":{"accessors":["$getcodedvalueSurface_Tp"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$getcodedvalueSurface_Tp.domain.codedValues","source":"$getcodedvalueSurface_Tp.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"Surface_TpElements","position":"10,280","title":"Get Form Element Items From Collection","transitions":[{"id":1148,"inputs":{},"position":"130,340 130,390","target":{"id":1144}}]},{"action":"gcx:wf:forms::SetFormElementItems","id":1144,"inputs":{"elementName":"updateSurface_Tp","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$Surface_TpElements"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$Surface_TpElements.items","source":"$Surface_TpElements.items"}},"position":"10,390","title":"Set Form Element Items"}],"title":"Blank-updateSurface_Tp"},{"id":1138,"steps":[{"id":1141,"inputs":{},"position":"-180,770","purpose":"start","title":"Container","transitions":[{"id":1154,"inputs":{},"position":"-90,830 -90,880","sourceConnector":"bottom","target":{"id":1145},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":1145,"inputs":{"channelName":"arcgis","expect":"json","method":"GET","query":{"accessors":["$updateRoad","$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":55,"kind":"idref"},{"count":11,"index":115,"kind":"idref"},{"count":11,"index":187,"kind":"idref"}],"code":"{\n    f: \"json\",\n    outSR: 102100,\n    locations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value.numeric + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value.numeric + \"}]\",\n    attributeSet: \"[{layerId: 21, fields: [Jurisdictn]}, {layerId: 43, fields: [Speed_Lim]}, {layerId: 39, fields: [Shldr_Lt_W, Shldr_Lt_T]}, {layerId: 50, fields: [Surface_Tp, Surface_Wd]}, {layerId: 40, fields: [Shldr_Rt_W, Shldr_Rt_T]},  {layerId: 28, fields: [Num_Lanes]},  {layerId: 9, fields: [Curb]},  {layerId: 47, fields: [Operation]}, {layerId: 51, fields: [Terrain]}, {layerId: 48, fields: [Struct_Cnd]}, {layerId: 36, fields: [ROW_Width]}]\"\n}","source":"{\nf: \"json\",\noutSR: 102100,\nlocations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value.numeric + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value.numeric + \"}]\",\nattributeSet: \"[{layerId: 21, fields: [Jurisdictn]}, {layerId: 43, fields: [Speed_Lim]}, {layerId: 39, fields: [Shldr_Lt_W, Shldr_Lt_T]}, {layerId: 50, fields: [Surface_Tp, Surface_Wd]}, {layerId: 40, fields: [Shldr_Rt_W, Shldr_Rt_T]},  {layerId: 28, fields: [Num_Lanes]},  {layerId: 9, fields: [Curb]},  {layerId: 47, fields: [Operation]}, {layerId: 51, fields: [Terrain]}, {layerId: 48, fields: [Struct_Cnd]}, {layerId: 36, fields: [ROW_Width]}]\"\n}"},"url":"http://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/exts/LRSServer/networkLayers/61/queryAttributeSet"},"name":"getSegmentAtrributes1","position":"-210,880","title":"Send Web Request","transitions":[{"id":1156,"inputs":{},"position":"-90,940 -90,990","sourceConnector":"bottom","target":{"id":1150},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateFeatureSet","id":1150,"inputs":{"features":{"accessors":["$getSegmentAtrributes1"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$getSegmentAtrributes1.json.features","source":"$getSegmentAtrributes1.json.features"}},"name":"attributeFeatureSet1","position":"-210,990","title":"Create Feature Set","transitions":[{"id":1158,"inputs":{},"position":"-90,1050 -90,1110","sourceConnector":"bottom","target":{"id":1152},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":1152,"inputs":{"items":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.items","source":"$updateRoad.state.attributes.items\n"}},"name":"forEachSegment1","position":"-210,1110","title":"For Each"}]},{"id":1153,"steps":[{"id":1165,"inputs":{},"position":"10,-120","purpose":"start","title":"Try","transitions":[{"id":1288,"inputs":{},"position":"100,-60 100,-20","sourceConnector":"bottom","target":{"id":1261},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":1261,"inputs":{"json":{"accessors":["$submissionForm","$submissionForm","$editList","$allUpdates"],"annotations":[{"count":15,"index":7,"kind":"idref"},{"count":15,"index":48,"kind":"idref"},{"count":9,"index":201,"kind":"idref"},{"count":11,"index":220,"kind":"idref"}],"code":"{ name: $submissionForm.state.name.value,\n    email: $submissionForm.state.email.value,\n    subject: \"STAGING SUBMISSION - MassDOT Road Inventory Submission Application - Thank you for your submission!\",\n    body: $editList.result + $allUpdates.result,\n    toEmail: \"jose.simo@state.ma.us\",\n    toName: \"GIS Coordinator\"\n}","source":"{name: $submissionForm.state.name.value,\nemail: $submissionForm.state.email.value,\nsubject: \"STAGING SUBMISSION - MassDOT Road Inventory Submission Application - Thank you for your submission!\",\nbody: $editList.result + $allUpdates.result,\ntoEmail: \"jose.simo@state.ma.us\",\ntoName: \"GIS Coordinator\"\n}"},"method":"POST","url":"https://gisdev.massdot.state.ma.us/applications/Mailer/risaMailer.php"},"name":"sendMail1","position":"-20,-20","title":"Send Web Request","transitions":[{"id":1498,"inputs":{},"position":"100,50 100,120","sourceConnector":"bottom","target":{"id":1568},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::UpdateFeatures","id":1488,"inputs":{"features":{"accessors":["value2"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"value2.result","source":"value2.result"},"url":"http://gisdev.massdot.state.ma.us/arcgis/rest/services/RoadInventory/RoadUpdateSubmissions/FeatureServer/2"},"name":"updateEmailStatus","position":"-30,540","title":"Update Features","transitions":[{"id":1560,"inputs":{},"position":"90,610 90,650","sourceConnector":"bottom","target":{"id":1557},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1508,"inputs":{"expression":{"accessors":["$theSubmission"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$theSubmission.result","source":"$theSubmission.result"}},"name":"originalSubmission","position":"-20,220","title":"Create Value","transitions":[{"id":1511,"inputs":{},"position":"100,290 100,330","sourceConnector":"bottom","target":{"id":1520},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1509,"inputs":{"attributeName":"status","attributeValue":3,"feature":{"accessors":["$originalSubmission"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$originalSubmission.result","source":"$originalSubmission.result"}},"position":"-30,390","title":"Set Feature Attribute","transitions":[{"id":1517,"inputs":{},"position":"90,420 90,460","sourceConnector":"bottom","target":{"id":1545},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1520,"inputs":{"message":{"accessors":["$originalSubmission"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$originalSubmission.result","source":"$originalSubmission.result"}},"position":"-20,330","title":"Log"},{"action":"gcx:wf:core::Log","id":1545,"inputs":{"message":{"accessors":["$originalSubmission"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$originalSubmission.result","source":"$originalSubmission.result"}},"position":"-30,460","title":"Log","transitions":[{"id":1561,"inputs":{},"position":"90,490 90,540","sourceConnector":"bottom","target":{"id":1488},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1557,"inputs":{"message":{"accessors":["$updateEmailStatus"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$updateEmailStatus.results","source":"$updateEmailStatus.results"}},"position":"-30,650","title":"Log"},{"action":"gcx:wf:core::Log","id":1568,"inputs":{"message":{"accessors":["$sendMail1"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$sendMail1.json","source":"$sendMail1.json"}},"position":"-20,120","title":"Log","transitions":[{"id":1569,"inputs":{},"position":"100,150 100,220","sourceConnector":"bottom","target":{"id":1508},"targetConnector":"top"}]}]},{"id":1160,"steps":[{"id":1162,"inputs":{},"position":"0,-80","purpose":"start","title":"For Each","transitions":[{"id":1181,"inputs":{},"position":"90,-20 90,40","sourceConnector":"bottom","target":{"id":1164},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1164,"inputs":{"expression":{"accessors":["$forEachSegment1"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$forEachSegment1.item","source":"$forEachSegment1.item"}},"name":"eventAttributeName1","position":"-30,40","title":"Create Value","transitions":[{"id":1183,"inputs":{},"position":"90,100 90,170","sourceConnector":"bottom","target":{"id":1166},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SortFeatureSet","id":1166,"inputs":{"ascending":true,"features":{"accessors":["$attributeFeatureSet1"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$attributeFeatureSet1.featureSet","source":"$attributeFeatureSet1.featureSet"},"sortAttribute":{"accessors":["$eventAttributeName1"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$eventAttributeName1.result.value","source":"$eventAttributeName1.result.value"}},"name":"sortFeatureSet1","position":"-30,170","title":"Sort Feature Set","transitions":[{"id":1185,"inputs":{},"position":"90,230 90,290","sourceConnector":"bottom","target":{"id":1168},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetAttributeValue","id":1168,"inputs":{"attribute":{"accessors":["$eventAttributeName1"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$eventAttributeName1.result.value","source":"$eventAttributeName1.result.value"},"features":{"accessors":["$sortFeatureSet1"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$sortFeatureSet1.features[0]","source":"$sortFeatureSet1.features[0]"}},"name":"attributeValueLow1","position":"-30,290","title":"Get Feature Attribute Value","transitions":[{"id":1187,"inputs":{},"position":"90,350 90,440","sourceConnector":"bottom","target":{"id":1170},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetAttributeValue","id":1170,"inputs":{"attribute":{"accessors":["$eventAttributeName1"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$eventAttributeName1.result.value","source":"$eventAttributeName1.result.value"},"features":{"accessors":["$sortFeatureSet1","$sortFeatureSet1"],"annotations":[{"count":16,"index":0,"kind":"idref"},{"count":16,"index":26,"kind":"idref"}],"code":"$sortFeatureSet1.features[$sortFeatureSet1.features.length - 1]","source":"$sortFeatureSet1.features[$sortFeatureSet1.features.length - 1]"}},"name":"attributeValueHigh1","position":"-30,440","title":"Get Feature Attribute Value","transitions":[{"id":1189,"inputs":{},"position":"90,500 90,560","sourceConnector":"bottom","target":{"id":1172},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1172,"inputs":{"condition":{"accessors":["$attributeValueLow1","$attributeValueHigh1","$attributeValueLow1"],"annotations":[{"count":19,"index":1,"kind":"idref"},{"count":20,"index":30,"kind":"idref"},{"count":19,"index":61,"kind":"idref"}],"code":"($attributeValueLow1.value == $attributeValueHigh1.value) && ($attributeValueLow1.value != undefined)","source":"($attributeValueLow1.value == $attributeValueHigh1.value) &&($attributeValueLow1.value != undefined)"}},"position":"30,560","title":"If","transitions":[{"branch":"true","id":1191,"inputs":{},"position":"30,590 -220,590 -220,720","sourceConnector":"left","target":{"id":1177},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1177,"inputs":{"elementName":{"accessors":["$eventAttributeName1"],"annotations":[{"count":20,"index":11,"kind":"idref"}],"code":"\"update\" + $eventAttributeName1.result.value","source":"\"update\" + $eventAttributeName1.result.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$attributeValueHigh1"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$attributeValueHigh1.value","source":"$attributeValueHigh1.value"}},"position":"-340,720","title":"Set Form Element Property"}]},{"id":1171,"steps":[{"id":1176,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1204,"inputs":{},"position":"90,60 90,140 550,140 550,160","sourceConnector":"bottom","target":{"id":1186},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":1186,"inputs":{"field":"Pd_Fc_Type","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/34"},"name":"getcodedvalueupdatePd_Fc_Type","position":"430,160","title":"Get Coded Value Domain","transitions":[{"id":1199,"inputs":{},"position":"550,220 550,270","target":{"id":1190}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":1190,"inputs":{"collection":{"accessors":["$getcodedvalueupdatePd_Fc_Type"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$getcodedvalueupdatePd_Fc_Type.domain.codedValues","source":"$getcodedvalueupdatePd_Fc_Type.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"updatePd_Fc_TypeElements","position":"430,270","title":"Get Form Element Items From Collection","transitions":[{"id":1202,"inputs":{},"position":"550,330 550,380","target":{"id":1194}}]},{"action":"gcx:wf:forms::SetFormElementItems","id":1194,"inputs":{"elementName":"updatePd_Fc_Type","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$updatePd_Fc_TypeElements"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$updatePd_Fc_TypeElements.items","source":"$updatePd_Fc_TypeElements.items"}},"position":"430,380","title":"Set Form Element Items"}],"title":"Blank-updatePd_Fc_Type"},{"id":1173,"steps":[{"id":1174,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1179,"inputs":{},"position":"90,60 90,160","sourceConnector":"bottom","target":{"id":1178},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1178,"inputs":{"attributeName":"Surface_Tp","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateSurface_Tp.value","source":"$updateRoad.state.updateSurface_Tp.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,160","title":"Set Feature Attribute"}],"title":"change-updateSurface_Tp"},{"id":1196,"steps":[{"action":"gcx:wf:core::ClearItems","id":1192,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateGeom.state","source":"$updateRoad.state.updateGeom.state"}},"position":"-530,650","title":"Clear Collection","transitions":[{"id":1255,"inputs":{},"position":"-410,680 -410,730","sourceConnector":"bottom","target":{"id":1228},"targetConnector":"top"}]},{"id":1200,"inputs":{},"position":"-30,-790","purpose":"start","title":"Event","transitions":[{"id":1230,"inputs":{},"position":"60,-730 60,-630","target":{"id":1459},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","id":1216,"inputs":{"distance":15,"geometry":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.roadPicker.value.geometry[0]","source":"$updateRoad.state.roadPicker.value.geometry[0]"},"outFields":"St_Name","returnGeometry":false,"url":{"accessors":["$street_names"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$street_names.result","source":"$street_names.result"},"where":"1=1"},"name":"queryClickedPoint","position":"-60,-250","title":"Query Layer","transitions":[{"id":1384,"inputs":{},"position":"60,-190 60,10","sourceConnector":"bottom","target":{"id":1365},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1228,"inputs":{"attributeName":"St_Name","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateName.value","source":"$updateRoad.state.updateName.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-530,730","title":"Set Feature Attribute","transitions":[{"id":1289,"inputs":{},"position":"-410,760 -410,810","sourceConnector":"bottom","target":{"id":1234},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1234,"inputs":{"attributeName":"Route_ID","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateRouteID.value","source":"$updateRoad.state.updateRouteID.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-530,810","title":"Set Feature Attribute","transitions":[{"id":1294,"inputs":{},"position":"-410,840 -410,900","sourceConnector":"bottom","target":{"id":1240},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureGeometry","id":1240,"inputs":{"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"},"geometry":{"accessors":["$runDisplaySelectedRoad2"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$runDisplaySelectedRoad2.result.selectedFeatureGeom","source":"$runDisplaySelectedRoad2.result.selectedFeatureGeom"}},"position":"-530,900","title":"Set Feature Geometry","transitions":[{"id":1405,"inputs":{},"position":"-410,930 -410,1010","sourceConnector":"bottom","target":{"id":1404},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":1307,"inputs":{"elementName":"updateName","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":{"accessors":["$queryClickedPoint"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$queryClickedPoint.feature.attributes.St_Name","source":"$queryClickedPoint.feature.attributes.St_Name"}},"name":"setCurrentFormElementItem1","position":"-530,250","title":"Set Current Form Element Item","transitions":[{"id":1282,"inputs":{},"position":"-410,310 -410,340","sourceConnector":"bottom","target":{"id":1308},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1308,"inputs":{"elementName":"updateName","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$queryClickedPoint"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$queryClickedPoint.feature.attributes.St_Name","source":"$queryClickedPoint.feature.attributes.St_Name"}},"position":"-530,340","title":"Set Form Element Property","transitions":[{"id":1310,"inputs":{},"position":"-410,370 -410,400","sourceConnector":"bottom","target":{"id":1312},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1309,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.roadPicker.state","source":"$updateRoad.state.roadPicker.state"}},"position":"-530,460","title":"Clear Collection","transitions":[{"id":1313,"inputs":{},"position":"-410,490 -410,530","sourceConnector":"bottom","target":{"id":1311},"targetConnector":"top"}]},{"action":"gcx:wf:core::RunWorkflow","id":1311,"inputs":{"arguments":{"accessors":["$submissionForm","$queryClickedPoint"],"annotations":[{"count":15,"index":10,"kind":"idref"},{"count":18,"index":56,"kind":"idref"}],"code":"{\n    \"town\": $submissionForm.state.towns.value,\n    \"st_name\": $queryClickedPoint.feature.attributes.St_Name\n}","source":"{\n\"town\": $submissionForm.state.towns.value,\n\"st_name\": $queryClickedPoint.feature.attributes.St_Name\n}"},"url":"https://massdot.maps.arcgis.com/home/item.html?id=0300fbbf212c468f80b3016522008f8d"},"name":"runDisplaySelectedRoad2","position":"-530,530","title":"Run Workflow","transitions":[{"id":1315,"inputs":{},"position":"-410,590 -410,650","sourceConnector":"bottom","target":{"id":1192},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1312,"inputs":{"elementName":"roadPicker","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-530,400","title":"Set Form Element Property","transitions":[{"id":1256,"inputs":{},"position":"-410,430 -410,460","sourceConnector":"bottom","target":{"id":1309},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1365,"inputs":{"condition":{"accessors":["$queryClickedPoint","$queryClickedPoint"],"annotations":[{"count":18,"index":0,"kind":"idref"},{"count":18,"index":42,"kind":"idref"}],"code":"$queryClickedPoint.features.length > 0 && $queryClickedPoint.feature.attributes.St_Name !== \"\"","source":"$queryClickedPoint.features.length > 0 && $queryClickedPoint.feature.attributes.St_Name !== \"\""}},"position":"0,10","title":"If","transitions":[{"branch":"true","id":1367,"inputs":{},"position":"0,40 -410,40 -410,140","sourceConnector":"left","target":{"id":1515},"targetConnector":"top"},{"branch":"false","id":1375,"inputs":{},"position":"120,40 420,40 420,90","sourceConnector":"right","target":{"id":1637},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","id":1373,"inputs":{"distance":15,"geometry":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.roadPicker.value.geometry[0]","source":"$updateRoad.state.roadPicker.value.geometry[0]"},"outFields":"Route_ID","returnGeometry":true,"url":{"accessors":["$routes"],"annotations":[{"count":7,"index":0,"kind":"idref"}],"code":"$routes.result","source":"$routes.result"},"where":"1=1"},"name":"queryClickedPoint1","position":"300,920","title":"Query Layer","transitions":[{"id":1440,"inputs":{},"position":"420,980 420,1050","sourceConnector":"bottom","target":{"id":1393},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1389,"inputs":{"elementName":"updateSt_Name","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":"NO NAME"},"position":"1310,570","title":"Set Form Element Property"},{"action":"gcx:wf:forms::HideFormElement","id":1391,"inputs":{"elementName":"updateID","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-60,-360","title":"Hide Form Element","transitions":[{"id":1398,"inputs":{},"position":"60,-330 60,-250","sourceConnector":"bottom","target":{"id":1216},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1392,"inputs":{"message":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"300,1720","title":"Log"},{"action":"gcx:wf:forms::SetFormElementProperty","id":1393,"inputs":{"elementName":"roadPicker","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"300,1050","title":"Set Form Element Property","transitions":[{"id":1415,"inputs":{},"position":"420,1080 420,1170","sourceConnector":"bottom","target":{"id":1395},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1395,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.roadPicker.state","source":"$updateRoad.state.roadPicker.state"}},"position":"300,1170","title":"Clear Collection","transitions":[{"id":1419,"inputs":{},"position":"420,1200 420,1230","sourceConnector":"bottom","target":{"id":1397},"targetConnector":"top"}]},{"action":"gcx:wf:core::RunWorkflow","id":1397,"inputs":{"arguments":{"accessors":["$submissionForm","$queryClickedPoint1"],"annotations":[{"count":15,"index":10,"kind":"idref"},{"count":19,"index":79,"kind":"idref"}],"code":"{\n    \"town\": $submissionForm.state.towns.value,\n    \"st_name\": \"No Name\",\n    \"route_id\": $queryClickedPoint1.feature.attributes.Route_ID\n}","source":"{\n\"town\": $submissionForm.state.towns.value,\n\"st_name\": \"No Name\",\n\"route_id\": $queryClickedPoint1.feature.attributes.Route_ID\n}"},"url":"https://massdot.maps.arcgis.com/home/item.html?id=0300fbbf212c468f80b3016522008f8d"},"name":"runDisplaySelectedRoad3","position":"300,1230","title":"Run Workflow","transitions":[{"id":1396,"inputs":{},"position":"420,1290 420,1360","sourceConnector":"bottom","target":{"id":1399},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1399,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateGeom.state","source":"$updateRoad.state.updateGeom.state"}},"position":"300,1360","title":"Clear Collection","transitions":[{"id":1425,"inputs":{},"position":"420,1390 420,1480","sourceConnector":"bottom","target":{"id":1401},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1401,"inputs":{"attributeName":"St_Name","attributeValue":{"accessors":[],"code":"\"NO NAME\"","source":"\"NO NAME\""},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"300,1480","title":"Set Feature Attribute","transitions":[{"id":1427,"inputs":{},"position":"420,1510 420,1540","sourceConnector":"bottom","target":{"id":1403},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1402,"inputs":{"elementName":"updateName","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":"NO NAME"},"position":"1310,480","title":"Set Form Element Property","transitions":[{"id":1418,"inputs":{},"position":"1430,510 1430,570","sourceConnector":"bottom","target":{"id":1389},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1403,"inputs":{"attributeName":"Route_ID","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateRouteID.value","source":"$updateRoad.state.updateRouteID.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"300,1540","title":"Set Feature Attribute","transitions":[{"id":1429,"inputs":{},"position":"420,1570 420,1620","sourceConnector":"bottom","target":{"id":1407},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1404,"inputs":{"message":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-530,1010","title":"Log"},{"action":"gcx:wf:arcgis::SetFeatureGeometry","id":1407,"inputs":{"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"},"geometry":{"accessors":["$runDisplaySelectedRoad3"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$runDisplaySelectedRoad3.result.selectedFeatureGeom","source":"$runDisplaySelectedRoad3.result.selectedFeatureGeom"}},"position":"300,1620","title":"Set Feature Geometry","transitions":[{"id":1394,"inputs":{},"position":"420,1650 420,1720","sourceConnector":"bottom","target":{"id":1392},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":1443,"inputs":{"elementName":"updateName","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":{"accessors":[],"code":"\"NO NAME\"","source":"\"NO NAME\""}},"name":"setCurrentFormElementItem2","position":"1830,420","title":"Set Current Form Element Item"},{"action":"gcx:wf:core:loop:ForEach","description":"Remove all attribute fields from the form","id":1459,"inputs":{"items":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.items","source":"$updateRoad.state.attributes.items"}},"name":"removeFields1","position":"-60,-630","title":"For Each","transitions":[{"id":1462,"inputs":{},"position":"60,-470 60,-360","sourceConnector":"bottom","target":{"id":1391},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1489,"inputs":{"elementName":"updateRouteID","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$queryClickedPoint1"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$queryClickedPoint1.feature.attributes.Route_ID","source":"$queryClickedPoint1.feature.attributes.Route_ID"}},"position":"1310,390","title":"Set Form Element Property","transitions":[{"id":1490,"inputs":{},"position":"1430,420 1430,480","sourceConnector":"bottom","target":{"id":1402},"targetConnector":"top"}]},{"action":"gcx:wf:core::Annotation","description":"Checks if clicked point has an underlying street name","id":1514,"inputs":{},"position":"180,-80","title":"Notes"},{"action":"gcx:wf:core::Log","id":1515,"inputs":{"message":"Clicked point has street name events. Attempting to find route IDs of this street by street name"},"position":"-530,140","title":"Log","transitions":[{"id":1516,"inputs":{},"position":"-410,170 -410,250","sourceConnector":"bottom","target":{"id":1307},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1519,"inputs":{"message":"Clicked point has no street name event. Attempting to find route ID to work with"},"position":"300,810","title":"Log","transitions":[{"id":1521,"inputs":{},"position":"420,840 420,920","sourceConnector":"bottom","target":{"id":1373},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1637,"inputs":{"message":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateName.items","source":"$updateRoad.state.updateName.items"}},"position":"300,90","title":"Log","transitions":[{"id":1625,"inputs":{},"position":"420,120 420,150","sourceConnector":"bottom","target":{"id":1646},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Query for street names.","id":1646,"inputs":{"groupByFieldsForStatistics":"St_Name","orderByFields":"St_Name","outFields":"St_Name","returnDistinctValues":true,"returnGeometry":false,"url":{"accessors":["$street_names"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$street_names.result","source":"$street_names.result"},"where":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":37,"kind":"idref"}],"code":"\"objectid > 0 and City_Maint = '\" + $submissionForm.state.towns.value + \"' and St_Name <> ''\"","source":" \"objectid > 0 and City_Maint = '\" + $submissionForm.state.towns.value + \"' and St_Name <> ''\""}},"name":"roadQuery2","position":"300,150","title":"Road Query","transitions":[{"id":1656,"inputs":{},"position":"420,240 420,290","sourceConnector":"bottom","target":{"id":1648},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1648,"inputs":{"message":{"accessors":["$roadQuery2"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$roadQuery2.features[5]","source":"$roadQuery2.features[5]"}},"position":"300,290","title":"Log","transitions":[{"id":1658,"inputs":{},"position":"420,320 420,380","sourceConnector":"bottom","target":{"id":1665},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the street names into form element items to be used in the element.","id":1652,"inputs":{"features":{"accessors":["$roadQuery2"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$roadQuery2.features","source":"$roadQuery2.features"},"labelFieldName":"{St_Name}","valueFieldName":"St_Name"},"name":"roadNames2","position":"300,480","title":"Get Form Element Items From Features","transitions":[{"id":1660,"inputs":{},"position":"420,610 420,650","sourceConnector":"bottom","target":{"id":1654},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","id":1654,"inputs":{"elementName":"updateName","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"items":{"accessors":["$roadNames2"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$roadNames2.items","source":"$roadNames2.items"}},"position":"300,650","title":"Set Form Element Items","transitions":[{"id":1662,"inputs":{},"position":"420,730 420,810","sourceConnector":"bottom","target":{"id":1519},"targetConnector":"top"}]},{"action":"gcx:wf:core::AddItem","id":1665,"inputs":{"collection":{"accessors":["$roadQuery2"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$roadQuery2.features","source":"$roadQuery2.features"},"item":{"accessors":[],"annotations":[],"code":"{ attributes: { St_Name: \"NO NAME\" } }","source":"{attributes:{St_Name: \"NO NAME\"}}"}},"position":"300,380","title":"Add Item","transitions":[{"id":1666,"inputs":{},"position":"420,410 420,480","sourceConnector":"bottom","target":{"id":1652},"targetConnector":"top"}]}],"title":"change-roadPicker"},{"id":1201,"steps":[{"id":1203,"inputs":{},"position":"-180,770","purpose":"start","title":"Container","transitions":[{"id":1211,"inputs":{},"position":"-90,830 -90,880","sourceConnector":"bottom","target":{"id":1205},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":1205,"inputs":{"channelName":"arcgis","expect":"json","method":"GET","query":{"accessors":["$updateRoad","$updateRoad","$updateRoad"],"annotations":[{"count":11,"index":55,"kind":"idref"},{"count":11,"index":115,"kind":"idref"},{"count":11,"index":187,"kind":"idref"}],"code":"{\n    f: \"json\",\n    outSR: 102100,\n    locations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value.numeric + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value.numeric + \"}]\",\n    attributeSet: \"[{layerId: 21, fields: [Jurisdictn]}, {layerId: 43, fields: [Speed_Lim]}, {layerId: 39, fields: [Shldr_Lt_W, Shldr_Lt_T]}, {layerId: 50, fields: [Surface_Tp, Surface_Wd]}, {layerId: 40, fields: [Shldr_Rt_W, Shldr_Rt_T]},  {layerId: 28, fields: [Num_Lanes]},  {layerId: 9, fields: [Curb]},  {layerId: 47, fields: [Operation]}, {layerId: 51, fields: [Terrain]}, {layerId: 48, fields: [Struct_Cnd]}, {layerId: 36, fields: [ROW_Width]}, {layerId: 60, fields: [St_Name]}]\"\n}","source":"{\nf: \"json\",\noutSR: 102100,\nlocations: \"[{routeId: \" + $updateRoad.state.updateRouteID.value + \", fromMeasure: \" + $updateRoad.state.updateFrom_Measure.value.numeric + \"0, toMeasure: \" + $updateRoad.state.updateTo_Measure.value.numeric + \"}]\",\nattributeSet: \"[{layerId: 21, fields: [Jurisdictn]}, {layerId: 43, fields: [Speed_Lim]}, {layerId: 39, fields: [Shldr_Lt_W, Shldr_Lt_T]}, {layerId: 50, fields: [Surface_Tp, Surface_Wd]}, {layerId: 40, fields: [Shldr_Rt_W, Shldr_Rt_T]},  {layerId: 28, fields: [Num_Lanes]},  {layerId: 9, fields: [Curb]},  {layerId: 47, fields: [Operation]}, {layerId: 51, fields: [Terrain]}, {layerId: 48, fields: [Struct_Cnd]}, {layerId: 36, fields: [ROW_Width]}, {layerId: 60, fields: [St_Name]}]\"\n}"},"url":"http://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/exts/LRSServer/networkLayers/61/queryAttributeSet"},"name":"getSegmentAtrributes2","position":"-210,880","title":"Send Web Request","transitions":[{"id":1213,"inputs":{},"position":"-90,940 -90,1000","sourceConnector":"bottom","target":{"id":1207},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateFeatureSet","id":1207,"inputs":{"features":{"accessors":["$getSegmentAtrributes2"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$getSegmentAtrributes2.json.features","source":"$getSegmentAtrributes2.json.features"}},"name":"attributeFeatureSet2","position":"-210,1000","title":"Create Feature Set","transitions":[{"id":1538,"inputs":{},"position":"-90,1060 -90,1200","sourceConnector":"bottom","target":{"id":1209},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":1209,"inputs":{"items":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.attributes.items","source":"$updateRoad.state.attributes.items\n"}},"name":"forEachSegment2","position":"-210,1200","title":"For Each"}]},{"id":1210,"steps":[{"id":1248,"inputs":{},"position":"0,0","purpose":"start","title":"Catch"}]},{"id":1217,"steps":[{"id":1219,"inputs":{},"position":"0,-80","purpose":"start","title":"For Each","transitions":[{"id":1233,"inputs":{},"position":"90,-20 90,40","sourceConnector":"bottom","target":{"id":1221},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1221,"inputs":{"expression":{"accessors":["$forEachSegment2"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$forEachSegment2.item","source":"$forEachSegment2.item"}},"name":"eventAttributeName2","position":"-30,40","title":"Create Value","transitions":[{"id":1235,"inputs":{},"position":"90,100 90,170","sourceConnector":"bottom","target":{"id":1223},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SortFeatureSet","id":1223,"inputs":{"ascending":true,"features":{"accessors":["$attributeFeatureSet2"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$attributeFeatureSet2.featureSet","source":"$attributeFeatureSet2.featureSet"},"sortAttribute":{"accessors":["$eventAttributeName2"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$eventAttributeName2.result.value","source":"$eventAttributeName2.result.value"}},"name":"sortFeatureSet2","position":"-30,170","title":"Sort Feature Set","transitions":[{"id":1237,"inputs":{},"position":"90,230 90,290","sourceConnector":"bottom","target":{"id":1225},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetAttributeValue","id":1225,"inputs":{"attribute":{"accessors":["$eventAttributeName2"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$eventAttributeName2.result.value","source":"$eventAttributeName2.result.value"},"features":{"accessors":["$sortFeatureSet2"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$sortFeatureSet2.features[0]","source":"$sortFeatureSet2.features[0]"}},"name":"attributeValueLow2","position":"-30,290","title":"Get Feature Attribute Value","transitions":[{"id":1239,"inputs":{},"position":"90,350 90,410","sourceConnector":"bottom","target":{"id":1227},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetAttributeValue","id":1227,"inputs":{"attribute":{"accessors":["$eventAttributeName2"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$eventAttributeName2.result.value","source":"$eventAttributeName2.result.value"},"features":{"accessors":["$sortFeatureSet2","$sortFeatureSet2"],"annotations":[{"count":16,"index":0,"kind":"idref"},{"count":16,"index":26,"kind":"idref"}],"code":"$sortFeatureSet2.features[$sortFeatureSet2.features.length - 1]","source":"$sortFeatureSet2.features[$sortFeatureSet2.features.length - 1]"}},"name":"attributeValueHigh2","position":"-30,410","title":"Get Feature Attribute Value","transitions":[{"id":1241,"inputs":{},"position":"90,470 90,560","sourceConnector":"bottom","target":{"id":1229},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1229,"inputs":{"condition":{"accessors":["$attributeValueLow2","$attributeValueHigh2","$attributeValueLow2"],"annotations":[{"count":19,"index":1,"kind":"idref"},{"count":20,"index":30,"kind":"idref"},{"count":19,"index":61,"kind":"idref"}],"code":"($attributeValueLow2.value == $attributeValueHigh2.value) && ($attributeValueLow2.value != undefined)","source":"($attributeValueLow2.value == $attributeValueHigh2.value) &&($attributeValueLow2.value != undefined)"}},"position":"30,560","title":"If","transitions":[{"branch":"true","id":1539,"inputs":{},"position":"30,590 -250,590 -250,740","sourceConnector":"left","target":{"id":1546},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1231,"inputs":{"elementName":{"accessors":["$eventAttributeName2"],"annotations":[{"count":20,"index":11,"kind":"idref"}],"code":"\"update\" + $eventAttributeName2.result.value","source":"\"update\" + $eventAttributeName2.result.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$attributeValueHigh2"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$attributeValueHigh2.value","source":"$attributeValueHigh2.value"}},"position":"-370,870","title":"Set Form Element Property","transitions":[{"id":1543,"inputs":{},"position":"-250,900 -250,1020","sourceConnector":"bottom","target":{"id":1550},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1542,"inputs":{"message":{"accessors":["$attributeValueHigh2"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$attributeValueHigh2.value","source":"$attributeValueHigh2.value"}},"position":"-370,1290","title":"Log"},{"action":"gcx:wf:core::Log","id":1546,"inputs":{"message":{"accessors":["$eventAttributeName2"],"annotations":[{"count":20,"index":11,"kind":"idref"}],"code":"\"update\" + $eventAttributeName2.result.value","source":"\"update\" + $eventAttributeName2.result.value"}},"position":"-370,740","title":"Log","transitions":[{"id":1547,"inputs":{},"position":"-250,770 -250,870","sourceConnector":"bottom","target":{"id":1231},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":1550,"inputs":{"elementName":{"accessors":["$eventAttributeName2"],"annotations":[{"count":20,"index":11,"kind":"idref"}],"code":"\"update\" + $eventAttributeName2.result.value","source":"\"update\" + $eventAttributeName2.result.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"value","value":{"accessors":["$attributeValueHigh2"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$attributeValueHigh2.value","source":"$attributeValueHigh2.value"}},"name":"setCurrentFormElementItem3","position":"-370,1020","title":"Set Current Form Element Item","transitions":[{"id":1551,"inputs":{},"position":"-250,1080 -250,1140","sourceConnector":"bottom","target":{"id":1554},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetCurrentFormElementItem","id":1554,"inputs":{"elementName":{"accessors":["$eventAttributeName2"],"annotations":[{"count":20,"index":11,"kind":"idref"}],"code":"\"update\" + $eventAttributeName2.result.value","source":"\"update\" + $eventAttributeName2.result.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"matchType":"item","value":{"accessors":["$attributeValueHigh2"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$attributeValueHigh2.value","source":"$attributeValueHigh2.value"}},"name":"setCurrentFormElementItem4","position":"-370,1140","title":"Set Current Form Element Item","transitions":[{"id":1555,"inputs":{},"position":"-250,1200 -250,1290","sourceConnector":"bottom","target":{"id":1542},"targetConnector":"top"}]}]},{"id":1232,"steps":[{"id":1238,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1318,"inputs":{},"position":"90,60 90,180","sourceConnector":"bottom","target":{"id":1314},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1301,"inputs":{"expression":": "},"name":"allUpdates","position":"-30,340","title":"Create Value","transitions":[{"id":1212,"inputs":{},"position":"90,410 90,500","sourceConnector":"bottom","target":{"id":1360},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","id":1314,"inputs":{"outFields":"Update_Type, St_Name, City","returnGeometry":false,"url":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/RoadUpdateSubmissions/MapServer/1","where":{"accessors":["$submission_ID"],"annotations":[{"count":14,"index":22,"kind":"idref"}],"code":"\"Submission_ID = '\" + $submission_ID.result + \"'\"","source":"\"Submission_ID = '\" + $submission_ID.result + \"'\""}},"name":"getUpdates","position":"-30,180","title":"Query Layer","transitions":[{"id":1319,"inputs":{},"position":"90,250 90,340","sourceConnector":"bottom","target":{"id":1301},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":1360,"inputs":{"items":{"accessors":["$getUpdates"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$getUpdates.features","source":"$getUpdates.features"}},"name":"forEachSelectedAttribute1","position":"-30,500","title":"For Each"}]},{"id":1257,"steps":[{"id":1258,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1263,"inputs":{},"position":"90,60 90,150","sourceConnector":"bottom","target":{"id":1262},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1262,"inputs":{"attributeName":"Left_Cond","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateLeft_Cond.value","source":"$updateRoad.state.updateLeft_Cond.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,150","title":"Set Feature Attribute"}],"title":"change-updateLeft_Cond"},{"id":1264,"steps":[{"id":1265,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1270,"inputs":{},"position":"90,60 90,120","sourceConnector":"bottom","target":{"id":1269},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1269,"inputs":{"attributeName":"Right_Cond","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateRight_Cond.value","source":"$updateRoad.state.updateRight_Cond.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,120","title":"Set Feature Attribute"}],"title":"change-updateRight_Cond"},{"id":1271,"steps":[{"id":1272,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1277,"inputs":{},"position":"90,60 90,180 110,180 110,200","sourceConnector":"bottom","target":{"id":1276},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1276,"inputs":{"attributeName":"Path_Width","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updatePath_Width.value.numeric","source":"$updateRoad.state.updatePath_Width.value.numeric"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-10,200","title":"Set Feature Attribute"}],"title":"change-updatePath_Width"},{"id":1278,"steps":[{"id":1279,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1284,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":1283},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1283,"inputs":{"attributeName":"Pd_Sf_Type","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updatePd_Sf_Type.value","source":"$updateRoad.state.updatePd_Sf_Type.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,130","title":"Set Feature Attribute"}],"title":"change-updatePd_Sf_Type"},{"id":1285,"steps":[{"id":1286,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1291,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":1290},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":1290,"inputs":{"attributeName":"Pd_Fc_Type","attributeValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updatePd_Fc_Type.value","source":"$updateRoad.state.updatePd_Fc_Type.value"},"feature":{"accessors":["$updateFeature"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$updateFeature.feature","source":"$updateFeature.feature"}},"position":"-30,130","title":"Set Feature Attribute"}],"title":"change-updatePd_Fc_Type"},{"id":1324,"steps":[{"id":1326,"inputs":{},"position":"0,-440","purpose":"start","title":"For Each","transitions":[{"id":1246,"inputs":{},"position":"90,-380 90,-160","sourceConnector":"bottom","target":{"id":1328},"targetConnector":"top"}]},{"action":"gcx:wf:core::Evaluate","id":1328,"inputs":{"expression":{"accessors":["$allUpdates","$forEachSelectedAttribute1","$forEachSelectedAttribute1"],"annotations":[{"count":11,"index":0,"kind":"idref"},{"count":26,"index":30,"kind":"idref"},{"count":26,"index":95,"kind":"idref"}],"code":"$allUpdates.result += \" \\n\" + $forEachSelectedAttribute1.item.attributes.Update_Type + \": \" + $forEachSelectedAttribute1.item.attributes.St_Name","source":"$allUpdates.result += \" \\n\" + $forEachSelectedAttribute1.item.attributes.Update_Type + \": \"  + $forEachSelectedAttribute1.item.attributes.St_Name "}},"name":"addUpdate","position":"-30,-160","title":"Evaluate Expression"}]},{"id":1329,"steps":[{"action":"gcx:wf:forms::SetFormElementProperty","id":1331,"inputs":{"elementName":"updateLength","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$querySelectedRoadMeasures","$querySelectedRoadMeasures"],"annotations":[{"count":26,"index":1,"kind":"idref"},{"count":26,"index":57,"kind":"idref"}],"code":"($querySelectedRoadMeasures.feature.attributes.EndMile - $querySelectedRoadMeasures.feature.attributes.StartMile)","source":"($querySelectedRoadMeasures.feature.attributes.EndMile - $querySelectedRoadMeasures.feature.attributes.StartMile)"}},"position":"-540,1360","title":"Set Form Element Property","transitions":[{"id":1349,"inputs":{},"position":"-420,1390 -420,1460","sourceConnector":"bottom","target":{"id":1347},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1333,"inputs":{"elementName":"updateFrom_Measure","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$querySelectedRoadMeasures"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$querySelectedRoadMeasures.feature.attributes.StartMile","source":"$querySelectedRoadMeasures.feature.attributes.StartMile"}},"position":"-540,1300","title":"Set Form Element Property","transitions":[{"id":1354,"inputs":{},"position":"-420,1330 -420,1360","sourceConnector":"bottom","target":{"id":1331},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1335,"inputs":{"layerId":"updateSegmentLayer"},"position":"-540,460","title":"Clear Graphics Layer","transitions":[{"id":1356,"inputs":{},"position":"-420,490 -420,530","sourceConnector":"bottom","target":{"id":1337},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Find all roads with same Route ID","id":1337,"inputs":{"outFields":"*","returnGeometry":{"accessors":[],"code":"true","source":"true"},"url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventory/mapserver/0","where":{"accessors":["$submissionForm","$updateRoad"],"annotations":[{"count":15,"index":31,"kind":"idref"},{"count":11,"index":90,"kind":"idref"}],"code":"\"objectid > 0 and City = '\" + $submissionForm.state.towns.value + \"' and Route_ID = '\" + $updateRoad.state.updateID.value + \"'\"","source":" \"objectid > 0 and City = '\" + $submissionForm.state.towns.value + \"' and Route_ID = '\" + $updateRoad.state.updateID.value + \"'\""}},"name":"querySelectedRoad","position":"-540,530","title":"Query Route ID","transitions":[{"id":1361,"inputs":{},"position":"-420,620 -420,680","sourceConnector":"bottom","target":{"id":1341},"targetConnector":"top"}]},{"id":1339,"inputs":{},"position":"-510,350","purpose":"start","title":"Container","transitions":[{"id":1358,"inputs":{},"position":"-420,410 -420,460","sourceConnector":"bottom","target":{"id":1335},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetFeatureGeometries","id":1341,"inputs":{"features":{"accessors":["$querySelectedRoad"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$querySelectedRoad.features","source":"$querySelectedRoad.features"},"union":true},"name":"getSelectedRoadGeometry","position":"-540,680","title":"Get Road Geometries","transitions":[{"id":1364,"inputs":{},"position":"-420,740 -420,770","sourceConnector":"bottom","target":{"id":1343},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":1343,"inputs":{"geometry":{"accessors":["$getSelectedRoadGeometry"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$getSelectedRoadGeometry.geometry","source":"$getSelectedRoadGeometry.geometry"},"symbol":{"accessors":["$selectedRoadSymbol"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$selectedRoadSymbol.symbol","source":"$selectedRoadSymbol.symbol"}},"name":"createSelectedRoadFeature","position":"-540,770","title":"Create Road Feature","transitions":[{"id":1366,"inputs":{},"position":"-420,830 -420,880","sourceConnector":"bottom","target":{"id":1346},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::AddGraphicsLayerFeatures","id":1346,"inputs":{"features":{"accessors":["$createSelectedRoadFeature"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$createSelectedRoadFeature.feature","source":"$createSelectedRoadFeature.feature"},"layerId":"roadLayer","removeAllFeatures":true},"name":"addSelectedRoad","position":"-540,880","title":"Add Road Graphics Layer Feature","transitions":[{"id":1368,"inputs":{},"position":"-420,940 -420,990","sourceConnector":"bottom","target":{"id":1348},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1347,"inputs":{"elementName":"updateRouteID","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateID.value","source":"$updateRoad.state.updateID.value"}},"position":"-540,1460","title":"Set Form Element Property"},{"action":"gcx:wf:arcgis::SetViewExtent","id":1348,"inputs":{"geometry":{"accessors":["$createSelectedRoadFeature"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$createSelectedRoadFeature.feature.geometry","source":"$createSelectedRoadFeature.feature.geometry"}},"name":"setMapExtentToSelectedRoad","position":"-540,990","title":"Set Map Extent to Road","transitions":[{"id":1370,"inputs":{},"position":"-420,1050 -420,1080","sourceConnector":"bottom","target":{"id":1350},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","description":"Find from and to measures of selected Route ID","id":1350,"inputs":{"groupByFieldsForStatistics":"Route_ID","outStatistics":{"accessors":[],"annotations":[],"code":"[{\n        \"statisticType\": \"Min\",\n        \"onStatisticField\": \"From_Measure\",\n        \"outStatisticFieldName\": \"StartMile\"\n    },\n    {\n        \"statisticType\": \"max\",\n        \"onStatisticField\": \"To_Measure\",\n        \"outStatisticFieldName\": \"EndMile\"\n    }]","source":"[{\n    \"statisticType\": \"Min\",\n    \"onStatisticField\": \"From_Measure\",\n    \"outStatisticFieldName\": \"StartMile\"\n  },\n{\n    \"statisticType\": \"max\",\n    \"onStatisticField\": \"To_Measure\",\n    \"outStatisticFieldName\": \"EndMile\"\n  }]"},"returnGeometry":{"accessors":[],"code":"false","source":"false"},"url":{"accessors":["$street_names"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$street_names.result","source":"$street_names.result"},"where":{"accessors":["$submissionForm","$updateRoad"],"annotations":[{"count":15,"index":37,"kind":"idref"},{"count":11,"index":96,"kind":"idref"}],"code":"\"objectid > 0 and City_Maint = '\" + $submissionForm.state.towns.value + \"' and Route_ID = '\" + $updateRoad.state.updateID.value + \"'\"","source":" \"objectid > 0 and City_Maint = '\" + $submissionForm.state.towns.value + \"' and Route_ID = '\" + $updateRoad.state.updateID.value + \"'\""}},"name":"querySelectedRoadMeasures","position":"-540,1080","title":"Query Selected Road Measures","transitions":[{"id":1372,"inputs":{},"position":"-420,1190 -420,1240","sourceConnector":"bottom","target":{"id":1352},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1352,"inputs":{"elementName":"updateTo_Measure","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$querySelectedRoadMeasures"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$querySelectedRoadMeasures.feature.attributes.EndMile","source":"$querySelectedRoadMeasures.feature.attributes.EndMile"}},"position":"-540,1240","title":"Set Form Element Property","transitions":[{"id":1374,"inputs":{},"position":"-420,1270 -420,1300","sourceConnector":"bottom","target":{"id":1333},"targetConnector":"top"}]}]},{"id":1447,"steps":[{"id":1449,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1455,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":1451},"targetConnector":"top"}]},{"action":"gcx:wf:forms::HideFormElement","id":1451,"inputs":{"elementName":{"accessors":["$removeFields1"],"annotations":[{"count":14,"index":11,"kind":"idref"}],"code":"\"update\" + $removeFields1.item.value","source":"\"update\" + $removeFields1.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"name":"hideField1","position":"-30,130","title":"Hide Form Element"}]},{"id":1465,"steps":[{"id":1467,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1473,"inputs":{},"position":"90,60 90,110","sourceConnector":"bottom","target":{"id":1469},"targetConnector":"top"}]},{"action":"gcx:wf:forms::HideFormElement","id":1469,"inputs":{"elementName":{"accessors":["$removeFields2"],"annotations":[{"count":14,"index":11,"kind":"idref"}],"code":"\"update\" + $removeFields2.item.value","source":"\"update\" + $removeFields2.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"name":"hideField2","position":"-30,110","title":"Hide Form Element","transitions":[{"id":1475,"inputs":{},"position":"90,170 90,260","sourceConnector":"bottom","target":{"id":1471},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1471,"inputs":{"elementName":{"accessors":["$removeFields2"],"annotations":[{"count":14,"index":11,"kind":"idref"}],"code":"\"update\" + $removeFields2.item.value","source":"\"update\" + $removeFields2.item.value"},"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-30,260","title":"Set Form Element Property"}]},{"id":1474,"steps":[{"id":1476,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1504,"inputs":{},"position":"90,60 90,110","sourceConnector":"bottom","target":{"id":1487},"targetConnector":"top"}]},{"action":"gcx:wf:ui::Confirm","id":1487,"inputs":{"text":"All information on this form will be deleted and lost permanently. Are you sure you want to continue and update an existing road without saving?"},"name":"confirm1","position":"-30,110","title":"Confirm","transitions":[{"id":1501,"inputs":{},"position":"90,170 90,230","sourceConnector":"bottom","target":{"id":1494},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1494,"inputs":{"condition":{"accessors":["$confirm1"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$confirm1.result === true","source":"$confirm1.result === true"}},"position":"30,230","title":"If","transitions":[{"branch":"true","id":1503,"inputs":{},"position":"30,260 -30,260 -30,350","sourceConnector":"left","target":{"id":1607},"targetConnector":"top"}]},{"action":"gcx:wf:forms::PropagateFormEvent","id":1499,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-150,480","title":"Propagate Form Event"},{"action":"gcx:wf:forms::SetFormElementProperty","id":1607,"inputs":{"elementName":"newGeom","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-150,350","title":"Set Form Element Property","transitions":[{"id":1611,"inputs":{},"position":"-30,380 -30,410","sourceConnector":"bottom","target":{"id":1609},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1609,"inputs":{"collection":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.state.newGeom.state","source":"$newRoad.state.newGeom.state"}},"position":"-150,410","title":"Clear Collection","transitions":[{"id":1612,"inputs":{},"position":"-30,440 -30,480","sourceConnector":"bottom","target":{"id":1499},"targetConnector":"top"}]}],"title":"click-buttonBar2"},{"id":1505,"steps":[{"id":1506,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1531,"inputs":{},"position":"90,60 90,110","sourceConnector":"bottom","target":{"id":1518},"targetConnector":"top"}]},{"action":"gcx:wf:forms::PropagateFormEvent","id":1510,"inputs":{"form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-470,820","title":"Propagate Form Event"},{"action":"gcx:wf:core::If","id":1512,"inputs":{"condition":{"accessors":["$confirm2"],"annotations":[{"count":9,"index":0,"kind":"idref"}],"code":"$confirm2.result === true","source":"$confirm2.result === true"}},"position":"30,240","title":"If","transitions":[{"branch":"true","id":1524,"inputs":{},"position":"30,270 -350,270 -350,350","sourceConnector":"left","target":{"id":1552},"targetConnector":"top"}]},{"action":"gcx:wf:ui::Confirm","id":1518,"inputs":{"text":"All information on this form will be deleted and lost permanently. Are you sure you want to continue and add a new road without saving?"},"name":"confirm2","position":"-30,110","title":"Confirm","transitions":[{"id":1530,"inputs":{},"position":"90,180 90,240","sourceConnector":"bottom","target":{"id":1512},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1548,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateGeom.state","source":"$updateRoad.state.updateGeom.state"}},"position":"-470,570","title":"Clear Collection","transitions":[{"id":1556,"inputs":{},"position":"-350,600 -350,650","sourceConnector":"bottom","target":{"id":1617},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1552,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.roadPicker.state","source":"$updateRoad.state.roadPicker.state"}},"position":"-470,350","title":"Clear Collection","transitions":[{"id":1586,"inputs":{},"position":"-350,380 -350,420","sourceConnector":"bottom","target":{"id":1582},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1563,"inputs":{"layerId":"updateSegmentLayer"},"position":"-50,-710","title":"Clear Graphics Layer","transitions":[{"id":1567,"inputs":{},"position":"70,-680 70,-570","sourceConnector":"bottom","target":{"id":1565},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1565,"inputs":{"layerId":"roadLayer"},"position":"-50,-570","title":"Clear Graphics Layer"},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1570,"inputs":{"layerId":"updateSegmentLayer"},"position":"-30,-690","title":"Clear Graphics Layer","transitions":[{"id":1574,"inputs":{},"position":"90,-660 90,-550","sourceConnector":"bottom","target":{"id":1572},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1572,"inputs":{"layerId":"roadLayer"},"position":"-30,-550","title":"Clear Graphics Layer"},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1577,"inputs":{"layerId":"updateSegmentLayer"},"position":"-50,-710","title":"Clear Graphics Layer","transitions":[{"id":1581,"inputs":{},"position":"70,-680 70,-570","sourceConnector":"bottom","target":{"id":1579},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1579,"inputs":{"layerId":"roadLayer"},"position":"-50,-570","title":"Clear Graphics Layer"},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1582,"inputs":{"layerId":"updateSegmentLayer"},"position":"-470,420","title":"Clear Graphics Layer","transitions":[{"id":1587,"inputs":{},"position":"-350,450 -350,490","sourceConnector":"bottom","target":{"id":1585},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1585,"inputs":{"layerId":"roadLayer"},"position":"-470,490","title":"Clear Graphics Layer","transitions":[{"id":1588,"inputs":{},"position":"-350,520 -350,570","sourceConnector":"bottom","target":{"id":1548},"targetConnector":"top"}]},{"action":"gcx:wf:core::ClearItems","id":1615,"inputs":{"collection":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateGeom.state","source":"$updateRoad.state.updateGeom.state"}},"position":"-470,720","title":"Clear Collection","transitions":[{"id":1620,"inputs":{},"position":"-350,750 -350,820","sourceConnector":"bottom","target":{"id":1510},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1617,"inputs":{"elementName":"updateGeom","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value"},"position":"-470,650","title":"Set Form Element Property","transitions":[{"id":1619,"inputs":{},"position":"-350,680 -350,720","sourceConnector":"bottom","target":{"id":1615},"targetConnector":"top"}]}],"title":"click-buttonBar1"},{"id":1594,"steps":[{"id":1595,"inputs":{},"position":"-20,-160","purpose":"start","title":"Try","transitions":[{"id":1707,"inputs":{},"position":"70,-100 70,-50","sourceConnector":"bottom","target":{"id":1602},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis:query:QueryTask","id":1602,"inputs":{"outFields":"*","returnGeometry":false,"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"},"where":"1=1"},"name":"testServices","position":"-50,-50","title":"Test Services","transitions":[{"id":2155,"inputs":{},"position":"70,20 70,80","sourceConnector":"bottom","target":{"id":2154},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":2154,"inputs":{"message":"WORKING"},"position":"-50,80","title":"Log"}]},{"id":1597,"steps":[{"id":1598,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":1708,"inputs":{},"position":"90,60 90,220","sourceConnector":"bottom","target":{"id":1613},"targetConnector":"top"}]},{"action":"gcx:wf:forms:form:DisplayForm","id":1613,"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":1608}}},"name":"servicesDown","position":"-30,220","title":"Display Error"}]},{"id":1633,"steps":[{"id":1634,"inputs":{},"position":"110,-30","purpose":"start","title":"Event","transitions":[{"id":1640,"inputs":{},"position":"200,30 200,80","sourceConnector":"bottom","target":{"id":1639},"targetConnector":"top"}]},{"action":"gcx:wf:app::GetUserInfo","id":1639,"inputs":{},"name":"userInfoSubmission","position":"80,80","title":"Get User Info","transitions":[{"id":1645,"inputs":{},"position":"200,150 200,200","sourceConnector":"bottom","target":{"id":2424},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":1643,"inputs":{"elementName":"email","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$userInfoSubmission"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$userInfoSubmission.email","source":"$userInfoSubmission.email"}},"position":"-30,340","title":"Set Form Element Property","transitions":[{"id":2046,"inputs":{},"position":"90,370 90,430","sourceConnector":"bottom","target":{"id":2044},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":2044,"inputs":{"layerId":"graphicsLayer2"},"position":"-30,430","title":"Clear Graphics","transitions":[{"id":2508,"inputs":{},"position":"90,460 90,500 240,500 240,520","sourceConnector":"bottom","target":{"id":2507},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2424,"inputs":{"condition":{"accessors":["$userInfoSubmission"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$userInfoSubmission.email !== ''","source":"$userInfoSubmission.email !== ''"}},"position":"140,200","title":"If","transitions":[{"branch":"true","id":2426,"inputs":{},"position":"140,230 90,230 90,340","sourceConnector":"left","target":{"id":1643},"targetConnector":"top"},{"branch":"false","id":2430,"inputs":{},"position":"260,230 380,230 380,320","sourceConnector":"right","target":{"id":2431},"targetConnector":"top"}]},{"action":"gcx:wf:forms::SetFormElementProperty","id":2429,"inputs":{"elementName":"email","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"},"propertyName":"value","propertyValue":{"accessors":["$getADEmail"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$getADEmail.result","source":"$getADEmail.result"}},"position":"260,430","title":"Set Form Element Property","transitions":[{"id":2509,"inputs":{},"position":"380,460 380,500 240,500 240,520","sourceConnector":"bottom","target":{"id":2507},"targetConnector":"top"}]},{"action":"gcx:wf:core::TextReplace","id":2431,"inputs":{"newValue":{"accessors":[],"code":"\"\"","source":"\"\""},"oldValue":{"accessors":[],"code":"\"_MassDOT\"","source":"\"_MassDOT\""},"text":{"accessors":["$userInfoSubmission"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$userInfoSubmission.username","source":"$userInfoSubmission.username"}},"name":"getADEmail","position":"260,320","title":"Text Replace","transitions":[{"id":2432,"inputs":{},"position":"380,390 380,430","sourceConnector":"bottom","target":{"id":2429},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2507,"inputs":{"attributeName":"Email","attributeValue":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$submissionForm.state.email.value","source":"$submissionForm.state.email.value"},"feature":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"}},"position":"120,520","title":"Set Feature Attribute"}],"title":"load-email"},{"id":1687,"steps":[{"id":1688,"inputs":{},"position":"450,-420","purpose":"start","title":"Container","transitions":[{"id":2171,"inputs":{},"position":"540,-360 540,-300","sourceConnector":"bottom","target":{"id":2158},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":2158,"inputs":{},"position":"420,-300","title":"URLs","transitions":[{"id":2172,"inputs":{},"position":"540,-210 540,-170","sourceConnector":"bottom","target":{"id":2248},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":2168,"inputs":{},"position":"420,-40","title":"Features","transitions":[{"id":2521,"inputs":{},"position":"540,50 540,110","sourceConnector":"bottom","target":{"id":2517},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":2248,"inputs":{},"position":"420,-170","title":"Domain Values","transitions":[{"id":2251,"inputs":{},"position":"540,-80 540,-40","sourceConnector":"bottom","target":{"id":2168},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":2517,"inputs":{},"position":"420,110","title":"Reset Things"}]},{"id":1798,"steps":[{"id":1800,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":1829,"inputs":{},"position":"90,60 90,120","sourceConnector":"bottom","target":{"id":1827},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::AddFeatures","id":1827,"inputs":{"features":{"accessors":["$createRoadFeature"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$createRoadFeature.feature","source":"$createRoadFeature.feature"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"addRoadFeature","position":"-30,120","title":"Add Features"}]},{"id":1806,"steps":[{"id":1810,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":1820,"inputs":{},"position":"90,60 90,170","target":{"id":1817}}]},{"action":"gcx:wf:ui::Alert","id":1817,"inputs":{"text":"Tool failed to add new road. Please contact your system administrator."},"position":"-30,170","title":"Alert"}]},{"id":1845,"steps":[{"id":1848,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":1856,"inputs":{},"position":"90,60 90,170","target":{"id":1852}}]},{"action":"gcx:wf:ui::Alert","id":1852,"inputs":{"text":"Tool failed to add new road. Please contact your system administrator."},"position":"-30,170","title":"Alert"}]},{"id":1861,"steps":[{"id":1874,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":1901,"inputs":{},"position":"90,60 90,150","sourceConnector":"bottom","target":{"id":1900},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::AddFeatures","id":1900,"inputs":{"features":{"accessors":["$createRedline"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$createRedline.feature","source":"$createRedline.feature"},"url":{"accessors":["$redline"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$redline.result","source":"$redline.result"}},"name":"addRedline","position":"-30,150","title":"Add Features"}]},{"id":1869,"steps":[{"id":1870,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1873,"inputs":{},"position":"90,60 90,120","target":{"id":1872}}]},{"action":"gcx:wf:arcgis::ClearGraphicsLayer","id":1872,"inputs":{"layerId":"graphicsLayer2_layer"},"position":"-30,120","title":"Clear Graphics Layer"}],"title":"load-newStreet"},{"id":1905,"steps":[{"id":1907,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":1929,"inputs":{},"position":"90,60 90,260","sourceConnector":"bottom","target":{"id":1928},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::AddAttachment","id":1928,"inputs":{"attachment":{"accessors":["$newRoad"],"annotations":[{"count":8,"index":0,"kind":"idref"}],"code":"$newRoad.state.newFile.value.files[0]","source":"$newRoad.state.newFile.value.files[0]"},"objectId":{"accessors":["$addRoadFeature"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$addRoadFeature.results[0].objectId","source":"$addRoadFeature.results[0].objectId"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"addNewRoadAttachment","position":"-30,260","title":"Add Attachment"}]},{"id":1908,"steps":[{"id":1909,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":1920,"inputs":{},"position":"90,60 90,200","target":{"id":1912}}]},{"action":"gcx:wf:core::Log","id":1912,"inputs":{"message":"ATTRIBUTE SELECTION CHANGED"},"position":"-30,200","title":"Log"}],"title":"change-attributes"},{"id":1913,"steps":[{"id":1915,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":1919,"inputs":{},"position":"90,60 90,170","target":{"id":1917}}]},{"action":"gcx:wf:ui::Alert","id":1917,"inputs":{"text":"Tool failed to attach documentation for your new road. Please contact your system administrator."},"position":"-30,170","title":"Alert"}]},{"id":1976,"steps":[{"id":1977,"inputs":{},"position":"-700,-80","purpose":"start","title":"Event","transitions":[{"id":2055,"inputs":{},"position":"-610,-20 -610,90","sourceConnector":"bottom","target":{"id":2104},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1981,"inputs":{"condition":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.GeoUpdate.value === '1'","source":"$updateRoad.state.GeoUpdate.value === '1'"}},"position":"-210,250","title":"If","transitions":[{"branch":"true","id":2002,"inputs":{},"position":"-210,280 -370,280 -370,660","sourceConnector":"left","target":{"id":1986},"targetConnector":"top"},{"branch":"false","id":2028,"inputs":{},"position":"-90,280 500,280 500,660","sourceConnector":"right","target":{"id":1998},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1986,"inputs":{"message":"Allow submit"},"position":"-490,660","title":"Log","transitions":[{"id":2006,"inputs":{},"position":"-370,690 -370,740","sourceConnector":"bottom","target":{"id":1990},"targetConnector":"top"}]},{"action":"gcx:wf:forms::ShowFormElement","id":1990,"inputs":{"elementName":"buttonsUpdate","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"-490,740","title":"Show Form Element","transitions":[{"id":2099,"inputs":{},"position":"-370,770 -370,940","sourceConnector":"bottom","target":{"id":2090},"targetConnector":"top"}]},{"action":"gcx:wf:forms::HideFormElement","id":1998,"inputs":{"elementName":"buttonsUpdate","form":{"accessors":["$$form"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$$form","source":"$$form"}},"position":"380,660","title":"Hide Form Element","transitions":[{"id":2101,"inputs":{},"position":"500,690 500,930","sourceConnector":"bottom","target":{"id":2092},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2090,"inputs":{"object":{"accessors":["$submittable"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submittable","source":"$submittable"},"propertyName":"result","propertyValue":"geomonly"},"position":"-490,940","title":"Set Property","transitions":[{"id":2098,"inputs":{},"position":"-370,970 -370,1260 60,1260 60,1280","sourceConnector":"bottom","target":{"id":2094},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2092,"inputs":{"object":{"accessors":["$submittable"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submittable","source":"$submittable"},"propertyName":"result","propertyValue":false},"position":"380,930","title":"Set Property","transitions":[{"id":2096,"inputs":{},"position":"500,960 500,1260 60,1260 60,1280","sourceConnector":"bottom","target":{"id":2094},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":2094,"inputs":{"message":{"accessors":["$submittable"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submittable.result","source":"$submittable.result"}},"position":"-60,1280","title":"Log"},{"action":"gcx:wf:core::If","id":2104,"inputs":{"condition":{"accessors":["$submittable"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submittable.result === \"attributes\"","source":"$submittable.result === \"attributes\""}},"position":"-670,90","title":"If","transitions":[{"branch":"false","id":2026,"inputs":{},"position":"-550,120 -150,120 -150,250","sourceConnector":"right","target":{"id":1981},"targetConnector":"top"}]}],"title":"change-GeoUpdate"},{"id":2010,"steps":[{"id":2011,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":2020,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":2019}}]},{"action":"gcx:wf:arcgis::AddFeatures","id":2019,"inputs":{"features":{"accessors":["$updateToAdd"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$updateToAdd.feature","source":"$updateToAdd.feature"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"addRoadUpdateFeature","position":"-30,130","title":"Add Features"}]},{"id":2013,"steps":[{"id":2014,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":2022,"inputs":{},"position":"90,60 90,140","target":{"id":2021}}]},{"action":"gcx:wf:ui::Alert","id":2021,"inputs":{"text":"Road could not be updated, Please try again."},"position":"-30,140","title":"Alert"}]},{"id":2025,"steps":[{"id":2027,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":2031,"inputs":{},"position":"90,60 90,140","target":{"id":2029}}]},{"action":"gcx:wf:ui::Alert","id":2029,"inputs":{"text":"Road could not be updated, Please try again."},"position":"-30,140","title":"Alert"}]},{"id":2033,"steps":[{"id":2035,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":2049,"inputs":{},"position":"90,60 90,120","sourceConnector":"bottom","target":{"id":2048},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::AddAttachment","id":2048,"inputs":{"attachment":{"accessors":["$updateRoad"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$updateRoad.state.updateFile.value.files[0]","source":"$updateRoad.state.updateFile.value.files[0]"},"objectId":{"accessors":["$addRoadUpdateFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$addRoadUpdateFeature.results[0].objectId","source":"$addRoadUpdateFeature.results[0].objectId"},"url":{"accessors":["$edits"],"annotations":[{"count":6,"index":0,"kind":"idref"}],"code":"$edits.result","source":"$edits.result"}},"name":"addUpdateAttachment","position":"-30,120","title":"Add Attachment"}]},{"id":2058,"steps":[{"id":2059,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":2086,"inputs":{},"position":"90,60 90,240","sourceConnector":"bottom","target":{"id":2085},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2085,"inputs":{"object":{"accessors":["$submittable"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submittable","source":"$submittable"},"propertyName":"result","propertyValue":false},"position":"-30,240","title":"Set Property"}],"title":"load-header"},{"id":2159,"steps":[{"id":2160,"inputs":{},"position":"90,10","purpose":"start","title":"Container","transitions":[{"id":2204,"inputs":{},"position":"180,70 180,120","sourceConnector":"bottom","target":{"id":2190},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2175,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/62"},"name":"routes","position":"60,690","title":"Create Value","transitions":[{"id":2240,"inputs":{},"position":"180,760 180,810","sourceConnector":"bottom","target":{"id":2208},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2178,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/61"},"name":"street_names","position":"60,580","title":"Create Value","transitions":[{"id":2193,"inputs":{},"position":"180,650 180,690","sourceConnector":"bottom","target":{"id":2175},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2182,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Boundaries/Towns/MapServer/0"},"name":"towns","position":"60,450","title":"Create Value","transitions":[{"id":2195,"inputs":{},"position":"180,520 180,580","sourceConnector":"bottom","target":{"id":2178},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2186,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/RISA/FeatureServer/2"},"name":"submissions","position":"60,330","title":"Create Value","transitions":[{"id":2197,"inputs":{},"position":"180,400 180,450","sourceConnector":"bottom","target":{"id":2182},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2188,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/RISA/FeatureServer/1"},"name":"edits","position":"60,230","title":"Create Value","transitions":[{"id":2199,"inputs":{},"position":"180,300 180,330","sourceConnector":"bottom","target":{"id":2186},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2190,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/rh/rest/services/RoadInventory/RISA/FeatureServer/0"},"name":"redline","position":"60,120","title":"Create Value","transitions":[{"id":2202,"inputs":{},"position":"180,190 180,230","sourceConnector":"bottom","target":{"id":2188},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2208,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/21"},"name":"jurisdiction","position":"60,810","title":"Create Value","transitions":[{"id":2227,"inputs":{},"position":"180,880 180,910","sourceConnector":"bottom","target":{"id":2213},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2213,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/40"},"name":"Shoulder_Left","position":"60,910","title":"Create Value","transitions":[{"id":2229,"inputs":{},"position":"180,980 180,1030","sourceConnector":"bottom","target":{"id":2215},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2215,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/41"},"name":"Shoulder_Right","position":"60,1030","title":"Create Value","transitions":[{"id":2231,"inputs":{},"position":"180,1100 180,1140","sourceConnector":"bottom","target":{"id":2217},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2217,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/51"},"name":"Surface_Type","position":"60,1140","title":"Create Value","transitions":[{"id":2233,"inputs":{},"position":"180,1210 180,1240","sourceConnector":"bottom","target":{"id":2219},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2219,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/9"},"name":"Curb","position":"60,1240","title":"Create Value","transitions":[{"id":2235,"inputs":{},"position":"180,1310 180,1340","sourceConnector":"bottom","target":{"id":2221}}]},{"action":"gcx:wf:core::CreateValue","id":2221,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/52"},"name":"Terrain_Type","position":"60,1340","title":"Create Value","transitions":[{"id":2237,"inputs":{},"position":"180,1410 180,1328 180,1328 180,1430","sourceConnector":"bottom","target":{"id":2223},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2223,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/49"},"name":"Structural_Condition","position":"60,1430","title":"Create Value","transitions":[{"id":2239,"inputs":{},"position":"180,1500 180,1530","sourceConnector":"bottom","target":{"id":2225},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2225,"inputs":{"expression":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/34"},"name":"Pedestrian","position":"60,1530","title":"Create Value"}]},{"id":2164,"steps":[{"id":2166,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":2341,"inputs":{},"position":"90,60 90,110","target":{"id":2340}}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":2340,"inputs":{},"name":"theSubmissionFeature","position":"-30,110","title":"Create Feature","transitions":[{"id":2345,"inputs":{},"position":"90,180 90,240","sourceConnector":"bottom","target":{"id":2344},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::CreateGraphic","id":2344,"inputs":{},"name":"theRoadFeature","position":"-30,240","title":"Create Feature"}]},{"id":2244,"steps":[{"id":2246,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":2287,"inputs":{},"position":"90,60 90,140 130,140 130,160","sourceConnector":"bottom","target":{"id":2254},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2254,"inputs":{"field":"Jurisdictn","url":{"accessors":["$jurisdiction"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$jurisdiction.result","source":"$jurisdiction.result"}},"name":"getJurisdictionDomains","position":"10,160","title":"Get Coded Value Domain","transitions":[{"id":2272,"inputs":{},"position":"130,230 130,270","target":{"id":2256}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2256,"inputs":{"collection":{"accessors":["$getJurisdictionDomains"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$getJurisdictionDomains.domain.codedValues","source":"$getJurisdictionDomains.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"jurisdictionDomainElements","position":"10,270","title":"Get Form Element Items From Collection","transitions":[{"id":2274,"inputs":{},"position":"130,340 130,370","sourceConnector":"bottom","target":{"id":2258},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2258,"inputs":{"field":"Shldr_Lt_T","url":{"accessors":["$Shoulder_Left"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$Shoulder_Left.result","source":"$Shoulder_Left.result"}},"name":"getShldr_LtDomain","position":"10,370","title":"Get Coded Value Domain","transitions":[{"id":2276,"inputs":{},"position":"130,440 130,510","target":{"id":2260}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2260,"inputs":{"collection":{"accessors":["$getShldr_LtDomain"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$getShldr_LtDomain.domain.codedValues","source":"$getShldr_LtDomain.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"Shldr_LtDomainElements","position":"10,510","title":"Get Form Element Items From Collection","transitions":[{"id":2278,"inputs":{},"position":"130,580 130,620","sourceConnector":"bottom","target":{"id":2262},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2262,"inputs":{"field":"Surface_Tp","url":{"accessors":["$Surface_Type"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$Surface_Type.result","source":"$Surface_Type.result"}},"name":"getcodedvalueSt2","position":"10,620","title":"Get Coded Value Domain","transitions":[{"id":2280,"inputs":{},"position":"130,690 130,740","target":{"id":2264}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2264,"inputs":{"collection":{"accessors":["$getcodedvalueSt2"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$getcodedvalueSt2.domain.codedValues","source":"$getcodedvalueSt2.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"Surface_TypeDomainValues","position":"10,740","title":"Get Form Element Items From Collection","transitions":[{"id":2282,"inputs":{},"position":"130,810 130,860","sourceConnector":"bottom","target":{"id":2266},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2266,"inputs":{"field":"Shldr_Rt_T","url":{"accessors":["$Shoulder_Right"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$Shoulder_Right.result","source":"$Shoulder_Right.result"}},"name":"getcodedvalueRrT2","position":"10,860","title":"Get Coded Value Domain","transitions":[{"id":2284,"inputs":{},"position":"130,930 130,980","target":{"id":2268}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2268,"inputs":{"collection":{"accessors":["$getcodedvalueRrT2"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$getcodedvalueRrT2.domain.codedValues","source":"$getcodedvalueRrT2.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"Shldr_RtDomainElements","position":"10,980","title":"Get Form Element Items From Collection","transitions":[{"id":2286,"inputs":{},"position":"130,1050 130,1110","sourceConnector":"bottom","target":{"id":2270},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2270,"inputs":{"field":"Curb","url":{"accessors":["$Curb"],"annotations":[{"count":5,"index":0,"kind":"idref"}],"code":"$Curb.result","source":"$Curb.result"}},"name":"getcodedvalueCurbs2","position":"10,1110","title":"Get Coded Value Domain","transitions":[{"id":2319,"inputs":{},"position":"130,1180 130,1230","sourceConnector":"bottom","target":{"id":2290},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2290,"inputs":{"collection":{"accessors":["$getcodedvalueCurbs2"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$getcodedvalueCurbs2.domain.codedValues","source":"$getcodedvalueCurbs2.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"CurbsDomainElements","position":"10,1230","title":"Get Form Element Items From Collection","transitions":[{"id":2306,"inputs":{},"position":"130,1300 130,1380","sourceConnector":"bottom","target":{"id":2292},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2292,"inputs":{"field":"Terrain","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/52"},"name":"getcodedvalueTerrain2","position":"10,1380","title":"Get Coded Value Domain","transitions":[{"id":2308,"inputs":{},"position":"130,1450 130,1530","target":{"id":2294}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2294,"inputs":{"collection":{"accessors":["$getcodedvalueTerrain2"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$getcodedvalueTerrain2.domain.codedValues","source":"$getcodedvalueTerrain2.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"TerrainDomainElements","position":"10,1530","title":"Get Form Element Items From Collection","transitions":[{"id":2310,"inputs":{},"position":"130,1600 130,1670","sourceConnector":"bottom","target":{"id":2296},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2296,"inputs":{"field":"Struct_Cnd","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/49"},"name":"getcodedvalueStCnd2","position":"10,1670","title":"Get Coded Value Domain","transitions":[{"id":2312,"inputs":{},"position":"130,1740 130,1810","target":{"id":2298}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2298,"inputs":{"collection":{"accessors":["$getcodedvalueStCnd2"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$getcodedvalueStCnd2.domain.codedValues","source":"$getcodedvalueStCnd2.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"Struct_CndDomainElements","position":"10,1810","title":"Get Form Element Items From Collection","transitions":[{"id":2314,"inputs":{},"position":"130,1880 130,1940","sourceConnector":"bottom","target":{"id":2300},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2300,"inputs":{"field":"Left_Cond","url":"https://gis.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/34"},"name":"getcodedvaluenewLeft_Cond1","position":"10,1940","title":"Get Coded Value Domain","transitions":[{"id":2316,"inputs":{},"position":"130,2010 130,2080","target":{"id":2302}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2302,"inputs":{"collection":{"accessors":["$getcodedvaluenewLeft_Cond1"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$getcodedvaluenewLeft_Cond1.domain.codedValues","source":"$getcodedvaluenewLeft_Cond1.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"Left_CondDomainElements","position":"10,2080","title":"Get Form Element Items From Collection","transitions":[{"id":2318,"inputs":{},"position":"130,2150 130,2200","sourceConnector":"bottom","target":{"id":2304},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2304,"inputs":{"field":"Right_Cond","url":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/34"},"name":"getcodedvaluenewRight_Cond1","position":"10,2200","title":"Get Coded Value Domain","transitions":[{"id":2339,"inputs":{},"position":"130,2270 130,2350","sourceConnector":"bottom","target":{"id":2322},"targetConnector":"top"}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2322,"inputs":{"collection":{"accessors":["$getcodedvaluenewRight_Cond1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$getcodedvaluenewRight_Cond1.domain.codedValues","source":"$getcodedvaluenewRight_Cond1.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"Right_CondDomainElements","position":"10,2350","title":"Get Form Element Items From Collection","transitions":[{"id":2332,"inputs":{},"position":"130,2420 130,2460","sourceConnector":"bottom","target":{"id":2324},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2324,"inputs":{"field":"Pd_Sf_Type","url":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/34"},"name":"getcodedvaluenewPd_Sf_Type1","position":"10,2460","title":"Get Coded Value Domain","transitions":[{"id":2334,"inputs":{},"position":"130,2530 130,2590","target":{"id":2326}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2326,"inputs":{"collection":{"accessors":["$getcodedvaluenewPd_Sf_Type1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$getcodedvaluenewPd_Sf_Type1.domain.codedValues","source":"$getcodedvaluenewPd_Sf_Type1.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"Pd_Sf_TypeDomainElements","position":"10,2590","title":"Get Form Element Items From Collection","transitions":[{"id":2336,"inputs":{},"position":"130,2660 130,2710","sourceConnector":"bottom","target":{"id":2328},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::GetCodedValueDomain","id":2328,"inputs":{"field":"Pd_Fc_Type","url":"https://gisstg.massdot.state.ma.us/arcgis/rest/services/Roads/RoadInventoryLRS/MapServer/34"},"name":"getcodedvaluenewPd_Fc_Type1","position":"10,2710","title":"Get Coded Value Domain","transitions":[{"id":2338,"inputs":{},"position":"130,2780 130,2840","target":{"id":2330}}]},{"action":"gcx:wf:forms::GetFormElementItemsFromCollection","id":2330,"inputs":{"collection":{"accessors":["$getcodedvaluenewPd_Fc_Type1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$getcodedvaluenewPd_Fc_Type1.domain.codedValues","source":"$getcodedvaluenewPd_Fc_Type1.domain.codedValues"},"labelFieldName":"name","valueFieldName":"code"},"name":"Pd_Fc_TypeDomainElements","position":"10,2840","title":"Get Form Element Items From Collection"}]},{"id":2346,"steps":[{"id":2347,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":2350,"inputs":{},"position":"90,60 90,120","target":{"id":2349}}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2349,"inputs":{"attributeName":"Contact","attributeValue":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$submissionForm.state.name.value","source":"$submissionForm.state.name.value"},"feature":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"}},"position":"-30,120","title":"Set Feature Attribute"}],"title":"change-name"},{"id":2351,"steps":[{"id":2352,"inputs":{},"position":"0,0","purpose":"start","title":"Event","transitions":[{"id":2357,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":2356},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2356,"inputs":{"attributeName":"Email","attributeValue":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$submissionForm.state.email.value","source":"$submissionForm.state.email.value"},"feature":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"}},"position":"-30,130","title":"Set Feature Attribute"}],"title":"change-email"},{"id":2437,"steps":[{"id":2439,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":2445,"inputs":{},"position":"90,60 90,120","target":{"id":2441}}]},{"action":"gcx:wf:ui::Alert","id":2441,"inputs":{"text":"Could not create submission. Please contact your system administrator."},"position":"-30,120","title":"Alert","transitions":[{"id":2447,"inputs":{},"position":"90,150 90,250","sourceConnector":"bottom","target":{"id":2443},"targetConnector":"top"}]},{"action":"gcx:wf:forms:form:DisplayForm","id":2443,"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":2457}}},"name":"servicesDown1","position":"-30,250","title":"Display Error"}]},{"id":2449,"steps":[{"id":2451,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":2455,"inputs":{},"position":"90,60 90,110","sourceConnector":"bottom","target":{"id":2453},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::AddFeatures","id":2453,"inputs":{"features":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"},"url":{"accessors":["$submissions"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submissions.result","source":"$submissions.result"}},"name":"addSubmission","position":"-30,110","title":"Add Features","transitions":[{"id":2495,"inputs":{},"position":"90,180 90,230","sourceConnector":"bottom","target":{"id":2494},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2483,"inputs":{"condition":{"accessors":["$submissionForm","$addSubmission"],"annotations":[{"count":15,"index":0,"kind":"idref"},{"count":14,"index":59,"kind":"idref"}],"code":"$submissionForm.state.submissionFile.value != undefined && $addSubmission.results[0].success === true","source":"$submissionForm.state.submissionFile.value != undefined && $addSubmission.results[0].success === true"}},"position":"30,350","title":"If","transitions":[{"branch":"true","id":2491,"inputs":{},"position":"30,380 -310,380 -310,450","sourceConnector":"left","target":{"id":2485},"targetConnector":"top"},{"branch":"false","id":2499,"inputs":{},"position":"150,380 170,380 170,650 100,650 100,670","sourceConnector":"right","target":{"id":2497},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":2485,"inputs":{},"name":"tryAttachSubmissionDocument","position":"-430,450","title":"Try Catch","transitions":[{"id":2498,"inputs":{},"position":"-310,570 -310,650 100,650 100,670","sourceConnector":"bottom","target":{"id":2497},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2494,"inputs":{"expression":{"accessors":["$addSubmission"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$addSubmission.results[0]","source":"$addSubmission.results[0]"}},"name":"theSubmission","position":"-30,230","title":"Create Value","transitions":[{"id":2496,"inputs":{},"position":"90,300 90,350","sourceConnector":"bottom","target":{"id":2483},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetFeatureAttribute","id":2497,"inputs":{"attributeName":"OBJECTID","attributeValue":{"accessors":["$addSubmission"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$addSubmission.results[0].objectId","source":"$addSubmission.results[0].objectId"},"feature":{"accessors":["$theSubmissionFeature"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$theSubmissionFeature.feature","source":"$theSubmissionFeature.feature"}},"position":"-20,670","title":"Set Feature Attribute"}]},{"id":2467,"steps":[{"id":2469,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":2473,"inputs":{},"position":"90,60 90,100","target":{"id":2471}}]},{"action":"gcx:wf:ui::Alert","id":2471,"inputs":{"text":"Could not add attachment for submission. Please contact your system administrator."},"position":"-30,100","title":"Alert"}]},{"id":2475,"steps":[{"id":2477,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":2481,"inputs":{},"position":"90,60 90,150","sourceConnector":"bottom","target":{"id":2479},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::AddAttachment","id":2479,"inputs":{"attachment":{"accessors":["$submissionForm"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$submissionForm.state.submissionFile.value.files[0]","source":"$submissionForm.state.submissionFile.value.files[0]"},"objectId":{"accessors":["$addSubmission"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$addSubmission.results[0].objectId","source":"$addSubmission.results[0].objectId"},"url":{"accessors":["$submissions"],"annotations":[{"count":12,"index":0,"kind":"idref"}],"code":"$submissions.result","source":"$submissions.result"}},"name":"addSubmissionAttachment","position":"-30,150","title":"Add Attachment"}]},{"id":2518,"steps":[{"id":2519,"inputs":{},"position":"60,20","purpose":"start","title":"Container","transitions":[{"id":2541,"inputs":{},"position":"150,80 150,150","sourceConnector":"bottom","target":{"id":2532},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":2524,"inputs":{"expression":"1=1","layerId":"RoadInv"},"name":"filterRoads1","position":"30,580","title":"Set Layer Definition Expression"},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":2526,"inputs":{"expression":"1=1","layerId":"Updates"},"name":"filterUpdates1","position":"30,470","title":"Set Layer Definition Expression","transitions":[{"id":2534,"inputs":{},"position":"150,540 150,580","sourceConnector":"bottom","target":{"id":2524},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":2528,"inputs":{"expression":"1=1","layerId":"New"},"name":"filterNew1","position":"30,360","title":"Set Layer Definition Expression","transitions":[{"id":2536,"inputs":{},"position":"150,430 150,470","sourceConnector":"bottom","target":{"id":2526},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":2530,"inputs":{"expression":"1=1","layerId":"Submissions"},"name":"filterSubmissions1","position":"30,250","title":"Set Layer Definition Expression","transitions":[{"id":2538,"inputs":{},"position":"150,320 150,360","sourceConnector":"bottom","target":{"id":2528},"targetConnector":"top"}]},{"action":"gcx:wf:arcgis::SetLayerDefinitionExpression","id":2532,"inputs":{"expression":"1=1","layerId":"Towns"},"name":"filterTown1","position":"30,150","title":"Set Layer Definition Expression","transitions":[{"id":2540,"inputs":{},"position":"150,220 150,250","sourceConnector":"bottom","target":{"id":2530},"targetConnector":"top"}]}]}],"deploymentConfig":{"supportedApps":{"WAB":true},"worksOffline":false},"designerVersion":"5.19.0+22","forms":[{"defaults":{},"elements":{"date":{"enabled":true,"index":2,"title":{"markdown":"Date"},"type":"DatePicker","visible":false},"email":{"enabled":true,"index":3,"require":true,"title":{"markdown":"Email"},"tooltip":{"markdown":"Type in your email"},"type":"TextBox"},"footer":{"enabled":true,"index":5,"items":{"0":{"index":0,"label":{"markdown":"New Road"},"validates":true,"value":"addRoad"},"1":{"index":1,"label":{"markdown":"Update Road"},"validates":true,"value":"updateRoad"}},"section":"footer","type":"ButtonBar"},"header":{"section":"header","title":{"markdown":"Road Update Form"},"type":"Header"},"name":{"description":{"markdown":""},"enabled":true,"index":1,"require":true,"title":{"markdown":"Name"},"tooltip":{"markdown":"Type in your name"},"type":"TextBox","value":""},"submissionFile":{"description":{"markdown":"You may attach one document for all new roads or road updates, if you like. You will be able to add individual documents for each new road or road update."},"enabled":true,"index":5,"prompt":{"markdown":"Add File"},"title":{"markdown":"Attach Documentation"},"type":"FilePicker"},"text1":{"description":{"markdown":"[Road Inventory Data Dictionary](https://www.mass.gov/doc/road-inventory-data-dictionary/download)"},"enabled":true,"index":6,"type":"Text"},"text2":{"description":{"markdown":""},"enabled":true,"index":0,"title":{"markdown":"STAGING VERSION"},"type":"Text"},"towns":{"enabled":true,"index":4,"items":{},"require":true,"title":{"markdown":"Select Town"},"type":"DropDownList"}},"id":5},{"defaults":{},"elements":{"buttonBar2":{"enabled":true,"index":2,"items":{"0":{"index":0,"label":{"markdown":"Cancel and Update Road"},"validates":false,"value":"ignoreUpdate"}},"type":"ButtonBar"},"buttonsNew":{"enabled":true,"index":42,"items":{"0":{"default":true,"index":0,"label":{"markdown":"Submit"},"validates":true,"value":"submit"},"1":{"index":1,"label":{"markdown":"Exit Without Submitting"},"value":"exit"}},"section":"footer","type":"ButtonBar"},"horizontalRule1":{"enabled":true,"index":11,"type":"HorizontalRule"},"horizontalRule2":{"enabled":true,"index":15,"type":"HorizontalRule"},"horizontalRule3":{"enabled":true,"index":18,"type":"HorizontalRule"},"horizontalRule4":{"enabled":true,"index":22,"type":"HorizontalRule"},"horizontalRule5":{"enabled":true,"index":25,"type":"HorizontalRule"},"horizontalRule6":{"enabled":true,"index":31,"type":"HorizontalRule"},"horizontalRule7":{"enabled":true,"index":43,"type":"HorizontalRule"},"horizontalRule8":{"enabled":true,"index":5,"type":"HorizontalRule"},"horizontalRule9":{"enabled":true,"index":40,"type":"HorizontalRule"},"newCurb":{"enabled":true,"index":24,"items":{},"require":false,"title":{"markdown":"Curbs"},"type":"DropDownList"},"newFile":{"enabled":true,"index":4,"prompt":{"markdown":"Add File"},"require":false,"title":{"markdown":"Attach Documentation"},"type":"FilePicker"},"newFm_St_Name":{"description":{"markdown":"Please describe where the new road begins (e.g. street, cul-de-sac, dead-end, town/state line, private property)"},"enabled":true,"index":7,"require":true,"title":{"markdown":"From Location"},"tooltip":{"markdown":"[street, cul-de-sac, dead-end, town/state line, private property]"},"type":"TextBox"},"newGeom":{"enabled":true,"format":"polyline","index":6,"itemLabel":{"markdown":"Road Geometry"},"prompt":{"markdown":"Draw Road Shape"},"require":true,"size":1,"title":{"markdown":""},"type":"GeometryPicker"},"newJurisdictn":{"enabled":true,"index":10,"items":{},"require":true,"title":{"markdown":"Jurisdiction"},"type":"DropDownList"},"newLeft_Cond":{"enabled":true,"index":35,"items":{},"require":false,"title":{"markdown":"Left Condition"},"type":"DropDownList"},"newLength":{"description":{"markdown":"in miles"},"enabled":false,"format":{"precision":3,"step":null},"index":9,"title":{"markdown":"Length"},"tooltip":"Segment length in miles","type":"Number"},"newLt_Sidewlk":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":33,"require":true,"title":{"markdown":"Sidewalk Width - Left side"},"tooltip":"Width of the sidewalk in feet on the left side of the road traveling in the primary (NB/EB) direction of travel; on divided roadways, this will fall on the opposing direction (see illustration)","type":"Number","value":"0"},"newNotes":{"enabled":true,"index":41,"size":5,"title":{"markdown":"Comments or Notes"},"type":"TextArea"},"newNum_Lanes":{"enabled":true,"format":{"lowerBound":0,"precision":0},"index":23,"require":true,"title":{"markdown":"Number of Lanes"},"tooltip":"Number of travel lanes (for undivided roadways, number of lanes in both directions of travel, for divided roadways, number of lanes on the given segment only)","type":"Number","value":"0"},"newOperation":{"current":"","enabled":true,"index":26,"items":{"0":{"index":0,"label":{"markdown":"One-way"},"value":"1"},"1":{"index":1,"label":{"markdown":"Two-way"},"value":"2"}},"require":true,"title":{"markdown":"Street Operation"},"type":"RadioGroup"},"newPath_Width":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":37,"require":true,"title":{"markdown":"Off-road Path Width"},"type":"Number","value":"0"},"newPd_Fc_Type":{"enabled":true,"index":39,"items":{},"require":false,"title":{"markdown":"Pedestrian Facility Type"},"type":"DropDownList"},"newPd_Sf_Type":{"enabled":true,"index":38,"items":{},"require":false,"title":{"markdown":"Pedestrian Surface Type"},"type":"DropDownList"},"newROW_Width":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":29,"require":true,"title":{"markdown":"Right of Way Width"},"tooltip":"Right-of-way width in feet ","type":"Number","value":"0"},"newRight_Cond":{"enabled":true,"index":36,"items":{},"require":false,"title":{"markdown":"Right Condition"},"type":"DropDownList"},"newRt_Sidewlk":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":34,"require":true,"title":{"markdown":"Sidewalk Width - Right Side"},"tooltip":"Width of the sidewalk in feet on the right side of the road traveling in the primary (NB/EB) direction of travel","type":"Number","value":"0"},"newShldr_Lt_T":{"enabled":true,"index":13,"items":{},"require":true,"title":{"markdown":"Left Side Shoulder Type"},"tooltip":"Type of shoulder on the left side of the road traveling in the primary (NB/EB) direction of travel; for divided roadways median shoulders are assumed to be of the same type","type":"DropDownList"},"newShldr_Lt_W":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":14,"require":true,"title":{"markdown":"Width"},"tooltip":"Width of the sidewalk in feet on the left side of the road traveling in the primary (NB/EB) direction of travel; on divided roadways, this will fall on the opposing direction","type":"Number","value":"0"},"newShldr_Rt_T":{"enabled":true,"index":20,"items":{},"require":true,"title":{"markdown":"Right Side Shoulder Type"},"tooltip":"Type of shoulder on the right side of the road traveling in the primary (NB/EB) direction of travel","type":"DropDownList"},"newShldr_Rt_W":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":21,"require":true,"title":{"markdown":"Width"},"tooltip":"Width of the sidewalk in feet on the right side of the road traveling in the primary (NB/EB) direction of travel","type":"Number","value":"0"},"newSpeed":{"description":{"markdown":"miles per hour"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":30,"require":true,"title":{"markdown":"Speed Limit"},"tooltip":{"markdown":"miles per hour"},"type":"Number","value":"0"},"newSt_Name":{"description":{"markdown":""},"enabled":true,"index":3,"require":true,"title":{"markdown":"Road Name"},"tooltip":{"markdown":"(include suffix)"},"type":"TextBox"},"newStreet":{"section":"header","title":{"markdown":"Add New Street"},"type":"Header"},"newStruct_Cnd":{"enabled":true,"index":28,"items":{},"require":true,"title":{"markdown":"Structural Condition"},"type":"DropDownList"},"newSurface_Tp":{"enabled":true,"index":17,"items":{},"require":true,"title":{"markdown":"Surface Type"},"type":"DropDownList"},"newSurface_Wd":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":16,"require":true,"title":{"markdown":"Surface Width"},"tooltip":"Surface width in feet; measurement of traveled way, excluding shoulders/auxiliary lanes","type":"Number","value":"0"},"newTerrain":{"enabled":true,"index":27,"items":{},"require":true,"title":{"markdown":"Terrain"},"type":"DropDownList"},"newTo_St_Name":{"description":{"markdown":"Please describe where the new road ends (e.g. street, cul-de-sac, dead-end, town/state line, private property)"},"enabled":true,"index":8,"require":true,"title":{"markdown":"To Location"},"tooltip":{"markdown":"[street, cul-de-sac, dead-end, town/state line, private property]"},"type":"TextBox"},"nextOptions":{"current":"","enabled":true,"index":44,"items":{"0":{"index":0,"label":{"markdown":"Save and Add Another Road"},"value":"addRoad"},"1":{"index":1,"label":{"markdown":"Save and Update Road"},"value":"updateRoad"},"2":{"index":2,"label":{"markdown":"Save and Quit"},"value":"submitQuit"}},"require":true,"title":{"markdown":"What do you want to do next?"},"type":"RadioGroup"},"text1":{"description":{"markdown":""},"enabled":true,"index":12,"title":{"markdown":"Left Side Shoulder"},"type":"Text"},"text2":{"description":{"markdown":""},"enabled":true,"index":19,"title":{"markdown":"Right Side Shoulder"},"type":"Text"},"text3":{"description":{"markdown":""},"enabled":true,"index":32,"title":{"markdown":"Sidewalk"},"type":"Text"},"text4":{"description":{"markdown":"If the road attributes are not homogenous throughout its entire length, please use as many forms as necessary to most accurately describe the road."},"enabled":true,"index":42,"title":{"markdown":"Note:"},"type":"Text"},"text5":{"description":{"markdown":"[Road Inventory Data Dictionary](https://www.mass.gov/doc/road-inventory-data-dictionary/download)"},"enabled":true,"index":1,"type":"Text"},"text6":{"description":{"markdown":"## Add a New Street"},"enabled":true,"index":0,"type":"Text"}},"id":100},{"defaults":{},"elements":{"GeoUpdate":{"current":"1","description":{"markdown":"If yes, please describe the geometry update to be made below. Please be as detailed as possible and/or include documentation (photos, plans etc.)"},"enabled":true,"index":47,"items":{"0":{"index":0,"label":{"markdown":"Yes"},"tooltip":"Please describe in the comments box below.","value":"1"},"1":{"index":1,"label":{"markdown":"No"},"value":"2"}},"require":true,"title":{"markdown":"Does this road require a geometry update?"},"type":"RadioGroup"},"attributes":{"description":{"markdown":"Hold Ctrl/Shift to select multiple items"},"enabled":true,"index":16,"items":{"0":{"index":0,"label":"Street Name","value":"St_Name"},"1":{"index":1,"label":{"markdown":"Jurisdiction"},"value":"Jurisdictn"},"10":{"index":10,"label":{"markdown":"Street Operation"},"value":"Operation"},"11":{"index":11,"label":{"markdown":"Terrain"},"value":"Terrain"},"12":{"index":12,"label":{"markdown":"Structural Condition"},"value":"Struct_Cnd"},"13":{"index":13,"label":{"markdown":"Right of Way Width"},"value":"ROW_Width"},"14":{"index":14,"label":{"markdown":"Speed Limit"},"value":"Speed_Lim"},"15":{"index":15,"label":{"markdown":"Sidewalk Width - Left Side"},"value":"Lt_Sidewlk"},"16":{"index":16,"label":{"markdown":"Sidewalk Width - Right Side"},"value":"Rt_Sidewlk"},"17":{"index":17,"label":{"markdown":"Sidewalk Condition - Left"},"value":"Left_Cond"},"18":{"index":18,"label":{"markdown":"Sidewalk Condition - Right"},"value":"Right_Cond"},"19":{"index":19,"label":{"markdown":"Off-road Path Width"},"value":"Path_Width"},"2":{"index":2,"label":{"markdown":"Left Side Shoulder - Type"},"value":"Shldr_Lt_T"},"20":{"index":20,"label":{"markdown":"Pedestrian Surface Type"},"value":"Pd_Sf_Type"},"21":{"index":21,"label":{"markdown":"Pedestrian Facility Type"},"value":"Pd_Fc_Type"},"3":{"index":3,"label":{"markdown":"Left Side Shoulder - Width"},"value":"Shldr_Lt_W"},"4":{"index":4,"label":{"markdown":"Surface Width"},"value":"Surface_Wd"},"5":{"index":5,"label":{"markdown":"Surface Type"},"value":"Surface_Tp"},"6":{"index":6,"label":{"markdown":"Right Side Shoulder - Type"},"value":"Shldr_Rt_T"},"7":{"index":7,"label":{"markdown":"Right Side Shoulder Width"},"value":"Shldr_Rt_W"},"8":{"index":8,"label":{"markdown":"Number of Lanes"},"value":"Num_Lanes"},"9":{"index":9,"label":{"markdown":"Curbs"},"value":"Curb"}},"require":false,"size":7,"title":{"markdown":"Attribute(s) to Update"},"type":"ListBox"},"buttonBar1":{"enabled":true,"index":2,"items":{"0":{"index":0,"label":{"markdown":"Cancel and Add New Road"},"value":"ignoreAdd"}},"type":"ButtonBar"},"buttonsUpdate":{"enabled":true,"index":52,"items":{"0":{"default":true,"index":0,"label":{"markdown":"Submit"},"validates":true,"value":"submit"},"1":{"index":1,"label":{"markdown":"Exit Without Submitting"},"value":"exit"}},"type":"ButtonBar","visible":false},"header":{"section":"header","title":{"markdown":"Update an existing street"},"type":"Header"},"horizontalRule1":{"enabled":true,"index":20,"type":"HorizontalRule","visible":false},"horizontalRule10":{"enabled":true,"index":3,"type":"HorizontalRule"},"horizontalRule2":{"enabled":true,"index":23,"type":"HorizontalRule","visible":false},"horizontalRule3":{"enabled":true,"index":26,"type":"HorizontalRule","visible":false},"horizontalRule4":{"enabled":true,"index":29,"type":"HorizontalRule","visible":false},"horizontalRule5":{"enabled":true,"index":32,"type":"HorizontalRule","visible":false},"horizontalRule6":{"enabled":true,"index":38,"type":"HorizontalRule","visible":false},"horizontalRule7":{"enabled":true,"index":50,"type":"HorizontalRule"},"horizontalRule8":{"enabled":true,"index":11,"type":"HorizontalRule"},"horizontalRule9":{"enabled":true,"index":8,"type":"HorizontalRule"},"roadPicker":{"enabled":true,"format":"point","index":6,"itemLabel":{"markdown":"Selected road"},"prompt":{"markdown":"Click a road on the map"},"size":1,"title":{"markdown":"Road Picker"},"type":"GeometryPicker"},"text1":{"description":{"markdown":"[Road Inventory Data Dictionary](https://www.mass.gov/doc/road-inventory-data-dictionary/download)"},"enabled":true,"index":1,"type":"Text"},"text2":{"description":{"markdown":"Select the road to update by choosing a road name from the drop down menu or by using the road picker to click a road on the map "},"enabled":true,"index":4,"type":"Text"},"text3":{"description":{"markdown":""},"enabled":true,"index":39,"title":{"markdown":"Sidewalk Width"},"type":"Text","visible":false},"text4":{"description":{"markdown":"If the road attributes are not homogenous throughout its entire length, please use as many forms as necessary to most accurately describe the road."},"enabled":true,"index":49,"title":{"markdown":"Note: "},"type":"Text","visible":true},"text5":{"description":{"markdown":"## Update an Existing Street"},"enabled":true,"index":0,"type":"Text"},"updateCurb":{"enabled":true,"index":31,"items":{},"title":{"markdown":"Curbs"},"type":"DropDownList","visible":false},"updateFile":{"enabled":true,"index":10,"prompt":{"markdown":"Add File"},"title":{"markdown":"Attach Documentation"},"type":"FilePicker"},"updateForm":{"enabled":true,"index":17,"items":{"0":{"default":false,"index":0,"label":{"markdown":"Update Attributes"},"validates":true}},"type":"ButtonBar"},"updateFrom_Measure":{"enabled":true,"format":{"lowerBound":0,"precision":8,"step":0.001},"index":13,"title":{"markdown":"From Mile"},"tooltip":" The measured length along the specified RoadSegment feature where the RoadInventory segment starts","type":"Number"},"updateGeom":{"enabled":true,"format":"point","index":12,"itemLabel":{"markdown":"Point"},"prompt":{"markdown":"Add From/To Points"},"size":2,"title":{"markdown":""},"type":"GeometryPicker"},"updateID":{"current":"","enabled":true,"index":9,"items":{},"title":{"markdown":"Route ID"},"type":"RadioGroup","visible":false},"updateJurisdictn":{"description":{"markdown":""},"enabled":true,"index":19,"items":{},"title":{"markdown":"Jurisdiction"},"type":"DropDownList","visible":false},"updateLeft_Cond":{"enabled":true,"index":42,"items":{},"title":{"markdown":"Sidewalk Condition - Left side"},"type":"DropDownList","visible":false},"updateLength":{"description":{"markdown":"in miles"},"enabled":false,"index":15,"title":{"markdown":"Length"},"tooltip":"Segment length in miles","type":"Number","value":"=","visible":true},"updateLt_Sidewlk":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":40,"title":{"markdown":"Sidewalk Width - Left Side"},"tooltip":"Width of the sidewalk in feet on the left side of the road traveling in the primary (NB/EB) direction of travel; on divided roadways, this will fall on the opposing direction (see illustration)","type":"Number","value":"0","visible":false},"updateName":{"enabled":true,"index":5,"items":{"0":{"index":0,"label":{"markdown":"Option1"}},"1":{"index":1,"label":{"markdown":"Option2"}},"2":{"index":2,"label":{"markdown":"Option3"}}},"prompt":"Select a road name from the list","require":true,"title":{"markdown":"Road Name"},"type":"DropDownList"},"updateNotes":{"enabled":true,"index":48,"size":5,"title":{"markdown":"Comments or Notes"},"type":"TextArea"},"updateNum_Lanes":{"enabled":true,"format":{"lowerBound":0,"precision":0},"index":30,"title":{"markdown":"Number of Lanes"},"tooltip":"Number of travel lanes (for undivided roadways, number of lanes in both directions of travel, for divided roadways, number of lanes on the given segment only)","type":"Number","value":"2","visible":false},"updateOperation":{"enabled":true,"index":33,"items":{"0":{"index":0,"label":{"markdown":"One-way"},"value":"1"},"1":{"index":1,"label":{"markdown":"Two-way"},"value":"2"}},"title":{"markdown":"Street Operation"},"type":"RadioGroup","visible":false},"updateOptions":{"current":"","enabled":true,"index":51,"items":{"0":{"index":0,"label":{"markdown":"Save and Add New Road"},"value":"addRoad"},"1":{"index":1,"label":{"markdown":"Save and Update Another Road"},"value":"updateRoad"},"2":{"index":2,"label":{"markdown":"Save and Quit"},"value":"submitQuit"}},"require":true,"title":{"markdown":"What do you want to do next?"},"type":"RadioGroup"},"updatePath_Width":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":44,"title":{"markdown":"Off-road Path Width"},"type":"Number","value":"0","visible":false},"updatePd_Fc_Type":{"enabled":true,"index":46,"items":{},"title":{"markdown":"Pedestrian Facility Type"},"type":"DropDownList","visible":false},"updatePd_Sf_Type":{"enabled":true,"index":45,"items":{},"title":{"markdown":"Pedestrian Surface Type"},"type":"DropDownList","visible":false},"updateROW_Width":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":36,"title":{"markdown":"Right of Way Width"},"tooltip":"Right-of-way width in feet ","type":"Number","value":"0","visible":false},"updateRight_Cond":{"enabled":true,"index":43,"items":{},"title":{"markdown":"Sidewalk Condition - Right side"},"type":"DropDownList","visible":false},"updateRouteID":{"enabled":false,"index":7,"readOnly":true,"title":{"markdown":"LRS Route ID"},"type":"TextBox","visible":true},"updateRt_Sidewlk":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":41,"title":{"markdown":"Sidewalk Width - Right Side"},"tooltip":"Width of the sidewalk in feet on the right side of the road traveling in the primary (NB/EB) direction of travel","type":"Number","value":"0","visible":false},"updateShldr_Lt_T":{"enabled":true,"index":21,"items":{},"title":{"markdown":"Left Side Shoulder Type"},"tooltip":"Type of shoulder on the left side of the road traveling in the primary (NB/EB) direction of travel; for divided roadways median shoulders are assumed to be of the same type","type":"DropDownList","visible":false},"updateShldr_Lt_W":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":22,"title":{"markdown":"Left Side Shoulder Width"},"tooltip":"Width of the sidewalk in feet on the left side of the road traveling in the primary (NB/EB) direction of travel; on divided roadways, this will fall on the opposing direction","type":"Number","value":"0","visible":false},"updateShldr_Rt_T":{"enabled":true,"index":27,"items":{},"title":{"markdown":"Right Side Shoulder Type"},"tooltip":"Type of shoulder on the right side of the road traveling in the primary (NB/EB) direction of travel","type":"DropDownList","visible":false},"updateShldr_Rt_W":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":28,"title":{"markdown":"Right Side Shoulder Width"},"tooltip":" Width of the sidewalk in feet on the right side of the road traveling in the primary (NB/EB) direction of travel","type":"Number","value":"0","visible":false},"updateSpeed_Lim":{"description":{"markdown":"miles per hour"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":37,"title":{"markdown":"Speed Limit"},"type":"Number","value":"0","visible":false},"updateSt_Name":{"enabled":true,"index":18,"title":{"markdown":"Street Name"},"type":"TextBox","value":"NO NAME","visible":false},"updateStruct_Cnd":{"enabled":true,"index":35,"items":{},"title":{"markdown":"Structural Condition"},"type":"DropDownList","visible":false},"updateSurface_Tp":{"enabled":true,"index":25,"items":{},"title":{"markdown":"Surface Type"},"type":"DropDownList","visible":false},"updateSurface_Wd":{"description":{"markdown":"in feet"},"enabled":true,"format":{"lowerBound":0,"precision":0},"index":24,"title":{"markdown":"Surface Width"},"tooltip":"Surface width in feet; measurement of traveled way, excluding shoulders/auxiliary lanes","type":"Number","value":"0","visible":false},"updateTerrain":{"enabled":true,"index":34,"items":{},"title":{"markdown":"Terrain"},"type":"DropDownList","visible":false},"updateTo_Measure":{"enabled":true,"format":{"lowerBound":0,"precision":8,"step":0.001},"index":14,"title":{"markdown":"To Mile"},"tooltip":"The measured length along the RoadSegment feature where the RoadInventory segment ends","type":"Number"}},"id":103},{"defaults":{},"elements":{"errorMessage":{"description":{"markdown":"Our systems are currently experiencing issues.\n\nPlease check back later or contact [Jose Simo](jose.simo@dot.state.ma.us).\n\nWe apologize for any inconvenience"},"enabled":true,"index":0,"type":"Text"},"footer":{"enabled":true,"items":{},"section":"footer","type":"ButtonBar"},"header":{"section":"header","title":{"markdown":"System Error"},"type":"Header"}},"id":1608},{"defaults":{},"elements":{"errorMessage":{"description":{"markdown":"Our systems are currently experiencing issues.\n\nPlease check back later or contact [Jose Simo](jose.simo@dot.state.ma.us).\n\nWe apologize for any inconvenience"},"enabled":true,"index":0,"type":"Text"},"footer":{"enabled":true,"items":{},"section":"footer","type":"ButtonBar"},"header":{"section":"header","title":{"markdown":"System Error"},"type":"Header"}},"id":2457}],"licenseInfo":{"licenseeId":"0016000001KQg99AAD"},"start":{"id":3},"transitions":[{"branch":"populate$towns","id":41,"inputs":{},"source":{"id":4},"target":{"id":40}},{"branch":"changed$towns","id":104,"inputs":{},"source":{"id":4},"target":{"id":101}},{"branch":"populate$updateName","id":107,"inputs":{},"source":{"id":102},"target":{"id":106}},{"branch":"clicked$updateForm","id":227,"inputs":{},"source":{"id":102},"target":{"id":226}},{"branch":"loop","id":251,"inputs":{},"source":{"id":244},"target":{"id":237}},{"branch":"loop","id":264,"inputs":{},"source":{"id":259},"target":{"id":263}},{"branch":"changed$updateName","id":277,"inputs":{},"source":{"id":102},"target":{"id":276}},{"branch":"changed$newGeom","id":292,"inputs":{},"source":{"id":99},"target":{"id":291}},{"branch":"changed$updateTo_Measure","id":303,"inputs":{},"source":{"id":102},"target":{"id":302}},{"branch":"content","id":320,"inputs":{},"source":{"id":314},"target":{"id":318}},{"branch":"content","id":366,"inputs":{},"source":{"id":361},"target":{"id":364}},{"branch":"content","id":372,"inputs":{},"source":{"id":368},"target":{"id":371}},{"branch":"content","id":408,"inputs":{},"source":{"id":406},"target":{"id":400}},{"branch":"changed$updateID","id":441,"inputs":{},"source":{"id":102},"target":{"id":440}},{"branch":"content","id":457,"inputs":{},"source":{"id":455},"target":{"id":443}},{"branch":"populate$updateJurisdictn","id":466,"inputs":{},"source":{"id":102},"target":{"id":465}},{"branch":"populate$updateShldr_Lt_T","id":513,"inputs":{},"source":{"id":102},"target":{"id":512}},{"branch":"populate$updateShldr_Rt_T","id":555,"inputs":{},"source":{"id":102},"target":{"id":554}},{"branch":"content","id":559,"inputs":{},"source":{"id":556},"target":{"id":558}},{"branch":"populate$updateCurb","id":576,"inputs":{},"source":{"id":102},"target":{"id":575}},{"branch":"populate$updateStruct_Cnd","id":597,"inputs":{},"source":{"id":102},"target":{"id":596}},{"branch":"populate$updateTerrain","id":618,"inputs":{},"source":{"id":102},"target":{"id":617}},{"branch":"changed$updateGeom","id":640,"inputs":{},"source":{"id":102},"target":{"id":639}},{"branch":"content","id":700,"inputs":{},"source":{"id":698},"target":{"id":672}},{"branch":"content","id":735,"inputs":{},"source":{"id":733},"target":{"id":706}},{"branch":"loop","id":746,"inputs":{},"source":{"id":743},"target":{"id":745}},{"branch":"content","id":812,"inputs":{},"source":{"id":804},"target":{"id":810}},{"branch":"content","id":815,"inputs":{},"source":{"id":813},"target":{"id":786}},{"branch":"changed$updateFrom_Measure","id":819,"inputs":{},"source":{"id":102},"target":{"id":818}},{"branch":"populate$newLeft_Cond","id":888,"inputs":{},"source":{"id":99},"target":{"id":881}},{"branch":"populate$newPd_Sf_Type","id":901,"inputs":{},"source":{"id":99},"target":{"id":893}},{"branch":"populate$newJurisdictn","id":909,"inputs":{},"source":{"id":99},"target":{"id":908}},{"branch":"populate$newShldr_Lt_T","id":934,"inputs":{},"source":{"id":99},"target":{"id":931}},{"branch":"populate$newRight_Cond","id":949,"inputs":{},"source":{"id":99},"target":{"id":945}},{"branch":"populate$newSurface_Tp","id":968,"inputs":{},"source":{"id":99},"target":{"id":967}},{"branch":"loop","id":974,"inputs":{},"source":{"id":969},"target":{"id":971}},{"branch":"populate$newShldr_Rt_T","id":995,"inputs":{},"source":{"id":99},"target":{"id":994}},{"branch":"populate$newPd_Fc_Type","id":999,"inputs":{},"source":{"id":99},"target":{"id":996}},{"branch":"populate$newCurb","id":1010,"inputs":{},"source":{"id":99},"target":{"id":1009}},{"branch":"populate$newTerrain","id":1026,"inputs":{},"source":{"id":99},"target":{"id":1025}},{"branch":"populate$newStruct_Cnd","id":1041,"inputs":{},"source":{"id":99},"target":{"id":1040}},{"branch":"populate$updateLeft_Cond","id":1086,"inputs":{},"source":{"id":102},"target":{"id":1084}},{"branch":"populate$updateRight_Cond","id":1106,"inputs":{},"source":{"id":102},"target":{"id":1105}},{"branch":"populate$updateSurface_Tp","id":1137,"inputs":{},"source":{"id":102},"target":{"id":1136}},{"branch":"populate$updatePd_Sf_Type","id":1139,"inputs":{},"source":{"id":102},"target":{"id":1134}},{"branch":"changed$updateSurface_Tp","id":1175,"inputs":{},"source":{"id":102},"target":{"id":1174}},{"branch":"populate$updatePd_Fc_Type","id":1180,"inputs":{},"source":{"id":102},"target":{"id":1176}},{"branch":"try","id":1182,"inputs":{},"source":{"id":1147},"target":{"id":1165}},{"branch":"content","id":1195,"inputs":{},"source":{"id":1193},"target":{"id":1141}},{"branch":"loop","id":1197,"inputs":{},"source":{"id":1152},"target":{"id":1162}},{"branch":"changed$roadPicker","id":1214,"inputs":{},"source":{"id":102},"target":{"id":1200}},{"branch":"content","id":1247,"inputs":{},"source":{"id":1245},"target":{"id":1203}},{"branch":"loop","id":1249,"inputs":{},"source":{"id":1209},"target":{"id":1219}},{"branch":"catch","id":1251,"inputs":{},"source":{"id":1147},"target":{"id":1248}},{"branch":"content","id":1252,"inputs":{},"source":{"id":1226},"target":{"id":1238}},{"branch":"changed$updateLeft_Cond","id":1259,"inputs":{},"source":{"id":102},"target":{"id":1258}},{"branch":"changed$updateRight_Cond","id":1266,"inputs":{},"source":{"id":102},"target":{"id":1265}},{"branch":"changed$updatePath_Width","id":1273,"inputs":{},"source":{"id":102},"target":{"id":1272}},{"branch":"changed$updatePd_Sf_Type","id":1280,"inputs":{},"source":{"id":102},"target":{"id":1279}},{"branch":"changed$updatePd_Fc_Type","id":1287,"inputs":{},"source":{"id":102},"target":{"id":1286}},{"branch":"loop","id":1362,"inputs":{},"source":{"id":1360},"target":{"id":1326}},{"branch":"content","id":1378,"inputs":{},"source":{"id":1376},"target":{"id":1339}},{"branch":"loop","id":1461,"inputs":{},"source":{"id":1459},"target":{"id":1449}},{"branch":"clicked$buttonBar2","id":1478,"inputs":{},"source":{"id":99},"target":{"id":1476}},{"branch":"loop","id":1479,"inputs":{},"source":{"id":1477},"target":{"id":1467}},{"branch":"clicked$buttonBar1","id":1507,"inputs":{},"source":{"id":102},"target":{"id":1506}},{"branch":"try","id":1596,"inputs":{},"source":{"id":1593},"target":{"id":1595}},{"branch":"catch","id":1599,"inputs":{},"source":{"id":1593},"target":{"id":1598}},{"branch":"load$email","id":1635,"inputs":{},"source":{"id":4},"target":{"id":1634}},{"branch":"content","id":1689,"inputs":{},"source":{"id":1686},"target":{"id":1688}},{"branch":"try","id":1805,"inputs":{},"source":{"id":1796},"target":{"id":1800}},{"branch":"catch","id":1812,"inputs":{},"source":{"id":1796},"target":{"id":1810}},{"branch":"load$newStreet","id":1871,"inputs":{},"source":{"id":99},"target":{"id":1870}},{"branch":"try","id":1892,"inputs":{},"source":{"id":1888},"target":{"id":1874}},{"branch":"catch","id":1896,"inputs":{},"source":{"id":1888},"target":{"id":1848}},{"branch":"changed$attributes","id":1911,"inputs":{},"source":{"id":102},"target":{"id":1909}},{"branch":"catch","id":1923,"inputs":{},"source":{"id":1921},"target":{"id":1915}},{"branch":"try","id":1925,"inputs":{},"source":{"id":1921},"target":{"id":1907}},{"branch":"changed$GeoUpdate","id":1978,"inputs":{},"source":{"id":102},"target":{"id":1977}},{"branch":"try","id":2012,"inputs":{},"source":{"id":2009},"target":{"id":2011}},{"branch":"catch","id":2015,"inputs":{},"source":{"id":2009},"target":{"id":2014}},{"branch":"try","id":2043,"inputs":{},"source":{"id":2041},"target":{"id":2035}},{"branch":"catch","id":2045,"inputs":{},"source":{"id":2041},"target":{"id":2027}},{"branch":"load$header","id":2060,"inputs":{},"source":{"id":102},"target":{"id":2059}},{"branch":"content","id":2161,"inputs":{},"source":{"id":2158},"target":{"id":2160}},{"branch":"content","id":2170,"inputs":{},"source":{"id":2168},"target":{"id":2166}},{"branch":"content","id":2250,"inputs":{},"source":{"id":2248},"target":{"id":2246}},{"branch":"changed$name","id":2348,"inputs":{},"source":{"id":4},"target":{"id":2347}},{"branch":"changed$email","id":2353,"inputs":{},"source":{"id":4},"target":{"id":2352}},{"branch":"try","id":2461,"inputs":{},"source":{"id":2459},"target":{"id":2451}},{"branch":"catch","id":2463,"inputs":{},"source":{"id":2459},"target":{"id":2439}},{"branch":"try","id":2487,"inputs":{},"source":{"id":2485},"target":{"id":2477}},{"branch":"catch","id":2489,"inputs":{},"source":{"id":2485},"target":{"id":2469}},{"branch":"content","id":2520,"inputs":{},"source":{"id":2517},"target":{"id":2519}}]}